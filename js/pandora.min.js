// Copyright (c) 2009 Kazuhiko Arase

// Licensed under the MIT license:

//   http://www.opensource.org/licenses/mit-license.php

var AXEOrientation={};(function(){AXEOrientation.UNKONWN=0,AXEOrientation.PORTRAIT_UP=parseInt("100",2),AXEOrientation.PORTRAIT_DOWN=parseInt("10",2),AXEOrientation.LANDSCAPE_LEFT=parseInt("1",2),AXEOrientation.LANDSCAPE_RIGHT=parseInt("1000",2),AXEOrientation.PORTRAIT=AXEOrientation.PORTRAIT_UP|AXEOrientation.PORTRAIT_DOWN,AXEOrientation.LANDSCAPE=AXEOrientation.LANDSCAPE_LEFT|AXEOrientation.LANDSCAPE_RIGHT,AXEOrientation.ALL_ORIENTATION=AXEOrientation.PORTRAIT|AXEOrientation.LANDSCAPE})(),define("orientation",function(){});var AXEEvent=function(e,t){var n=this;n.timestamp=Date.now(),n.type=typeof e=="string"&&e.length>0?e:null,n.bubbles=typeof t=="boolean"?t:!1};(function(){AXEEvent.BACK="back",AXEEvent.LOAD="load",AXEEvent.PREPARED="prepared",AXEEvent.UPDATE="update",AXEEvent.READY="ready",AXEEvent.ADDED="added",AXEEvent.ADD_TO_STAGE="add_to_stage",AXEEvent.REMOVED="removed",AXEEvent.REMOVE_FROM_STAGE="remove_from_stage",AXEEvent.RESIZE="resize",AXEEvent.MAT_CHANGE="mat_change",AXEEvent.FINISH="finish",AXEEvent.START="start",AXEEvent.END="end",AXEEvent.COMPLETE="complete",AXEEvent.CHANGE="change",AXEEvent.SELECT="select",AXEEvent.CANCEL="cancel",AXEEvent.BEGIN="begin",AXEEvent.PLAYING="playing",AXEEvent.CUE_POINT="cue_point",AXEEvent.PAUSE="pause",AXEEvent.PLAY="play",AXEEvent.ENDED="ended",AXEEvent.OPEN="open",AXEEvent.CLOSE="close",AXEEvent.INPUT="input",AXEEvent.NONE_PHASE=0,AXEEvent.CAPTURING_PHASE=1,AXEEvent.AT_TARGET=2,AXEEvent.BUBBLING_PHASE=3,AXEEvent.prototype.constructor=AXEEvent,AXEEvent.prototype.evtData=null,AXEEvent.prototype.target=null,AXEEvent.prototype.currentTarget=null,AXEEvent.prototype.currentPhase=AXEEvent.NONE_PHASE,AXEEvent.prototype.type=null,AXEEvent.prototype.bubbles=!1,AXEEvent.prototype.timestamp=0,AXEEvent.prototype.eventStop=!1,AXEEvent.prototype.cancel=!1,AXEEvent.prototype.preventDefault=!1,AXEEvent.prototype.stopPropagation=function(){var e=this;e.bubbles=!1},AXEEvent.prototype.stopImmediatePropagation=function(){var e=this;e.eventStop=!0},AXEEvent.prototype.clone=function(){var e=this,t=new AXEEvent(e.type,e.bubbles);return t.evtData=e.evtData,t},AXEEvent.prototype.dealloc=function(){var e=this;e.evtData=null,e.type=null,e.timestamp=0}})(),define("event",function(){});var AXEDeviceEvent=function(e,t){var n=this;e==AXEDeviceEvent.ORIENTATION_CHANGE&&isNaN(t)==0&&(n.orientation=t),AXEEvent.prototype.constructor.call(n,e,!1)};(function(){AXEDeviceEvent.ORIENTATION_CHANGE="orientation_change",AXEDeviceEvent.SWING_START="swing_start",AXEDeviceEvent.SWING_END="swing_end",AXEDeviceEvent.SHAKE="shake",AXEDeviceEvent.prototype=new AXEEvent,AXEDeviceEvent.prototype.constructor=AXEDeviceEvent,AXEDeviceEvent.prototype.orientation=AXEOrientation.UNKONWN,AXEDeviceEvent.prototype.clone=function(){var e=this;return new AXEDeviceEvent(e.type,e.orientation)},AXEDeviceEvent.prototype.dealloc=function(){var e=this;e.orientation=0,AXEEvent.prototype.dealloc.call(e)}})(),define("device_event",["orientation","event"],function(){});var AXEEventTarget=function(){};(function(){var e=function(e,t,n){var r=this;r.target=e,r.handler=t,r.priority=n};e.prototype.constructor=e,e.prototype.target=null,e.prototype.handler=null,e.prototype.priority=0,e.prototype.match=function(e,t){var n=this,r=!0;return r&&Boolean(e)&&(r=e===n.target),r&&Boolean(t)&&(r=t===n.handler),r},AXEEventTarget.prototype.constructor=AXEEventTarget,AXEEventTarget.prototype._captureHandlers=null,AXEEventTarget.prototype.captureHandlers=function(){var e=this;return e._captureHandlers==null&&(e._captureHandlers={}),e._captureHandlers},AXEEventTarget.prototype._handlers=null,AXEEventTarget.prototype.handlers=function(){var e=this;return e._handlers==null&&(e._handlers={}),e._handlers},AXEEventTarget.prototype.addListener=function(t,n,r,i,s){var o=this;i=typeof i=="boolean"?i:!1,s=isNaN(s)?0:s;var u=t.split(" ");if(u.length<2){var a=i?o.captureHandlers():o.handlers();a.hasOwnProperty(t)==0&&(a[t]=[]);var f=a[t],l=new e(n,r,s);if(f.length<=0)f.push(l);else for(var c=0;c<f.length;c++){if(f[c].priority<s){f.splice(c,l);break}if(c==f.length-1){f.push(l);break}}}else for(var h=0;h<u.length;h++)o.addListener(u[c],n,r,i,s)},AXEEventTarget.prototype.removeListener=function(e,t,n){var r=this;if(typeof e=="string"){var i=e.split(" ");if(i.length>1)for(var s=0;s<i.length;s++)r.removeListener(i[s],t,n);else{var o=r.handlers().hasOwnProperty(e)?r._handlers[e]:null,u=r.captureHandlers().hasOwnProperty(e)?r._captureHandlers[e]:null;if(o!=null){for(var a=o.length-1;a>=0;a--)o[a].match(t,n)&&o.splice(a,1);o.length<=0&&delete r._handlers[e]}if(u!=null){for(var f=u.length-1;f>=0;f--)u[f].match(t,n)&&u.splice(f,1);u.length<=0&&delete r._captureHandlers[e]}}}else r._captureHandlers=null,r._handlers=null},AXEEventTarget.prototype.hasListener=function(e,t,n){var r=this,i=!1;if(r.handlers().hasOwnProperty(e)){var s=r._handlers[e];for(var o=0;o<s.length;o++)if(s[o].match(t,n)){i=!0;break}}if(i==0&&r.captureHandlers().hasOwnProperty(e)){var u=r._captureHandlers[e];for(var a=0;a<u.length;a++)if(u.match(t,n)){i=!0;break}}return i},AXEEventTarget.prototype.spreadToDeep=function(e){return!1},AXEEventTarget.prototype.spreadToTop=function(e){},AXEEventTarget.prototype.triggerEvent=function(e){var t=this;e.currentTarget=t,e.target==null&&(e.target=t);var n=null;e.currentPhase==AXEEvent.CAPTURING_PHASE?n=t.captureHandlers():n=t.handlers();if(n.hasOwnProperty(e.type)){var r=n[e.type].slice();for(var i=0;i<r.length;i++){r[i].handler.call(r[i].target,e);if(e.eventStop)break}}if(e.eventStop==0)if(e.currentPhase==AXEEvent.CAPTURING_PHASE){if(t.spreadToDeep(e)==0){var s=e.clone();s.target=t,s.currentPhase=AXEEvent.AT_TARGET,t.triggerEvent(s)}}else e.bubbles===!0&&t.spreadToTop(e)},AXEEventTarget.prototype.dealloc=function(){var e=this;e._handlers=null,e._captureHandlers=null}})(),define("event_target",["event"],function(){});var AXEEnv={};(function(e,t){var n={},r={},i=e.match(/WebKit[\/]?([\d.]+)/i),s=e.match(/(Android);?[\s\/]+([\d.]+)?/i),o=!!e.match(/\(Macintosh; Intel /),u=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=/Win\d{2}|Windows/.test(t),h=e.match(/Windows Phone ([\d.]+)/),p=l&&e.match(/TouchPad/),d=e.match(/Kindle\/([\d.]+)/),v=e.match(/Silk\/([\d._]+)/),m=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),w=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),E=e.match(/Firefox\/([\d.]+)/),S=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),x=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),T=!w&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),N=T||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),C=e.match(/MicroMessenger/i),k=e.match(/AliApp\(TB/i),L=e.match(/AliApp\(TM/i),A=e.match(/QQ/),O=e.match(/qzone/i),M=e.match(/weibo/i),_=e.match(/OfoApp/i),D=e.match(/DingTalk/);r.webkit=i,r.webkit!=null&&(r.version=i[1]),n.supportDeviceMotion=window["orientation"]!=undefined&&isNaN(parseFloat(window["orientation"]))==0,s&&(n.android=!0,n.version=s[2]),f&&!a&&(n.ios=n.iphone=!0,n.version=f[2].replace(/_/g,".")),u&&(n.ios=n.ipad=!0,n.version=u[2].replace(/_/g,".")),a&&(n.ios=n.ipod=!0,n.version=a[3]?a[3].replace(/_/g,"."):null),h&&(n.wp=!0,n.version=h[1]),l&&(n.webos=!0,n.version=l[2]),p&&(n.touchpad=!0),m&&(n.blackberry=!0,n.version=m[2]),g&&(n.bb10=!0,n.version=g[2]),y&&(n.rimtabletos=!0,n.version=y[2]),b&&(r.playbook=!0),d&&(n.kindle=!0,n.version=d[1]),v&&(r.silk=!0,r.version=v[1]),!v&&n.android&&e.match(/Kindle Fire/)&&(r.silk=!0),w&&(r.chrome=!0,r.version=w[1]),E&&(r.firefox=!0,r.version=E[1]),S&&(n.firefoxos=!0,n.version=S[1]),x&&(r.ie=!0,r.version=x[1]),N&&(o||n.ios||c)&&(r.safari=!0,n.ios||(r.version=N[1])),T&&(r.webview=!0),C&&(r.wechat=!0),A&&(r.qq=!0),O&&(r.qzone=!0),M&&(r.weibo=!0),_&&(r.ofo=!0),k&&(r.taobao=!0),L&&(r.tmall=!0),D&&(r.ding=!0),r.aliApp=k||L||D,n.tablet=!!(u||b||s&&!e.match(/Mobile/)||E&&e.match(/Tablet/)||x&&!e.match(/Phone/)&&e.match(/Touch/)),n.phone=!!(!n.tablet&&!n.ipod&&(s||f||l||m||g||w&&e.match(/Android/)||w&&e.match(/CriOS\/([\d.]+)/)||E&&e.match(/Mobile/)||x&&e.match(/Touch/))),n.isTouchDevice=n.tablet||n.phone,AXEEnv.browser=r,AXEEnv.os=n;var P=function(){var e=this;window.DeviceOrientationEvent&&(window.addEventListener("deviceorientation",function(t){e.orientationDetail.beta=t.beta,e.orientationDetail.gamma=t.gamma,e.orientationDetail.alpha=t.alpha;var n,r;AXEEnv.os.ios?(n=t.alpha+t.gamma,n%=360,n<0&&(n+=360)):AXEEnv.os.android&&(n=t.alpha+t.gamma+30),n%=360,n<0&&(n+=360),r=t.beta,r+=180,r%=360,r<0&&(r+=360),e.long=n,e.lat=r,t.preventDefault()},!1),window.addEventListener("orientationchange",function(t){e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.ORIENTATION_CHANGE,e.orientation())),t.preventDefault()},!1));if(window.DeviceMotionEvent){var t=!1;window.addEventListener("devicemotion",function(t){t["acceleration"]!=null?(e.acceleration.x=t.acceleration.x,e.acceleration.y=t.acceleration.y,e.acceleration.z=t.acceleration.z):(e.acceleration.x=0,e.acceleration.y=0,e.acceleration.z=0),t["accelerationIncludingGravity"]!=null?(e.accelerationIncludingGravity.x=t.accelerationIncludingGravity.x,e.accelerationIncludingGravity.y=t.accelerationIncludingGravity.y,e.accelerationIncludingGravity.z=t.accelerationIncludingGravity.z):(e.accelerationIncludingGravity.x=0,e.accelerationIncludingGravity.y=0,e.accelerationIncludingGravity.z=0),t["rotationRate"]!=null?(e.rotationRate.beta=t.rotationRate.beta,e.rotationRate.gamma=t.rotationRate.gamma,e.rotationRate.alpha=t.rotationRate.alpha):(e.rotationRate.beta=0,e.rotationRate.gamma=0,e.rotationRate.alpha=0);var n=isNaN(parseFloat(e.rotationRate.alpha))&&isNaN(parseFloat(e.rotationRate.beta))&&isNaN(parseFloat(e.rotationRate.gamma));n=n||Boolean(AXEEnv.os.android),n==0&&(Math.abs(e.rotationRate.beta)+Math.abs(e.rotationRate.gamma)+Math.abs(e.rotationRate.alpha)>e.SWING_START_THREHOLD&&e.swinging()==0?(e._swinging=!0,e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.SWING_START))):Math.abs(e.rotationRate.beta)+Math.abs(e.rotationRate.gamma)+Math.abs(e.rotationRate.alpha)<e.SWING_END_THREHOLD&&e.swinging()&&(e._swinging=!1,e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.SWING_END))));var r=n?e.accelerationIncludingGravity:e.acceleration;isNaN(r.x)&&isNaN(r.y)&&isNaN(r.z)&&(n=!0,r=e.accelerationIncludingGravity);if(t.timeStamp-e.lastShakeTS>e.SHAKE_INTERVAL){if(e.lastShakeTS>0){var i=Math.abs(e.shakeX-r.x+e.shakeY-r.y+e.shakeZ-r.z)/(t.timeStamp-e.lastShakeTS)*1e3;i>e.SHAKE_THRESHOLD&&(e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.SHAKE)),n&&(e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.SWING_START)),e.triggerEvent(new AXEDeviceEvent(AXEDeviceEvent.SWING_END))))}e.lastShakeTS=t.timeStamp,e.shakeX=r.x,e.shakeY=r.y,e.shakeZ=r.z}t.preventDefault()},!1)}};P.prototype=new AXEEventTarget,P.prototype.constructor=P,P.prototype._orientation=AXEOrientation.UNKONWN,P.prototype.orientation=function(){var e=this;if(window["orientation"]!=undefined&&isNaN(window["orientation"])==0)switch(window.orientation){case 0:e._orientation=AXEOrientation.PORTRAIT_UP;break;case-90:e._orientation=AXEOrientation.LANDSCAPE_RIGHT;break;case 90:e._orientation=AXEOrientation.LANDSCAPE_LEFT;break;case 180:case-180:e._orientation=AXEOrientation.PORTRAIT_DOWN;break;default:e._orientation=AXEOrientation.UNKONWN}return e._orientation},P.prototype.acceleration={x:0,y:0,z:0},P.prototype.accelerationIncludingGravity={x:0,y:0,z:0},P.prototype.rotationRate={beta:0,gamma:0,alpha:0},P.prototype.orientationDetail={beta:0,gamma:0,alpha:0},P.prototype.long=0,P.prototype.lat=0,P.prototype.windowWidth=0,P.prototype.windowHeight=0,P.prototype.shakeX=0,P.prototype.shakeY=0,P.prototype.shakeZ=0,P.prototype.lastShakeTS=0,P.prototype.SHAKE_INTERVAL=150,P.prototype.SHAKE_THRESHOLD=120,P.prototype.SWING_START_THREHOLD=150,P.prototype.SWING_END_THREHOLD=50,P.prototype._swinging=!1,P.prototype.swinging=function(){var e=this;return e._swinging},AXEEnv.device=new P,AXEEnv.nativeXHR=function(){var e=null;if(window["XMLHttpRequest"]!=undefined)e=new XMLHttpRequest;else try{e=new ActiveXObject("MSXML2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=null}}return e},AXEEnv.vendorJSProp=function(e,t){var n=undefined;if(e[t]!=undefined)n=e[t];else{var r=t.slice(0,1).toUpperCase()+t.slice(1,t.length),i=["webkit","moz","o","ms"];for(var s=0;s<i.length;s++){var o=i[s]+r;if(e[o]!=undefined){n=e[o];break}}}return n},AXEEnv.vendorPrefix=function(){var e=null;return document["hidden"]!=undefined?e="":document["webkitHidden"]!=undefined?e="webkit":document["mozHidden"]!=undefined?e="moz":document["oHidden"]!=undefined?e="o":document["msHidden"]!=undefined&&(e="ms"),e},AXEEnv.addVendorPrefix=function(e){var t=null,n=AXEEnv.vendorPrefix();return n!=null&&(n.length<=0?t=e:t=n+e.slice(0,1).toUpperCase()+e.slice(1,e.length)),t};var H=window.alert;window.alert=function(e){try{var t=document.createElement("IFRAME");t.style.display="none",t.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(t),window.frames[0].window.alert(e),t.parentNode.removeChild(t)}catch(n){H(e)}},Math.randWithPoints=function(e){var t=Math.random();e=[new AXEVec2(0,0)].concat(e).concat([new AXEVec2(1,1)]);var n=null,r=null;for(var i=0;i<e.length;i++)if(t<e[i].x){r=e[i],n=e[i-1];break}var s=r.subtract(n),o=Math.tan(s.radian()),u=r.y-o*r.x;return t*o+u},Math.TWO_PI=Math.PI*2,Math.HALF_PI=Math.PI/2})(window.navigator.userAgent,window.navigator.platform),define("env",["orientation","device_event","event_target"],function(){});var AXEManager=function(){};(function(){AXEManager._keys=null,AXEManager.keys=function(){return AXEManager._keys==null&&(AXEManager._keys=[]),AXEManager._keys},AXEManager._axes=null,AXEManager.axes=function(){return AXEManager._axes==null&&(AXEManager._axes={}),AXEManager._axes},AXEManager.issueUdid=function(){var e=8,t,n=!1;do{t="";for(var r=0;r<e;r++){var i=Math.random()>.5,s="";i?s=String.fromCharCode(48+Math.floor(Math.random()*10)):s=String.fromCharCode(97+Math.floor(Math.random()*26)),t+=s}var o=AXEManager.keys();for(var u=0;u<o.length;u++)if(o[u]==t){n=!0;break}}while(n);return t},AXEManager.addAXE=function(e){AXEManager.keys().push(e.udid),AXEManager.axes()[e.udid]=e},AXEManager.axeByUdid=function(e){return AXEManager.axes()[e]}})(),define("axe_manager",function(){});var AXEStringUtil={};(function(){AXEStringUtil.formatString=function(e,t){var n=e;for(var r in t){var i="%"+r+"%",s=String(t[r]),o=new RegExp(i,"ig");n=n.replace(o,s)}return n},AXEStringUtil.fillStringTo=function(e,t,n,r){var i=e.slice(0);r=arguments.length>=4?r:!0;while(i.length<n)i=r?t+i:i+t;return i},AXEStringUtil.lineToCamel=function(e){var t=e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});return t},AXEStringUtil.camelToLine=function(e){var t=e.replace(/\W/g,function(e){return"-"+e.toLowerCase()});return t},AXEStringUtil.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{window.DOMParser?(n=new window.DOMParser,t=n.parseFromString(e,"text/xml")):(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(r){t=undefined}return(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)&&console.log("Invalid XML: "+e),t},AXEStringUtil.group=function(e,t,n){n=typeof n=="boolean"?n:!1;var r=[];if(n){var i=e.length%t;i>0&&(r.push(e.substr(0,i)),e=e.substr(i,e.length-i))}for(var s=0;s<e.length;s+=t)r.push(e.substr(s,t));return r},AXEStringUtil.cashFormat=function(e,t){t=typeof t=="number"?t:0,e=Math.round(e*Math.pow(10,t))/Math.pow(10,t);var n=Math.floor(e),r=AXEStringUtil.group(String(n),3,!0),i=r.join(","),s=String(e).replace(/^\d*(\.|$)/,"");return s=AXEStringUtil.fillStringTo(s,"0",t,!1),i+(t>0?"."+s:"")},AXEStringUtil.cashToNum=function(e){var t=e.split(",");return parseFloat(t.join(""))}})(),define("string_util",function(){});var AXEArrayUtil={};(function(){AXEArrayUtil.each=function(e,t){for(var n=0;n<e.length;n++){var r=t.call(e[n],n,e[n]);if(r===!1)break}},AXEArrayUtil.copyList=function(e){var t=[];for(var n=0;n<e.length;n++)typeof e[n]["clone"]=="function"?t[n]=e[n].clone():t[n]=e[n];return t},AXEArrayUtil.deepCopy=function(e,t,n){for(var r in t)if(t.hasOwnProperty(r))if(typeof e[r]=="number")try{n[r]=e[r].clone()}catch(i){n[r]=e[r]}else if(typeof e[r]=="function"){var s=e[r],o=s.call(e);try{n[r]=o.clone()}catch(i){n[r]=o}}else if(typeof e[r]=="object"){var u=e[r],a=t[r],f={};AXEArrayUtil.deepCopy(u,a,f),n[r]=f}},AXEArrayUtil.setValues=function(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s=AXEStringUtil.lineToCamel(i),o;typeof e[s]=="function"?(o=e[s].call(e),typeof o=="object"?AXEArrayUtil.setValues(e[s].call(e),t[i],n[i],r):typeof o=="boolean"||typeof o=="string"?e[s].call(e,t[i]):typeof o=="number"&&e[s].call(e,t[i]+(n[i]-t[i])*r)):(o=e[s],typeof o=="object"?AXEArrayUtil.setValues(e[i],t[i],n[i],r):typeof o=="boolean"||typeof o=="string"?e[s]=t[i]:typeof o=="number"&&(e[s]=t[i]+(n[i]-t[i])*r))}},AXEArrayUtil.flatList=function(e){var t=[];for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)t.push(e[n][r]);return t},AXEArrayUtil.shuffleList=function(e){var t=e.slice(),n=[];while(t.length>0){var r=Math.floor(t.length*Math.random()),i=t[r];n.push(i),t.splice(r,1)}return n}})(),define("array_util",["string_util"],function(){});var AXERunLoop={};(function(){AXERunLoop.timerScale=1,AXERunLoop.targets=[],AXERunLoop.timer=undefined,AXERunLoop.lastTS=0,AXERunLoop.enterFrame=function(){var e=null,t=AXEEnv.vendorJSProp(window,"requestAnimationFrame");return t==null?e=function(e){return window.setTimeout(e,1e3/60)}:e=function(e){return t.call(window,e)},e}(),AXERunLoop.clearAnimationFrame=function(){var e=AXEEnv.vendorJSProp(window,"cancelAnimationFrame");e==null&&(e=window.clearTimeout);var t=function(t){e.call(window,t)};return t}(),AXERunLoop.documentHidden=function(){var e=AXEEnv.vendorJSProp(document,"hidden");return typeof e=="undefined"&&(e=!1),e},AXERunLoop.active=AXERunLoop.documentHidden()===!1,AXERunLoop.onActivate=function(){if(AXERunLoop.active===!1){AXERunLoop.active=!0;for(var e=0;e<AXERunLoop.targets.length;e++){var t=AXERunLoop.targets[e],n=t.target;typeof n["onActivate"]=="function"&&n.onActivate()}AXERunLoop.timer!=undefined&&(AXERunLoop.clearAnimationFrame(AXERunLoop.timer),AXERunLoop.timer=undefined),AXERunLoop.timer=AXERunLoop.enterFrame(AXERunLoop.onFire)}},AXERunLoop.onDeactivate=function(){if(AXERunLoop.active===!0){AXERunLoop.active=!1;for(var e=0;e<AXERunLoop.targets.length;e++){var t=AXERunLoop.targets[e],n=t.target;typeof n["onDeactivate"]=="function"&&n.onDeactivate()}}},AXERunLoop.inited=!1,AXERunLoop.initialize=function(){if(AXERunLoop.inited===!1){AXERunLoop.inited=!0,window.addEventListener("blur",AXERunLoop.onDeactivate),window.addEventListener("focus",AXERunLoop.onActivate),window["onpageshow"]!=undefined&&window["onpagehide"]!=undefined&&(window.addEventListener("pageshow",AXERunLoop.onActivate),window.addEventListener("pagehide",AXERunLoop.onDeactivate));var e=AXEEnv.addVendorPrefix("visibilitychange");window.addEventListener(e,function(){AXERunLoop.documentHidden()?AXERunLoop.onDeactivate():AXERunLoop.onActivate()}),AXERunLoop.lastTS=(new Date).getTime(),AXERunLoop.active&&(AXERunLoop.timer=AXERunLoop.enterFrame(AXERunLoop.onFire)),AXERunLoop.targets=[]}},AXERunLoop.addToRunLoop=function(e,t){AXERunLoop.initialize();var n=!1;AXEArrayUtil.each(AXERunLoop.targets,function(r,i){return i["target"]==e?(isNaN(t)==0&&(i.minInterval=t),n=!0,!1):!0});if(n)return;var r={target:e,ts:(new Date).getTime()};isNaN(t)==0&&(r.minInterval=t,r.step=0),AXERunLoop.targets.unshift(r)},AXERunLoop.onFire=function(){var e=(new Date).getTime(),t=(e-AXERunLoop.lastTS)/1e3;for(var n=0;n<AXERunLoop.targets.length;n++){var r=AXERunLoop.targets[n],i=r.target,s=(e-r.ts)/1e3;if(r.hasOwnProperty("minInterval")){r.step+=t;if(r.step>=r.minInterval){var o=r.step;r.step=0,i.fire.call(i,s*AXERunLoop.timerScale,o*AXERunLoop.timerScale)}}else i.fire.call(i,s,t)}AXERunLoop.lastTS=e,AXERunLoop.timer=AXERunLoop.enterFrame(AXERunLoop.onFire)},AXERunLoop.removeFromRunLoop=function(e){for(var t=0;t<AXERunLoop.targets.length;t++)if(AXERunLoop.targets[t]["target"]==e){AXERunLoop.targets.splice(t,1);break}}})(),define("run_loop",["env","array_util"],function(){});var AXETouch=function(e,t,n,r){var i=this;i.x=e,i.y=t,i.stageX=n,i.stageY=r};(function(){AXETouch.prototype.constructor=AXETouch,AXETouch.prototype.x=0,AXETouch.prototype.y=0,AXETouch.prototype.stageX=0,AXETouch.prototype.stageY=0,AXETouch.prototype.clone=function(){var e=this,t=new AXETouch(e.x,e.y,e.stageX,e.stageY);return t}})(),define("touch",function(){});var AXETouchEvent=function(e,t){var n=this;n.touches=AXEArrayUtil.copyList(t),AXEEvent.prototype.constructor.call(n,e,!0)};(function(){AXETouchEvent.CLICK="click",AXETouchEvent.TOUCH_START="touch_start",AXETouchEvent.TOUCH_MOVE="touch_move",AXETouchEvent.TOUCH_END="touch_end",AXETouchEvent.SWIPE="swipe",AXETouchEvent.ROLL_OVER="roll_over",AXETouchEvent.ROLL_OUT="roll_out",AXETouchEvent.DOUBLE_TAP="double_tap",AXETouchEvent.prototype=new AXEEvent,AXETouchEvent.prototype.constructor=AXETouchEvent,AXETouchEvent.prototype.touches=null,AXETouchEvent.prototype.clone=function(){var e=this;return new AXETouchEvent(e.type,e.touches)}})(),define("touch_event",["event","touch","array_util"],function(){});var AXEVec2=function(e,t){var n=this;this.x=isNaN(e)?n.x:e,this.y=isNaN(t)?n.y:t};(function(){AXEVec2.prototype.constructor=AXEVec2,AXEVec2.prototype.x=0,AXEVec2.prototype.y=0,AXEVec2.prototype.isOrigin=function(){var e=this;return e.x==0&&e.y==0},AXEVec2.prototype.equalsTo=function(e){var t=this,n=!1;return e instanceof AXEVec2&&(n=t.x==e.x&&t.y==e.y),n},AXEVec2.prototype.radian=function(){var e=this,t=0;if(e.x==0)e.y>0?t=Math.PI/2:e.y<0?t=-1*Math.PI/2:e.y==0&&(t=0);else{t=Math.atan(e.y/e.x);if(e.y<=0&&e.x<0||e.y>=0&&e.x<0)t+=Math.PI}return t},AXEVec2.prototype.radian2PI=function(){var e=this,t=0;return e.x==0?e.y>0?t=Math.PI/2:e.y<0?t=Math.PI/2*3:e.y==0&&(t=0):(t=Math.atan(e.y/e.x),e.x<0&&e.y>0?t+=Math.PI:e.x<0&&e.y<0?t+=Math.PI:e.x>0&&e.y<0&&(t+=Math.PI*2)),t},AXEVec2.prototype.angle2PI=function(){var e=this;return e.radian2PI()*(180/Math.PI)},AXEVec2.prototype.angle=function(){var e=this;return e.radian()*(180/Math.PI)},AXEVec2.prototype.scale=function(e){var t=this;t.x=t.x*e,t.y=t.y*e},AXEVec2.prototype.scaleWith=function(e){var t=this;return new AXEVec2(t.x*e,t.y*e)},AXEVec2.prototype.scaleWithVec2=function(e){var t=this;t.x=t.x*e.x,t.y=t.y*e.y},AXEVec2.prototype.scaleWithVec2=function(e){var t=this;return new AXEVec2(t.x*e.x,t.y*e.y)},AXEVec2.prototype.multiply=function(e){var t=this;return t.x*e.x+t.y*e.y},AXEVec2.prototype.add=function(e){var t=this;return new AXEVec2(t.x+e.x,t.y+e.y)},AXEVec2.prototype.subtract=function(e){var t=this;return new AXEVec2(t.x-e.x,t.y-e.y)},AXEVec2.prototype.normalize=function(){var e=this,t=e.len();t>0&&(e.x=e.x/t,e.y=e.y/t)},AXEVec2.prototype.normalization=function(){var e=this,t=e.len(),n=0,r=0;return t>0&&(n=e.x/t,r=e.y/t),new AXEVec2(n,r)},AXEVec2.prototype.lerp=function(e,t){var n=this;return new AXEVec2(n.x*(1-e)+t.x*e,n.y*(1-e)+t.y*e)},AXEVec2.prototype.len=function(e){var t=this;if(isNaN(e)==0){var n=Math.pow(e,2),r=t.x*t.x/(t.x*t.x+t.y*t.y),i=t.y*t.y/(t.x*t.x+t.y*t.y);t.x=t.x>=0?Math.sqrt(n*r):-1*Math.sqrt(n*r),t.y=t.y>=0?Math.sqrt(n*i):-1*Math.sqrt(n*i)}return Math.sqrt(t.x*t.x+t.y*t.y)},AXEVec2.prototype.distance=function(e){var t=this;return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},AXEVec2.prototype.intersect=function(e){var t=this,n=null,r=Math.max(t.x,e.x),i=Math.min(t.y,e.y);return r<i&&(n=new AXEVec2(r,i)),n},AXEVec2.prototype.contains=function(e){var t=this;return e>=t.x&&e<=t.y},AXEVec2.prototype.isPerpendicular=function(e){var t=this;return t.x*e.x+t.y*e.y==0},AXEVec2.prototype.projection=function(e){var t=this,n=(t.x*e.x+t.y*e.y)/Math.pow(e.len(),2);return new AXEVec2(n*e.x,n*e.y)},AXEVec2.prototype.perpendicular=function(e){var t=this,n=t.projection(e);return new AXEVec2(t.x-n.x,t.y-n.y)},AXEVec2.prototype.clone=function(){var e=this;return new AXEVec2(e.x,e.y)},AXEVec2.prototype.toArray=function(){var e=this;return[e.x,e.y]},AXEVec2.prototype.toString=function(){var e=this;return"(x:"+e.x+",y:"+e.y+")"}})(),define("vec2",function(){});var AXEMat3=function(e,t,n,r,i,s){var o=this;o.a=isNaN(e)?o.a:parseFloat(e),o.b=isNaN(t)?o.b:parseFloat(t),o.c=isNaN(n)?o.c:parseFloat(n),o.d=isNaN(r)?o.d:parseFloat(r),o.tx=isNaN(i)?o.tx:parseFloat(i),o.ty=isNaN(s)?o.ty:parseFloat(s)};(function(){AXEMat3.rotateMat=function(e,t){var n=new AXEMat3;return n.a=Math.cos(e),n.b=Math.sin(e),n.c=-1*n.b,n.d=n.a,n.tx=t.x-n.a*t.x-n.c*t.y,n.ty=t.y-n.b*t.x-n.d*t.y,n},AXEMat3.mat3With3Points=function(e,t){var n=((t[0].x-t[1].x)*(e[1].y-e[2].y)-(t[1].x-t[2].x)*(e[0].y-e[1].y))/((e[0].x-e[1].x)*(e[1].y-e[2].y)-(e[1].x-e[2].x)*(e[0].y-e[1].y)),r=((t[0].x-t[1].x)*(e[0].x-e[2].x)-(t[0].x-t[2].x)*(e[0].x-e[1].x))/((e[0].x-e[2].x)*(e[0].y-e[1].y)-(e[0].x-e[1].x)*(e[0].y-e[2].y)),i=t[0].x-n*e[0].x-r*e[0].y,s=((t[0].y-t[1].y)*(e[1].y-e[2].y)-(t[1].y-t[2].y)*(e[0].y-e[1].y))/((e[0].x-e[1].x)*(e[1].y-e[2].y)-(e[1].x-e[2].x)*(e[0].y-e[1].y)),o=((t[0].y-t[1].y)*(e[0].x-e[2].x)-(t[0].y-t[2].y)*(e[0].x-e[1].x))/((e[0].x-e[2].x)*(e[0].y-e[1].y)-(e[0].x-e[1].x)*(e[0].y-e[2].y)),u=t[0].y-s*e[0].x-o*e[0].y;return new AXEMat3(n,s,r,o,i,u)},AXEMat3.prototype.a=1,AXEMat3.prototype.b=0,AXEMat3.prototype.c=0,AXEMat3.prototype.d=1,AXEMat3.prototype.tx=0,AXEMat3.prototype.ty=0,AXEMat3.prototype.scale=function(e,t){var n=this;t=arguments.length>=2?t:e,n.concat(new AXEMat3(e,0,0,t))},AXEMat3.prototype.rotate=function(e){var t=this,n=e*(Math.PI/180);t.concat(new AXEMat3(Math.cos(n),Math.sin(n),Math.sin(n)*-1,Math.cos(n)))},AXEMat3.prototype.move=function(e,t){var n=this;n.concat(new AXEMat3(1,0,0,1,e,t))},AXEMat3.prototype.concat=function(e){var t=this,n=t.concatWith(e);t.a=n.a,t.b=n.b,t.c=n.c,t.d=n.d,t.tx=n.tx,t.ty=n.ty},AXEMat3.prototype.concatWith=function(e){var t=this,n=t.a*e.a+t.b*e.c,r=t.a*e.b+t.b*e.d,i=t.c*e.a+t.d*e.c,s=t.c*e.b+t.d*e.d,o=t.tx*e.a+t.ty*e.c+e.tx,u=t.tx*e.b+t.ty*e.d+e.ty;return new AXEMat3(n,r,i,s,o,u)},AXEMat3.prototype.transformPoint=function(e){var t=this,n=new AXEVec2;return n.x=e.x*t.a+e.y*t.c+t.tx,n.y=e.x*t.b+e.y*t.d+t.ty,n},AXEMat3.prototype.inversePoint=function(e){var t=this,n=t.inversion();return n.transformPoint(e)},AXEMat3.prototype.determinant=function(){var e=this;return e.a*e.d-e.b*e.c},AXEMat3.prototype.inversion=function(){var e=this,t=e.clone();return t.inverse(),t},AXEMat3.prototype.inverse=function(){var e=this,t=e.determinant();if(t===0)e.a=0,e.b=0,e.c=0,e.d=0,e.tx=0,e.ty=0;else{var n=1/t,r=e.d*n,i=-1*e.b*n,s=-1*e.c*n,o=e.a*n,u=(e.c*e.ty-e.d*e.tx)*n,a=-1*(e.a*e.ty-e.b*e.tx)*n;e.a=r,e.b=i,e.c=s,e.d=o,e.tx=u,e.ty=a}},AXEMat3.prototype.adjoint=function(){var e=this,t=e.d,n=-1*e.b,r=-1*e.c,i=e.a,s=e.c*e.ty-e.d*e.tx,o=-1*(e.a*e.ty-e.b*e.tx);return new AXEMat3(t,n,r,i,s,o)},AXEMat3.prototype.equalsTo=function(e){var t=this,n=!1;return e!=null&&(n=t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty),n},AXEMat3.prototype.floatCount=function(e){var t=this,n=Math.pow(10,e),r=new AXEMat3;return r.a=Math.round(t.a*n)/n,r.b=Math.round(t.b*n)/n,r.c=Math.round(t.c*n)/n,r.d=Math.round(t.d*n)/n,r.tx=Math.round(t.tx*n)/n,r.ty=Math.round(t.ty*n)/n,r},AXEMat3.prototype.clone=function(){var e=this;return new AXEMat3(e.a,e.b,e.c,e.d,e.tx,e.ty)},AXEMat3.prototype.toArray=function(){var e=this;return[e.a,e.b,e.c,e.d,e.tx,e.ty]},AXEMat3.prototype.toString=function(){var e=this,t="a:"+e.a+"  "+"b:"+e.b;return t+=" c:"+e.c+"  "+"d:"+e.d,t+=" tx:"+e.tx+"  "+"ty:"+e.ty,t}})(),define("mat3",["vec2"],function(){});var AXEBGRepeatMode={REPEAT_ALL:"repeat_all",REPEAT_X:"repeat_x",REPEAT_Y:"repeat_y",NO_REPEAT:"no_repeat"};define("bg_repeat_mode",function(){});var AXEColor=function(e){var t=this;if(arguments.length>=1){var n=e.replace(/^#|^0x/,""),r=parseInt(n,16);if(n.length!=6&&n.length!=8||isNaN(r))throw new Error("Invalid color value: "+e);var i,s,o,u;n.length==6?(i=r>>16&255,s=r>>8&255,o=r&255,u=255):n.length==8&&(i=r>>24&255,s=r>>16&255,o=r>>8&255,u=r&255),t.r(i),t.g(s),t.b(o),t.a(u)}};(function(){AXEColor.merge2Colors=function(e,t,n){var r=new AXEColor;return r.r(Math.floor(e.r()*n+t.r()*(1-n))),r.g(Math.floor(e.g()*n+t.g()*(1-n))),r.b(Math.floor(e.b()*n+t.b()*(1-n))),r.a(Math.floor(e.a()*n+t.a()*(1-n))),r},AXEColor.colorWithString=function(e){return e=e.replace(/^#|^0x/,""),e.length<6&&(e=AXEStringUtil.fillStringTo(e,"0",6)),new AXEColor(e)},AXEColor.colorWithRGBA=function(e,t,n,r){var i=new AXEColor;return i.r(e),i.g(t),i.b(n),arguments.length<4&&(r=255),i.a(r),i},AXEColor.randomColor=function(e,t){e=isNaN(e)?0:e,t=isNaN(t)?16777215:t;var n=e>>16&255,r=e>>8&255,i=e&255,s=t>>16&255,o=t>>8&255,u=t&255,a=n+Math.floor(Math.random()*(s-n)),f=n+Math.floor(Math.random()*(o-r)),l=n+Math.floor(Math.random()*(u-i));return AXEColor.colorWithRGBA(a,f,l,255)},AXEColor.prototype=new AXEEventTarget,AXEColor.prototype.constructor=AXEColor,AXEColor.prototype.bit24String=null,AXEColor.prototype.bit24Updated=!1,AXEColor.prototype.to24BitString=function(e){var t=this;if(t.bit24String==null||t.bit24Updated===!1){var n=AXEStringUtil.fillStringTo(t.r().toString(16),"0",2).toUpperCase(),r=AXEStringUtil.fillStringTo(t.g().toString(16),"0",2).toUpperCase(),i=AXEStringUtil.fillStringTo(t.b().toString(16),"0",2).toUpperCase();e=arguments.length>=1?e:"#",t.bit24String=e+n+r+i,t.bit24Updated=!0}return t.bit24String},AXEColor.prototype.bit32String=null,AXEColor.prototype.bit32Updated=!1,AXEColor.prototype.to32BitString=function(e){var t=this;if(t.bit32String==null||t.bit32Updated===!1){var n=AXEStringUtil.fillStringTo(t.r().toString(16),"0",2).toUpperCase(),r=AXEStringUtil.fillStringTo(t.g().toString(16),"0",2).toUpperCase(),i=AXEStringUtil.fillStringTo(t.b().toString(16),"0",2).toUpperCase(),s=AXEStringUtil.fillStringTo(t.a().toString(16),"0",2).toUpperCase();e=arguments.length>=1?e:"#",t.bit32String=e+n+r+i+s,t.bit32Updated=!0}return t.bit32String},AXEColor.prototype.rgbString=null,AXEColor.prototype.rgbStringUpdated=!1,AXEColor.prototype.toRGBString=function(){var e=this;if(e.rgbString==null||e.rgbStringUpdated===!1){e.rgbStringUpdated=!0;var t=Math.round(e.r()),n=Math.round(e.g()),r=Math.round(e.b());e.rgbString="rgb("+t.toString(10)+","+n.toString(10)+","+r.toString()+")"}return e.rgbString},AXEColor.prototype.rgbaString=null,AXEColor.prototype.rgbaStringUpdated=!1,AXEColor.prototype.toRGBAString=function(){var e=this;if(e.rgbaString==null||e.rgbaStringUpdated===!1){e.rgbaStringUpdated=!0;var t=Math.round(e.r()),n=Math.round(e.g()),r=Math.round(e.b()),i=Math.round(e.a()/255*100)/100;e.rgbaString="rgba("+t.toString(10)+","+n.toString(10)+","+r.toString()+","+i.toString()+")"}return e.rgbaString},AXEColor.prototype._r=0,AXEColor.prototype.r=function(e){var t=this;return arguments.length>0&&e!=t._r&&(t._r=Math.round(e),t.bit24Updated=!1,t.bit32Updated=!1,t.rgbaStringUpdated=!1,t.rgbStringUpdated=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))),t._r},AXEColor.prototype._g=0,AXEColor.prototype.g=function(e){var t=this;return arguments.length>0&&e!=t._g&&(t._g=Math.round(e),t.bit24Updated=!1,t.bit32Updated=!1,t.rgbaStringUpdated=!1,t.rgbStringUpdated=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))),t._g},AXEColor.prototype._b=0,AXEColor.prototype.b=function(e){var t=this;return arguments.length>0&&e!=t._b&&(t._b=Math.round(e),t.bit24Updated=!1,t.bit32Updated=!1,t.rgbaStringUpdated=!1,t.rgbStringUpdated=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))),t._b},AXEColor.prototype._a=0,AXEColor.prototype.a=function(e){var t=this;return arguments.length>0&&e!=t._a&&(t._a=Math.round(e),t.bit24Updated=!1,t.bit32Updated=!1,t.rgbaStringUpdated=!1,t.rgbStringUpdated=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))),t._a},AXEColor.prototype.adjustSaturation=function(e){var t=this;if(e<1){var n=(t.r()+t.g()+t.b())/3,r=n+(t.r()-n)*e,i=n+(t.g()-n)*e,s=n+(t.b()-n)*e;t.r(Math.floor(r)),t.g(Math.floor(i)),t.b(Math.floor(s)),t.bit24Updated=!1,t.bit32Updated=!1,t.rgbaStringUpdated=!1,t.rgbStringUpdated=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))}},AXEColor.prototype.equalsTo=function(e){var t=this;return t.r()===e.r()&&t.g()===e.g()&&t.b()===e.b()&&t.a()===e.a()},AXEColor.prototype.clone=function(){var e=this;return AXEColor.colorWithRGBA(e.r(),e.g(),e.b(),e.a())},AXEColor.prototype.dealloc=function(){var e=this;e._a=0,e._r=0,e._g=0,e._b=0,e.bit24String=null,e.bit24Updated=!1,e.bit32String=null,e.bit32Updated=!1,e.rgbString=null,e.rgbStringUpdated=!1,e.rgbaString=null,e.rgbaStringUpdated=!1,AXEEventTarget.prototype.dealloc.call(e)}})(),define("color",["string_util","event","event_target"],function(){});var AXEBlendMode={};(function(){AXEBlendMode.SOURCE_OVER="source-over",AXEBlendMode.SOURCE_ATOP="source-atop",AXEBlendMode.SOURCE_IN="source-in",AXEBlendMode.SOURCE_OUT="source-out",AXEBlendMode.DESTINATION_OVER="destination-over",AXEBlendMode.DESTINATION_ATOP="destination-atop",AXEBlendMode.DESTINATION_IN="destination-in",AXEBlendMode.DESTINATION_OUT="destination-out",AXEBlendMode.LIGHTEN="lighten",AXEBlendMode.DARKEN="darken",AXEBlendMode.SCREEN="screen",AXEBlendMode.MULTIPLY="multiply",AXEBlendMode.OVERLAY="overlay",AXEBlendMode.XOR="xor",AXEBlendMode.COPY="copy",AXEBlendMode.COLOR_DODGE="color-dodge"})(),define("blend_mode",function(){});var AXERender=function(e,t){if(arguments.length>0){var n=this;n.stage=e,n.stage.render=n;var r=$("body");n.$txtFPS=$("div.fps"),n.$wrap=Boolean(t)&&t.length>0?t:r,n.$canvas=n.createCanvas(),n.$wrap.prepend(n.$canvas),n.resize(),n.configEvents(),AXERunLoop.addToRunLoop(n,isNaN(n.stage.frameRate())?n.minRenderInterval():1/n.stage.frameRate())}};(function(){AXERender.prototype.constructor=AXERender,AXERender.prototype.stage=null,AXERender.prototype.$wrap=null,AXERender.prototype.$txtFPS=null,AXERender.prototype.$canvas=null,AXERender.prototype.createCanvas=function(){return null},AXERender.prototype.boxWidth=0,AXERender.prototype.boxHeight=0,AXERender.prototype.resize=function(){var e=this,t,n;e.$wrap[0]==$("body")[0]?(t=$(window).width(),n=$(window).height()):(t=e.$wrap.width(),n=e.$wrap.height()),e.stage.minWidth()>0&&t<e.stage.minWidth()?(t=e.stage.minWidth(),e.$wrap.css("overflow-x")!="visible"&&e.$wrap.css("overflow-x","visible")):e.$wrap.css("overflow-x")!="hidden"&&e.$wrap.css("overflow-x","hidden"),e.stage.minHeight()>0&&n<e.stage.minHeight()?(n=e.stage.minHeight(),e.$wrap.css("overflow-y")!="visible"&&e.$wrap.css("overflow-y","visible")):e.$wrap.css("overflow-y")!="hidden"&&e.$wrap.css("overflow-y","hidden");if(t!=e.boxWidth||n!=e.boxHeight||e.stage.sizeChange)e.boxWidth=t,e.boxHeight=n,console.log([e.boxWidth,e.boxHeight]),e.stage.resize(t,n)},AXERender.prototype.onActivate=function(){var e=this;e.stage.active(!0)},AXERender.prototype.onDeactivate=function(){var e=this;e.stage.active(!1)},AXERender.prototype._minRenderInterval=.025,AXERender.prototype.minRenderInterval=function(e){var t=this;return isNaN(e)==0&&e!=t._minRenderInterval&&(t._minRenderInterval=e,t.currentInterval=e),t._minRenderInterval},AXERender.prototype.fire=function(e,t){var n=this;n.$txtFPS!=null&&n.$txtFPS.text(Math.round(1/(t/AXERunLoop.timerScale)*10)/10),n.resize(),n.stage.update(e,t),n.stage.needToRender()&&(n.render(),n.stage.needToRender(!1))},AXERender.prototype.render=function(){},AXERender.prototype.takePhoto=function(e,t,n){},AXERender.prototype.createTouchEvent=function(e){var t=this,n=[];for(var r=0;r<e.length;r++){var i=null;isNaN(e[r].offsetX)==0?i=new AXEVec2(e[r].offsetX*t.stage.ratio(),e[r].offsetY*t.stage.ratio()):i=new AXEVec2(e[r].pageX*t.stage.ratio(),e[r].pageY*t.stage.ratio()),i=t.stage.stageMatrix().inversePoint(i);var s=new AXETouch(i.x,i.y,i.x,i.y);n.push(s)}return n},AXERender.prototype.startEvent=null,AXERender.prototype.lastEvent=null,AXERender.prototype.lastClick=null,AXERender.prototype.configEvents=function(){var e=this,t,n,r;AXEEnv.os.isTouchDevice?(t="touchstart",n="touchmove",r="touchend"):(t="mousedown",n="mousemove",r="mouseup");var i=function(n){var r=null;n.originalEvent!=undefined&&(n=n.originalEvent),n.type==t?r=AXETouchEvent.TOUCH_START:r=AXETouchEvent.TOUCH_MOVE;var i=null;AXEEnv.os.isTouchDevice?i=n.touches:i=[n];var s=e.createTouchEvent(i),o=new AXETouchEvent(r,s);o.currentPhase=AXEEvent.CAPTURING_PHASE,o.type==AXETouchEvent.TOUCH_START?(e.startEvent=o,e.lastEvent=o):e.lastEvent=o,e.stage.triggerEvent(o),n.preventDefault()},s=function(){AXEEnv.os.isTouchDevice==0&&(e.$canvas.on("mousemove",function(t){var n=[t],r=e.createTouchEvent(n),i=new AXETouchEvent(AXETouchEvent.ROLL_OVER,r);i.currentPhase=AXEEvent.CAPTURING_PHASE,e.stage.triggerEvent(i),t.preventDefault()}),e.$canvas.on("mouseout",function(t){var n=new AXETouchEvent(AXETouchEvent.ROLL_OUT,[]);n.currentPhase=AXEEvent.CAPTURING_PHASE,e.stage.triggerEvent(n),t.preventDefault()}))};s(),e.$canvas.on(t,function(t){var o=document.activeElement;try{o.blur()}catch(u){console.log(u.message)}i(t),e.$canvas.off(n),e.$canvas.off(r),e.$canvas.on(n,i),e.$canvas.on(r,function(){var t=e.lastEvent.type==AXETouchEvent.TOUCH_START;if(t==0&&e.lastEvent.type==AXETouchEvent.TOUCH_MOVE){var i=new AXEVec2(e.startEvent.touches[0].x,e.startEvent.touches[0].y),o=new AXEVec2(e.lastEvent.touches[0].x,e.lastEvent.touches[0].y),u=i.distance(o);t=u<20}if(t){var a=new AXETouchEvent(AXETouchEvent.CLICK,e.lastEvent.touches);a.currentPhase=AXEEvent.CAPTURING_PHASE,e.stage.triggerEvent(a);if(e.lastClick!=null&&Math.abs(e.lastClick.timestamp-a.timestamp)<=300){var f=new AXETouchEvent(AXETouchEvent.DOUBLE_TAP,e.lastClick.touches.concat(a.touches));f.currentPhase=AXEEvent.CAPTURING_PHASE,e.lastClick=null,e.stage.triggerEvent(f)}else e.lastClick=a}if(e.lastEvent.type==AXETouchEvent.TOUCH_MOVE&&Math.abs(e.lastEvent.timestamp-e.startEvent.timestamp)<=500&&e.lastEvent.touches.length==e.startEvent.touches.length){var l=new AXEVec2(e.startEvent.touches[0].stageX,e.startEvent.touches[0].stageY),c=new AXEVec2(e.lastEvent.touches[0].stageX,e.lastEvent.touches[0].stageY);if(l.distance(c)>50){var h=new AXETouchEvent(AXETouchEvent.SWIPE,[e.startEvent.touches[0],e.lastEvent.touches[0]]);h.currentPhase=AXEEvent.CAPTURING_PHASE,e.stage.triggerEvent(h)}}var p=new AXETouchEvent(AXETouchEvent.TOUCH_END,[]);p.currentPhase=AXEEvent.CAPTURING_PHASE,e.stage.triggerEvent(p),e.$canvas.off(n),e.$canvas.off(r),s()})})},AXERender.prototype.layoutHTMLElement=function(e,t,n){e.css("outline","none"),e.css("display").toLowerCase()!="none"&&e.css("display","block"),e.width(t.width()),e.height(t.height()),n=Boolean(n),n==0&&e.css("opacity",t.stageAlpha()),e.css("overflow","hidden"),e.css("position","absolute"),e.css("left",0),e.css("top",0),e.css("transform-origin","0 0"),e.css("-moz-transform-origin","0 0"),e.css("-webkit-transform-origin","0 0"),e.css("-o-transform-origin","0 0"),e.css("-m-transform-origin","0 0");var r=t.stage();if(r!=null){var i=r.stageMatrix().concatWith(new AXEMat3(1/r.ratio(),0,0,1/r.ratio(),0,0)),s=t.matrixTo(r).concatWith(i);s=s.floatCount(5);var o="matrix("+s.toArray().join(",")+")";e.css("transform",o),e.css("-webkit-transform",o),e.css("-moz-transform",o),e.css("-o-transform",o),e.css("-m-transform",o)}}})(),define("render",["run_loop","env","touch_event","touch","vec2","mat3","bg_repeat_mode","color","blend_mode"],function(){});var AXEGradientColor=function(e){var t=this;typeof e=="string"&&(t.type=e)};(function(){var e=function(e,t){var n=this;n.offset=e,n.color=t.clone()};e.prototype.offset=0,e.prototype.color=null,e.prototype.clone=function(){var t=this;return new e(t.offset,t.color)},AXEGradientColor.LINEAR="linear",AXEGradientColor.RADIAL="radial",AXEGradientColor.prototype.constructor=AXEGradientColor,AXEGradientColor.prototype.type=null,AXEGradientColor.prototype.parseXML=function(e){var t=this;e.is("[use-percent]")?t.usePercent(e.attr("use-percent").toLowerCase()=="true"):t.usePercent(!1);var n=e.children("spot");n.each(function(e,n){var r=$(n);t.addColor(parseFloat(r.attr("offset")),AXEColor.colorWithString(r.attr("color")))})},AXEGradientColor.prototype._usePercent=!1,AXEGradientColor.prototype.usePercent=function(e){var t=this;return typeof e=="boolean"&&e!=t._usePercent&&(t._usePercent=!0),t._usePercent},AXEGradientColor.prototype.colors=null,AXEGradientColor.prototype.addColor=function(t,n){var r=this,i=new e(t,n);r.colors==null&&(r.colors=[]),r.colors.push(i)},AXEGradientColor.prototype.copyColors=function(e){var t=this,n=[];for(var r=0;r<t.colors.length;r++)n.push(t.colors[r].clone());e.colors=n},AXEGradientColor.prototype.clone=function(){return null},AXEGradientColor.prototype.dealloc=function(){var e=this;e.colors=null}})(),define("gradient_color",["color"],function(){});var AXERenderCanvas=function(e,t){var n=this;AXERender.prototype.constructor.call(n,e,t)};(function(){AXERenderCanvas.prototype=new AXERender,AXERenderCanvas.prototype.constructor=AXERenderCanvas,AXERenderCanvas.prototype.createCanvas=function(){var e=$("<canvas></canvas>");return e.css("position","absolute"),e.css("left",0),e.css("top",0),e},AXERenderCanvas.prototype.takePhoto=function(e,t,n){var r=this,i=$("<canvas></canvas>");i.attr("width",e.width()),i.attr("height",e.height());var s=e.clone();s.matrix(new AXEMat3),s.alpha(1);var o=i[0].getContext("2d");s.update(0,0),r.renderView(o,s,new AXEMat3,1);var u=i[0].toDataURL(typeof n=="string"?n:"image/png"),a=$("<img/>");a.on("load",function(){Boolean(t)&&t(e,a[0])}),a.attr("src",u)},AXERenderCanvas.prototype.htmlNeedAdd=null,AXERenderCanvas.prototype.htmlNeedRemove=null,AXERenderCanvas.prototype.removeAllHTML=!1,AXERenderCanvas.prototype.render=function(e,t){var n=this;n.htmlNeedAdd!=null?n.htmlNeedRemove=n.htmlNeedAdd.slice():n.htmlNeedRemove=[],n.htmlNeedAdd=[],n.removeAllHTML=!1,n.$canvas.css("left",0),n.$canvas.css("top",0);var r=0,i=0;if(n.stage.lockSize()){var s=$(window);r=s.scrollLeft(),i=s.scrollTop()}n.$canvas.width(n.stage.windowWidth+r),n.$canvas.height(n.stage.windowHeight+i),n.$canvas.attr("width",(n.stage.windowWidth+r)*n.stage.ratio()),n.$canvas.attr("height",(n.stage.windowHeight+i)*n.stage.ratio());var o=n.$canvas[0].getContext("2d");o.clearRect(0,0,n.stage.width(),n.stage.height()),n.renderView(o,n.stage,n.stage.stageMatrix());if(n.removeAllHTML==0)for(var u=0;u<n.htmlNeedAdd.length;u++){var a=n.htmlNeedAdd[u],f=!1;for(var l=0;l<n.htmlNeedRemove.length;l++)if(a==n.htmlNeedRemove[l]){n.htmlNeedRemove.splice(l,1),f=!0;break}f==0&&(a.css("pointer-events","auto"),n.$wrap.append(a))}else n.htmlNeedAdd=[];for(var c=0;c<n.htmlNeedRemove.length;c++)n.htmlNeedRemove[c].css("pointer-events","none"),n.htmlNeedRemove[c].detach()},AXERenderCanvas.prototype.createGradient=function(e,t,n,r,i){var s=null;i=isNaN(i)?0:i;if(r.type==AXEGradientColor.LINEAR)r.usePercent()?s=n.createLinearGradient(e*r.from.x+i,t*r.from.y+i,e*r.to.x+i,t*r.to.y+i):s=n.createLinearGradient(r.from.x+i,r.from.y+i,r.to.x+i,r.to.y+i);else if(r.type==AXEGradientColor.RADIAL)if(r.usePercent()){var o=Math.pow(Math.pow(e,2)+Math.pow(t,2),.5);s=n.createRadialGradient(e*r.inner.center.x+i,t*r.inner.center.y+i,o*r.inner.radius,e*r.outer.center.x+i,t*r.outer.center.y+i,o*r.outer.radius)}else s=n.createRadialGradient(r.inner.center.x+i,r.inner.center.y+i,r.inner.radius,r.outer.center.x+i,r.outer.center.y+i,r.outer.radius);if(r.colors!=null&&r.colors.length>0)for(var u=0;u<r.colors.length;u++){var a=r.colors[u];s.addColorStop(a.offset,a.color.toRGBAString())}return s},AXERenderCanvas.prototype.renderView=function(e,t,n,r,i){var s=this;t.renderEngine(s),i=typeof i=="boolean"?i:!1,i=i||t.animating(),n=n instanceof AXEMat3?n:new AXEMat3,r=isNaN(r)===!1?r:1,n=t.matrix().concatWith(n),r*=t.alpha();var o=t.visible()==0||r<=0||t.mask()!=null&&t.mask().commands().length<=0;if(o===!1){e.globalAlpha=r;var u=new AXEMat3;t.shakeX()!=0&&(u.tx=Math.random()*t.shakeX()*Math.pow(-1,Math.floor(Math.random()*2))),t.shakeY()!=0&&(u.ty=Math.random()*t.shakeY()*Math.pow(-1,Math.floor(Math.random()*2))),n=u.concatWith(n),e.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty);if(t.cachedImage!=null)e.drawImage(t.cachedImage,0,0,t.width(),t.height());else{var a=!1;t.blendMode()!=AXEBlendMode.SOURCE_OVER&&(a=!0,e.save(),e.globalCompositeOperation=t.blendMode()),t.mask()!=null&&(e.save(),s.drawPaths(e,t.mask()),e.clip());if(t.cornerRadius()>0){var f=t.cornerRadius();f=Math.min(f,Math.min(t.width()/2,t.height()/2)),f>0?(e.beginPath(),e.moveTo(f,0),e.arcTo(t.width(),0,t.width(),t.height(),f),e.arcTo(t.width(),t.height(),0,t.height(),f),e.arcTo(0,t.height(),0,0,f),e.arcTo(0,0,t.width(),0,f),e.closePath()):(e.beginPath(),e.rect(0,0,t.width(),t.height()))}else e.beginPath(),e.rect(0,0,t.width(),t.height());t.shadowColor()!=null&&(e.save(),e.shadowOffsetX=t.shadowOffsetX(),e.shadowOffsetY=t.shadowOffsetY(),e.shadowBlur=t.shadowBlur(),e.shadowColor=t.shadowColor().toRGBAString()),t.clip()&&(e.save(),e.clip());if(t.bgColor()!=null&&t.bgColor().a()>0){e.globalAlpha=r*(t.bgColor().a()/255);var l=t.bgColor().clone();l.adjustSaturation(t.bgSat()),e.fillStyle=l.to24BitString(),e.fill()}t.clip()&&e.restore(),t.borderColor()!=null&&t.borderSize()>0&&(e.globalAlpha=r*(t.borderColor().a()/255),e.lineWidth=t.borderSize(),e.strokeStyle=t.borderColor().to24BitString(),e.stroke()),t.clip()&&(e.save(),e.clip());if(t.gradientBGColor()!=null){var c=s.createGradient(t.width(),t.height(),e,t.gradientBGColor()),h=t.rect(t);e.fillStyle=c,e.fill()}t.bgImage()!=null&&t.bgImage().bitmap()instanceof HTMLImageElement&&(e.save(),s.drawBGImage(e,n,t),e.restore());var p=t.className;switch(p){case"AXEStage":case"AXEViewContainer":s.renderContainer(e,t,n,r,i);break;case"AXEQRCode":s.renderQRCode(e,t);break;case"AXEBitmap":s.renderBitmap(e,t);break;case"AXEMovie":s.renderMovie(e,t);break;case"AXEShape":s.renderShape(e,t,r);break;case"AXEText":s.renderText(e,t,r);break;default:}t.clip()&&e.restore(),t.shadowColor()!=null&&e.restore(),t.mask()!=null&&e.restore(),a&&e.restore()}t.$html()!=null&&(s.layoutHTMLElement(t.$html(),t),s.htmlNeedAdd.push(t.$html())),s.removeAllHTML=t.removeAllHTML()||s.removeAllHTML}t.afterRender()},AXERenderCanvas.prototype.drawBGImage=function(e,t,n){var r=n.bgImage(),i=r.bitmap();if(r.repeatMode()==AXEBGRepeatMode.NO_REPEAT){var s=r.scaleMode().call(n,r.width(),r.height(),n.width(),n.height(),r.alignMode());t=s.concatWith(t),e.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.drawImage(i,0,0,r.width(),r.height(),0,0,r.width(),r.height())}else{var o=0,u=0,a=0,f=0,l=0;if((r.alignMode()&AXEAlignMode.TOP)==AXEAlignMode.TOP)u=0;else if((r.alignMode()&AXEAlignMode.MIDDLE)==AXEAlignMode.MIDDLE){var c=n.height()+r.height()/2;u=c-Math.ceil(c/r.height())*r.height()}else(r.alignMode()&AXEAlignMode.BOTTOM)==AXEAlignMode.BOTTOM&&(u=n.height()-Math.ceil(n.height()/r.height())*r.height());if((r.alignMode()&AXEAlignMode.LEFT)==AXEAlignMode.LEFT)o=0;else if((r.alignMode()&AXEAlignMode.CENTER)==AXEAlignMode.CENTER){var h=n.width()+r.width()/2;o=h-Math.ceil(h/r.width())*r.width()}else(r.alignMode()&AXEAlignMode.RIGHT)==AXEAlignMode.RIGHT&&(o=n.width()-Math.ceil(n.width()/r.width())*r.width());if(r.repeatMode()==AXEBGRepeatMode.REPEAT_ALL||r.repeatMode()==AXEBGRepeatMode.REPEAT_X){var p=o;while(p<n.width())f+=1,p+=r.width()}if(r.repeatMode()==AXEBGRepeatMode.REPEAT_ALL||r.repeatMode()==AXEBGRepeatMode.REPEAT_Y){var d=u;while(d<n.height())l+=1,d+=r.height()}r.repeatMode()==AXEBGRepeatMode.REPEAT_X&&(a=f),r.repeatMode()==AXEBGRepeatMode.REPEAT_Y&&(f=1,a=l),r.repeatMode()==AXEBGRepeatMode.REPEAT_ALL&&(a=l*f);var v=o,m=u;for(var g=0;g<a;g++)g%f==0&&g!=0&&(v=o,m+=r.height()),e.drawImage(i,0,0,i.naturalWidth,i.naturalHeight,v,m,r.width(),r.height()),v+=r.width()}},AXERenderCanvas.prototype.renderContainer=function(e,t,n,r,i){var s=this,o=t.subViews();for(var u=0;u<o.length;u++){var a=o[u];a.onTheStage()&&(a.ghostShadow()!=null&&a.ghostShadow().overTargetView==0&&s.renderGhostShadow(e,a,n,r),s.renderView(e,a,n,r,i),a.ghostShadow()!=null&&a.ghostShadow().overTargetView&&s.renderGhostShadow(e,a,n,r))}},AXERenderCanvas.prototype.renderGhostShadow=function(e,t,n,r){var i=this,s=t.ghostShadow().shadows;if(s!=null&&s.length>0)for(var o=0;o<s.length;o++)i.renderView(e,s[o],n,r)},AXERenderCanvas.prototype.renderQRCode=function(e,t){e.fillStyle=t.color().to24BitString();var n=t.qrcode();if(n!=null){var r=t.width()/n.getModuleCount(),i=t.height()/n.getModuleCount();for(var s=0;s<n.getModuleCount();s++)for(var o=0;o<n.getModuleCount();o++)if(n.isDark(s,o)){var u=Math.ceil((o+1)*r)-Math.floor(o*r),a=Math.ceil((s+1)*r)-Math.floor(s*r);e.fillRect(Math.round(o*r),Math.round(s*i),u,a)}}},AXERenderCanvas.prototype.renderBitmap=function(e,t){var n=this,r=t.bitmap();if(r!=null&&t.showHTML()==0){var i=t.width(),s=t.height(),o,u;r instanceof HTMLImageElement?(o=r.naturalWidth,u=r.naturalHeight):r instanceof HTMLVideoElement?(o=r.videoWidth,u=r.videoHeight):(o=i,u=s),e.drawImage(r,0,0,o,u,0,0,i,s);if(t.sat()<1){var a=t.rect(n.stage),f=a.width*a.height,l=e.getImageData(a.x,a.y,a.width,a.height);for(var c=0;c<f*4;c+=4){var h=l.data[c],p=l.data[c+1],d=l.data[c+2],v=(h+p+d)/3;h=v+(h-v)*t.sat(),p=v+(p-v)*t.sat(),d=v+(d-v)*t.sat(),l.data[c]=h,l.data[c+1]=p,l.data[c+2]=d}e.putImageData(l,a.x,a.y)}}},AXERenderCanvas.prototype.renderMovie=function(e,t){if(t.framesCount()>0){var n=t.frames()[t.currentFrame()];if(n!=null){var r=t.width(),i=t.height();e.drawImage(n,0,0,n.naturalWidth,n.naturalHeight,0,0,r,i)}}},AXERenderCanvas.prototype.renderShape=function(e,t,n){var r=this;r.drawPaths(e,t.path()),t.fillColor()!=null?(e.globalAlpha=n*(t.fillColor().a()/255),e.fillStyle=t.fillColor().to24BitString(),e.fill()):t.gradientFillColor()!=null&&(e.fillStyle=r.createGradient(t.width(),t.height(),e,t.gradientFillColor()),e.fill()),t.strokeColor()!=null&&t.strokeSize()>0?(e.globalAlpha=n*(t.strokeColor().a()/255),e.lineWidth=t.strokeSize(),e.strokeStyle=t.strokeColor().to24BitString(),e.stroke()):t.gradientStrokeColor()!=null&&(e.lineWidth=t.strokeSize(),e.strokeStyle=r.createGradient(t.width(),t.height(),e,t.gradientStrokeColor()),e.stroke())},AXERenderCanvas.prototype.renderText=function(e,t,n){var r=this;(t.color()!=null||t.gradientColor()!=null)&&t.text().length>0&&(t.color()!=null?(e.globalAlpha=n*(t.color().a()/255),e.fillStyle=t.color().to24BitString()):t.gradientColor()!=null&&(e.fillStyle=r.createGradient(t.width(),t.height(),e,t.gradientColor())),e.font=t.textStyle(),t.wordWrap()?r.renderMultipleLineText(e,t):r.renderSingleLineText(e,t))},AXERenderCanvas.prototype.textSize=function(e){var t=document.createElement("canvas").getContext("2d");t.font=e.textStyle();var n=new AXEVec2(0,0),r=e.text();if(r.length>0&&e.width()>0){r=r.replace(/<br\/>/gi,"\n");var i=[],s=r.split(""),o="";while(s.length>0){var u=s.shift();if(u=="\n")i.push(o),o="";else{o+=u;var a=t.measureText(o).width;if(a>e.width()||s.length<=0)a>e.width()&&(o=o.slice(0,o.length-1),s.unshift(u)),i.push(o),o=""}}if(e.mergeLastLine()>0)for(var f=i.length-1;f>0;f--)i[f].length<=e.mergeLastLine()&&(i[f-1]+=i[f],i.splice(f,1));i.length>1?(n.x=e.width(),n.y=i.length*e.lineHeight()):(n.x=t.measureText(r).width,n.y=e.height())}return n},AXERenderCanvas.prototype.splitTextToLines=function(e){var t=this,n=$("<canvas></canvas>")[0].getContext("2d");n.font=e.textStyle();var r=e.text();r=r.replace(/<br\/>/gi,"\n");var i=[],s=r.split(""),o="";while(s.length>0){var u=s.shift();if(u=="\n")i.push(o),o="";else{o+=u;var a=n.measureText(o).width;if(a>e.width()||s.length<=0)a>e.width()&&(o=o.slice(0,o.length-1),s.unshift(u)),i.push(o),o=""}}if(e.mergeLastLine()>0)for(var f=i.length-1;f>0;f--)i[f].length<=e.mergeLastLine()&&(i[f-1]+=i[f],i.splice(f,1));return i},AXERenderCanvas.prototype.renderMultipleLineText=function(e,t){var n=this,r=t.text();if(r.length>0&&t.width()>0){var i=n.splitTextToLines(t);e.textBaseline="middle";var s=t.lineHeight()/2;for(var o=0;o<i.length;o++){var u=i[o],a=e.measureText(u),f=0;t.textAlign()==AXETextAlign.LEFT?f=0:t.textAlign()==AXETextAlign.CENTER?f=t.width()/2-a.width/2:t.textAlign()==AXETextAlign.RIGHT&&(f=t.width()-a.width),e.fillText(u,f,s),s+=t.lineHeight()}}},AXERenderCanvas.prototype.renderSingleLineText=function(e,t){var n=this;e.textBaseline=t.textVAlign();var r=t.clone(),i=e.measureText(t.text());if(t.shrink()&&t.width()>0)while(i.width>t.width()&&r.size()>1)r.size(r.size()-1),e.font=r.textStyle(),i=e.measureText(r.text());var s=0;t.textAlign()==AXETextAlign.LEFT?(s=0,t.autoSize()&&t.width(i.width)):t.textAlign()==AXETextAlign.CENTER?s=t.width()/2-i.width/2:t.textAlign()==AXETextAlign.RIGHT&&(s=t.width()-i.width);if(t.gradientColor()!=null)if(t.fillRepeat()){var o=s;for(var u=0;u<t.text().length;u++){var a=t.text().charAt(u),f=e.measureText(a);e.fillStyle=n.createGradient(f.width,t.height(),e,t.gradientColor(),o),e.fillText(a,o,t.height()/2),o+=f.width}}else e.fillStyle=n.createGradient(t.width(),t.height(),e,t.gradientColor()),e.fillText(t.text(),s,t.height()/2);else e.fillText(t.text(),s,t.height()/2);t.underline()&&e.fillRect(s,t.size()+4,i.width,2)},AXERenderCanvas.prototype.drawPaths=function(e,t){var n=t.commands();e.beginPath();for(var r=0;r<n.length;r++){var i=n[r],s=i.o,o=i.p;e[s].apply(e,o)}}})(),define("render_canvas",["render","mat3","vec2","gradient_color","bg_repeat_mode"],function(){});var AXEViewFactory=function(){};(function(){AXEViewFactory.ViewClasses={},AXEViewFactory.createViewByNodeName=function(e){var t=null;if(AXEViewFactory.ViewClasses.hasOwnProperty(e)){var n=AXEViewFactory.ViewClasses[e];t=new n}return t},AXEViewFactory.addClass=function(e,t){AXEViewFactory.ViewClasses[e]=t}})(),define("view_factory",function(){});var AXEAlignMode={};(function(){AXEAlignMode.CENTER=parseInt("1",2),AXEAlignMode.MIDDLE=parseInt("10",2),AXEAlignMode.TOP=parseInt("100",2),AXEAlignMode.BOTTOM=parseInt("1000",2),AXEAlignMode.LEFT=parseInt("10000",2),AXEAlignMode.RIGHT=parseInt("100000",2),AXEAlignMode.MIDDLE_LEFT=AXEAlignMode.MIDDLE|AXEAlignMode.LEFT,AXEAlignMode.MIDDLE_CENTER=AXEAlignMode.MIDDLE|AXEAlignMode.CENTER,AXEAlignMode.MIDDLE_RIGHT=AXEAlignMode.MIDDLE|AXEAlignMode.RIGHT,AXEAlignMode.TOP_LEFT=AXEAlignMode.TOP|AXEAlignMode.LEFT,AXEAlignMode.TOP_CENTER=AXEAlignMode.TOP|AXEAlignMode.CENTER,AXEAlignMode.TOP_RIGHT=AXEAlignMode.TOP|AXEAlignMode.RIGHT,AXEAlignMode.BOTTOM_LEFT=AXEAlignMode.BOTTOM|AXEAlignMode.LEFT,AXEAlignMode.BOTTOM_CENTER=AXEAlignMode.BOTTOM|AXEAlignMode.CENTER,AXEAlignMode.BOTTOM_RIGHT=AXEAlignMode.BOTTOM|AXEAlignMode.RIGHT})(),define("align_mode",function(){});var AXEScaleMode={};(function(){AXEScaleMode.align=function(e,t,n,r,i){var s=new AXEVec2;return(i&AXEAlignMode.LEFT)!=0?s.x=0:(i&AXEAlignMode.CENTER)!=0?s.x=Math.round(n/2-e/2):(i&AXEAlignMode.RIGHT)!=0&&(s.x=Math.round(n-e)),(i&AXEAlignMode.TOP)!=0?s.y=0:(i&AXEAlignMode.MIDDLE)!=0?s.y=Math.round(r/2-t/2):(i&AXEAlignMode.BOTTOM)!=0&&(s.y=Math.round(r-t)),s},AXEScaleMode.noScale=function(e,t,n,r,i){var s=new AXEMat3,o=AXEScaleMode.align(e,t,n,r,i);return s.tx=o.x,s.ty=o.y,s},AXEScaleMode.showAll=function(e,t,n,r,i){var s=Math.min(n/e,r/t),o=Math.round(e*s),u=Math.round(t*s),a=new AXEMat3;a.a=o/e,a.d=u/t;var f=AXEScaleMode.align(o,u,n,r,i);return a.tx=f.x,a.ty=f.y,a},AXEScaleMode.noBorder=function(e,t,n,r,i){var s=Math.max(n/e,r/t),o=Math.round(e*s),u=Math.round(t*s),a=new AXEMat3;a.a=o/e,a.d=u/t;var f=AXEScaleMode.align(o,u,n,r,i);return a.tx=f.x,a.ty=f.y,a},AXEScaleMode.extraFit=function(e,t,n,r){var i=new AXEMat3;return i.a=n/e,i.d=r/t,i},AXEScaleMode.fitWidth=function(e,t,n,r,i){var s=n/e,o=Math.round(e*s),u=Math.round(t*s),a=new AXEMat3;a.a=o/e,a.d=u/t;var f=AXEScaleMode.align(o,u,n,r,i);return a.tx=f.x,a.ty=f.y,a},AXEScaleMode.fitHeight=function(e,t,n,r,i){var s=r/t,o=Math.round(e*s),u=Math.round(t*s),a=new AXEMat3;a.a=o/e,a.d=u/t;var f=AXEScaleMode.align(o,u,n,r,i);return a.tx=f.x,a.ty=f.y,a}})(),define("scale_mode",["vec2","mat3","align_mode"],function(){});var AXELoaderConfig={};(function(){AXELoaderConfig.baseURI=function(){var e="./",t=$('meta[name="axe:base-uri"]');return t.length>0&&(e=t.attr("content")),e}(),AXELoaderConfig.crossOrigin=function(){var e=!1,t=$('meta[name="axe:cross-origin"]');return t.length>0&&(e=t.attr("content").toLowerCase()=="true"),e}(),AXELoaderConfig.loadThreadsCount=10,AXELoaderConfig.MAX_FAIL_COUNT=10,AXELoaderConfig.version=function(){var e=$('meta[name="axe:version"]'),t=null;return e.length>0&&(t=e.attr("content")),t}()})(),define("loader_config",function(){});var AXEProgressEvent=function(e){var t=this;t.percent=isNaN(e)?0:e,AXEEvent.prototype.constructor.call(t,AXEProgressEvent.PROGRESS,!1)};(function(){AXEProgressEvent.PROGRESS="progress",AXEProgressEvent.prototype=new AXEEvent,AXEProgressEvent.prototype.constructor=AXEProgressEvent,AXEProgressEvent.prototype.percent=0,AXEProgressEvent.prototype.clone=function(){var e=this;return new AXEProgressEvent(e.percent)}})(),define("progress_event",["event"],function(){});var AXEErrorEvent=function(e){var t=this;AXEEvent.prototype.constructor.call(t,AXEErrorEvent.ERROR,!1),t.error=e};(function(){AXEErrorEvent.ERROR="error",AXEErrorEvent.prototype=new AXEEvent,AXEErrorEvent.prototype.constructor=AXEErrorEvent,AXEErrorEvent.prototype.error=null,AXEErrorEvent.prototype.clone=function(){var e=this;return new AXEErrorEvent(e.error)}})(),define("error_event",["event"],function(){});var AXEURLUtil={};(function(){AXEURLUtil.origin=function(e){typeof e=="string"||(e=String(window.location.href));var t=/^http[s]?:\/\/[^\/]*\//,n=null;return t.test(e)&&(n=e.match(t)[0]),n},AXEURLUtil.domain=function(){var e=AXEURLUtil.origin(),t=e.replace(/^https?:\/\//,"");return t=t.replace(/\//,""),t},AXEURLUtil.relativePath=function(e){var t=/^http/gi;if(t.test(e))return e;var n=AXEURLUtil.cleanURL(),r=n.split("/");r.pop();var i=e.split("/");for(var s=0;s<i.length;s++){var o=i[s];o==".."?r.pop():o.length>0&&o!="."&&r.push(o)}return r.join("/")},AXEURLUtil.cleanURL=function(e){var t=String(window.location.href),n=t.split("#"),r=n[0];return Boolean(e)==0&&(r=r.split("?")[0]),r},AXEURLUtil.query=function(){var e=window.location.href,t=e.split("?"),n=null;return t.length>1&&(n=t[1].split("#")[0]),n},AXEURLUtil.hash=function(e){if(arguments.length>0){var t=AXEURLUtil.cleanURL(!0);window.location.href=t+"#"+encodeURIComponent(e)}var n=String(window.location.href),r=n.split("#"),i=null;return r.length>1&&(i=decodeURIComponent(r[1])),i},AXEURLUtil.decodeParams=function(e){var t=null;if(e!=null){t={};var n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=decodeURIComponent(i[1])}}return t},"",AXEURLUtil.encodeParams=function(e){var t="";if(e!=null){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=encodeURIComponent(e[r]);n.push(r+"="+i)}t=n.join("&")}return t},AXEURLUtil.splitURLs=function(e){var t=/\[\d+-\d+]/,n=e.match(t),r=[];if(n!=null){n=n[0];var i=n.slice(1,n.length-1).split("-"),s=i[0],o=i[1],u=Math.min(s.length,o.length);s=parseInt(s,10),o=parseInt(o,10);for(var a=s;a<=o;a++){var f=String(a);while(f.length<u)f="0"+f;var l=e.replace(t,f);r.push(l)}}else r=[e];return r},AXEURLUtil.assetLoadURL=function(e,t,n){var r=/^abs:/gi,i=/^https*/gi,s=/^\//gi,o=/^\.\//gi,u=null;r.test(t)?u=t.slice(4,t.length):i.test(t)||s.test(t)||o.test(t)?u=t:u=e+t;if(typeof n=="string"){var a=/\?\w+=[\d\w]+]/gi;a.test(u)==0&&(u=u+"?v="+n)}return u}})(),define("url_util",function(){});var Base64JS={toByteArray:function(e){},fromByteArray:function(e){}};(function(e){"use strict";function l(e){var t=e.charCodeAt(0);if(t===r||t===a)return 62;if(t===i||t===f)return 63;if(t<s)return-1;if(t<s+10)return t-s+26+26;if(t<u+26)return t-u;if(t<o+26)return t-o+26}function c(e){function c(e){u[f++]=e}var t,r,i,s,o,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.length;o=e.charAt(a-2)==="="?2:e.charAt(a-1)==="="?1:0,u=new n(e.length*3/4-o),i=o>0?e.length-4:e.length;var f=0;for(t=0,r=0;t<i;t+=4,r+=3)s=l(e.charAt(t))<<18|l(e.charAt(t+1))<<12|l(e.charAt(t+2))<<6|l(e.charAt(t+3)),c((s&16711680)>>16),c((s&65280)>>8),c(s&255);return o===2?(s=l(e.charAt(t))<<2|l(e.charAt(t+1))>>4,c(s&255)):o===1&&(s=l(e.charAt(t))<<10|l(e.charAt(t+1))<<4|l(e.charAt(t+2))>>2,c(s>>8&255),c(s&255)),u}function h(e){function u(e){return t.charAt(e)}function a(e){return u(e>>18&63)+u(e>>12&63)+u(e>>6&63)+u(e&63)}var n,r=e.length%3,i="",s,o;for(n=0,o=e.length-r;n<o;n+=3)s=(e[n]<<16)+(e[n+1]<<8)+e[n+2],i+=a(s);switch(r){case 1:s=e[e.length-1],i+=u(s>>2),i+=u(s<<4&63),i+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],i+=u(s>>10),i+=u(s>>4&63),i+=u(s<<2&63),i+="=";break;default:}return i}var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=typeof Uint8Array!="undefined"?Uint8Array:Array,r="+".charCodeAt(0),i="/".charCodeAt(0),s="0".charCodeAt(0),o="a".charCodeAt(0),u="A".charCodeAt(0),a="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=c,e.fromByteArray=h})(Base64JS),typeof define=="function"&&define.amd&&define("base64_js",[],function(){return Base64JS});var AXEAssetItem=function(e){var t=this;t.referenceCount=1;var n=/:(\d+)$/;if(n.test(e)){var r=e.match(n);t.sliceCount=parseInt(r[1],10);var i=e.split(":");i=i.slice(0,i.length-1),e=i.join(":")}else t.sliceCount=1;var s=/^(\w+)\|/;if(s.test(e)){var o=e.match(s);t.type=o[1],t.uri=e.slice(t.type.length+1)}else{var u=/\.(\w+)$/;if(u.test(e)){var a=e.match(u)[1];switch(a){case"jpg":case"jpeg":case"gif":case"png":t.type=AXEAssetType.IMAGE;break;case"json":t.type=AXEAssetType.JSON;break;case"html":case"htm":t.type=AXEAssetType.HTML;break;case"mp3":case"ogg":t.type=AXEAssetType.SOUND;break;case"mp4":t.type=AXEAssetType.VIDEO;break;case"xml":t.type=AXEAssetType.XML;break;case"css":t.type=AXEAssetType.CSS;break;default:t.type=AXEAssetType.TEXT}}else t.type=AXEAssetType.TEXT;t.uri=e}t.loadURL=AXEURLUtil.assetLoadURL(AXELoaderConfig.baseURI,t.uri,AXELoaderConfig.version),t.loaded=!1,t.asset=null,t.bytesLoaded=0,t.bytesTotal=0};(function(){AXEAssetItem.prototype=new AXEEventTarget,AXEAssetItem.prototype.constructor=AXEAssetItem,AXEAssetItem.prototype.referenceCount=0,AXEAssetItem.prototype.startLoadTS=0,AXEAssetItem.prototype.endLoadTS=0,AXEAssetItem.prototype.failCount=0,AXEAssetItem.prototype.uri=null,AXEAssetItem.prototype.loadURL=null,AXEAssetItem.prototype.type=null,AXEAssetItem.prototype.loading=!1,AXEAssetItem.prototype.loaded=!1,AXEAssetItem.prototype.sliceCount=1,AXEAssetItem.prototype.bytesLoaded=0,AXEAssetItem.prototype.bytesTotal=0,AXEAssetItem.prototype.loadPercent=function(){var e=this,t=0;return e.loaded?t=1:e.bytesTotal==0?t=0:t=e.bytesLoaded/e.bytesTotal,t},AXEAssetItem.prototype.asset=null,AXEAssetItem.prototype.load=function(){var e=this;e.loading=!0,e.startLoadTS=Date.now();var t=e[e.type+"Loader"];t.call(e)},AXEAssetItem.prototype.assetPaths=null,AXEAssetItem.prototype.assetImages=null,AXEAssetItem.prototype.multipleAssetLoaded=function(e,t){var n=this;n.assetPaths=e,n.assetImages=t,n.loaded=!0,n.loading=!1,n.endLoadTS=(new Date).getTime();var r=new AXEEvent(AXEEvent.LOAD);n.triggerEvent(r)},AXEAssetItem.prototype.assetLoaded=function(e){var t=this;t.asset=e,t.loaded=!0,t.loading=!1,t.endLoadTS=(new Date).getTime();var n=new AXEEvent(AXEEvent.LOAD);t.triggerEvent(n)},AXEAssetItem.prototype.assetLoadError=function(e,t){var n=this;n.failCount++;if(n.failCount<AXELoaderConfig.MAX_FAIL_COUNT){window.console.log("Fail to fetch data from url: "+n.loadURL+". status: "+e+" des: "+t+". Will retry in 150ms. Fail count:"+n.failCount);var r=setTimeout(function(){clearTimeout(r),n.load()},150)}else{var i="Fail to fetch data from url: "+n.loadURL+". status: "+e+" des: "+t+". Try count:"+n.failCount;window.console.log(i);var s=new Error(i);n.triggerEvent(new AXEErrorEvent(s))}},AXEAssetItem.prototype.loadWithXHR=function(e,t,n,r){var i=this;t=typeof t=="string"?t:"text",n=typeof n=="boolean"?n:!0,r=typeof r=="string"?r:"get",$.ajax({url:i.loadURL,dataType:t,async:!0,cache:n,type:r,success:function(t,n){n=="success"?e(t,n):i.assetLoadError(n,"Unknown Error.")},xhr:function(){var e=AXEEnv.nativeXHR();return e.onprogress=function(e){i.bytesTotal=e.total,i.bytesLoaded=e.loaded;var t=new AXEProgressEvent(i.loadPercent());i.triggerEvent(t)},e},error:function(e,t,n){i.assetLoadError(t,n)}})},AXEAssetItem.prototype.imageLoader=function(){var e=this,t=$("<img/>");AXELoaderConfig.crossDomain&&(t[0].crossOrigin="Anonymous"),t.width("auto").height("auto").css("display","inline-block"),t.on("load",function(){t.off(),t.removeAttr("style"),e.assetLoaded(t[0])}),t.on("error",function(){e.assetLoadError("error","Unknown error.")}),t.attr("src",e.loadURL)},AXEAssetItem.prototype.cssLoader=function(){var e=this,t=function(t){var n=/@font-face\s*\{[^\}]*\}/gi,r=t.match(n);if(r!=null){var i=/font-family:\s*["']*([\w\d\s\-]+)["']*/;for(var s=0;s<r.length;s++){var o=r[s],u=o.match(i),a=u[1],f=$("<div></div>");f.text("..."),f.css("font-family",a),f.css("font-size",0),f.width(0),f.height(0),$("body").prepend(f)}}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=e.loadURL,document.getElementsByTagName("head")[0].appendChild(l),e.assetLoaded(t)};e.loadWithXHR(t,"text",!0)},AXEAssetItem.prototype.textLoader=function(){var e=this,t=function(t){e.assetLoaded(t)};e.loadWithXHR(t,"text",!1)},AXEAssetItem.prototype.jsonLoader=function(){var e=this,t=function(t){e.assetLoaded(t)};e.loadWithXHR(t,"json",!1)},AXEAssetItem.prototype.htmlLoader=function(){var e=this,t=function(t){var n=$(t),r=n.children("div[pre-load]");r.length>0?e.assetLoaded(r):e.assetLoaded(n)};e.loadWithXHR(t,"html",!0)},AXEAssetItem.prototype.xmlLoader=function(){var e=this,t=function(t){e.assetLoaded($(t).children())};e.loadWithXHR(t,"xml",!0)},AXEAssetItem.prototype.videoLoader=function(){var e=this,t=function(t){var n=t.currentTarget,r=n.response,i=new DataView(r),s=new Uint8Array(r,0,i.byteLength),o=window.URL||window.webkitURL||window,u="data:video/mp4;base64,"+Base64JS.fromByteArray(s);e.assetLoaded(u)},n=AXEEnv.nativeXHR();n.responseType="arraybuffer",n.open("get",e.loadURL,!0),n.onload=t,n.onprogress=function(t){e.bytesTotal=t.total,e.bytesLoaded=t.loaded;var n=new AXEProgressEvent(e.loadPercent());e.triggerEvent(n)},n.onerror=function(t,n){e.assetLoadError(t,n)},n.send()},AXEAssetItem.prototype.soundLoader=function(){var e=this,t=function(t){var n=t.currentTarget,r=n.response,i=new DataView(r),s=new Uint8Array(r,0,i.byteLength),o=document.createElement("audio"),u=document.createElement("source");u.type="audio/mp3",u.src="data:audio/mp3;base64,"+Base64JS.fromByteArray(s),o.appendChild(u),e.assetLoaded(o)},n=AXEEnv.nativeXHR();n.responseType="arraybuffer",n.open("get",e.loadURL,!0),n.onload=t,n.onprogress=function(t){e.bytesTotal=t.total,e.bytesLoaded=t.loaded;var n=new AXEProgressEvent(e.loadPercent());e.triggerEvent(n)},n.onerror=function(t,n){e.assetLoadError(t,n)},n.send()},AXEAssetItem.prototype.axeLoader=function(){var e=this,t=function(t){var n=t.currentTarget,r=n.response,i=new DataView(r),s=0,o=[],u=[],a=[];while(s<i.byteLength){var f=i.getUint32(s,!1);s+=4;var l="";for(var c=0;c<f;c++){var h=i.getUint32(s,!1);s+=4,l+=String.fromCharCode(h)}var p=i.getUint32(s,!1);s+=4;var d=new Uint8Array(r,s,p);s+=p,o.push(l),a.push(d)}var v=0,m=window.URL||window.webkitURL||window,g=function(){if(v>=a.length)e.multipleAssetLoaded(o,u);else{var t=a[v],n=document.createElement("img");n.onload=function(e){u.push(n),v+=1,g()};try{n.src=m.createObjectURL(new Blob([t]))}catch(r){var i=o[v].substr(o[v].length-3,3).toLowerCase(),s;i=="jpg"||i=="jpeg"?s="data:image/jpeg;base64,":i=="png"?s="data:image/png;base64,":i=="gif"&&(s="data:image/gif;base64,"),n.src=s+Base64JS.fromByteArray(t)}}};g()},n=AXEEnv.nativeXHR();n.responseType="arraybuffer",n.open("get",e.loadURL,!0),n.onload=t,n.onprogress=function(t){e.bytesTotal=t.total,e.bytesLoaded=t.loaded;var n=new AXEProgressEvent(e.loadPercent());e.triggerEvent(n)},n.onerror=function(t,n){e.assetLoadError(t,n)},n.send()},AXEAssetItem.prototype.dealloc=function(){var e=this;e.asset=null,e.assetImages=null,e.assetPaths=null,AXEEventTarget.prototype.dealloc.call(e)}})(),define("asset_item",["env","loader_config","event_target","event","progress_event","error_event","url_util","base64_js"],function(){});var AXEAssetType={};(function(){AXEAssetType.IMAGE="image",AXEAssetType.TEXT="text",AXEAssetType.CSS="css",AXEAssetType.JSON="json",AXEAssetType.HTML="html",AXEAssetType.XML="xml",AXEAssetType.SOUND="sound",AXEAssetType.AXE="axe",AXEAssetType.VIDEO="video"})(),define("asset_type",function(){});var AXEAssetsLoader=function(e){var t=this;isNaN(e)==0&&(t._threadsCount=e)};(function(){AXEAssetsLoader._assets=function(){var e=null;if(window["AXE_VIEWS"]!=undefined){e={};var t=window.AXE_VIEWS;for(var n in t){var r=new AXEAssetItem;r.assetLoaded($(AXEStringUtil.parseXML(t[n])).children()),e[n]=r}}return e}(),AXEAssetsLoader.assets=function(){return AXEAssetsLoader._assets==null&&(AXEAssetsLoader._assets={}),AXEAssetsLoader._assets},AXEAssetsLoader.asset=function(e){var t=AXEAssetsLoader.assets(),n=null;return t.hasOwnProperty(e)&&(t[e].referenceCount+=1,n=t[e].asset),n},AXEAssetsLoader.releaseAssets=function(e){var t=AXEAssetsLoader.assets();for(var n=0;n<e.length;n++){var r=e[n],i=AXEURLUtil.splitURLs(r);for(var s=0;s<i.length;s++){var o=i[s];if(t.hasOwnProperty(o)){var u=t[o];u.referenceCount-=1,u.referenceCount<=0&&delete t[o]}}}},AXEAssetsLoader.releaseAll=function(){var e=AXEAssetsLoader.assets();for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n.referenceCount-=1,n.referenceCount<=0&&delete e[t]}},AXEAssetsLoader.clearAll=function(){AXEAssetsLoader._assets=null},AXEAssetsLoader.prototype=new AXEEventTarget,AXEAssetsLoader.prototype.constructor=AXEAssetsLoader,AXEAssetsLoader.prototype.assets=null,AXEAssetsLoader.prototype.loadAssets=function(e){var t=this;e=typeof e=="string"?[e]:e,t.assets=[];for(var n=0;n<e.length;n++){var r=e[n],i=AXEURLUtil.splitURLs(r);for(var s=0;s<i.length;s++){var o=new AXEAssetItem(i[s]);AXEAssetsLoader.asset(o.uri)==null?(o.addListener(AXEProgressEvent.PROGRESS,t,t.onAssetLoadProgress),o.addListener(AXEEvent.LOAD,t,t.onAssetLoaded),o.addListener(AXEErrorEvent.ERROR,t,t.onAssetLoadError),t.assets.push(o)):AXEAssetsLoader.assets()[o.uri].referenceCount+=1}}t.assets.length<=0?t.triggerEvent(new AXEEvent(AXEEvent.LOAD)):t.multipleThreadLoad()},AXEAssetsLoader.prototype._threadsCount=0,AXEAssetsLoader.prototype.threadsCount=function(){var e=this,t=e._threadsCount;if(isNaN(t)||t<1)t=AXELoaderConfig.loadThreadsCount;return t},AXEAssetsLoader.prototype.loadingItemCount=0,AXEAssetsLoader.prototype.multipleThreadLoad=function(){var e=this;if(e.loadingItemCount<e.threadsCount())for(var t=0;t<e.assets.length;t++){var n=e.assets[t];if(n.loaded===!1&&n.loading===!1){n.load(),e.loadingItemCount++;if(e.loadingItemCount>=e.threadsCount())break}}},AXEAssetsLoader.prototype.loadProgress=function(){var e=this,t=0,n=0;for(var r=0;r<e.assets.length;r++){var i=e.assets[r];t+=i.sliceCount,n+=i.loadPercent()*i.sliceCount}return n/t},AXEAssetsLoader.prototype.onAssetLoaded=function(e){var t=this,n=e.target;n.removeListener();if(n.type==AXEAssetType.AXE)for(var r=0;r<n.assetImages.length;r++){var i=n.assetPaths[r],s=n.assetImages[r],o=new AXEAssetItem;o.assetLoaded(s),AXEAssetsLoader.assets()[i]!=null?AXEAssetsLoader.assets()[i].referenceCount+=1:AXEAssetsLoader.assets()[i]=o}else AXEAssetsLoader.assets()[n.uri]!=null?AXEAssetsLoader.assets()[n.uri].referenceCount+=1:AXEAssetsLoader.assets()[n.uri]=n;t.onAssetLoadProgress(),t.loadingItemCount--,t.multipleThreadLoad();if(t.loadingItemCount<=0){var u=new AXEEvent(AXEEvent.LOAD);t.triggerEvent(u)}},AXEAssetsLoader.prototype.onAssetLoadProgress=function(){var e=this,t=e.loadProgress(),n=new AXEProgressEvent(t);e.triggerEvent(n)},AXEAssetsLoader.prototype.onAssetLoadError=function(e){var t=this,n=new AXEErrorEvent(e.error);t.triggerEvent(n)},AXEAssetsLoader.prototype.dealloc=function(){var e=this;e.assets!=null&&AXEArrayUtil.each(e.assets,function(e,t){t.dealloc(),t=null}),AXEEventTarget.prototype.dealloc.call(e)}})(),define("assets_loader",["array_util","asset_item","asset_type","loader_config","url_util","string_util","event_target","event","progress_event","error_event"],function(){});var AXEBGImage=function(){};(function(){AXEBGImage.prototype.constructor=AXEBGImage,AXEBGImage.prototype.updateProp=function(e){var t=this;e.is("[src]")&&t.bitmap(e.attr("src")),e.is("[width]")&&t.width(parseFloat(e.attr("width"))),e.is("[height]")&&t.height(parseFloat(e.attr("height")));if(e.is("[repeat]")){var n=AXEBGRepeatMode[e.attr("repeat").replace(/-/g,"_").toUpperCase()];t.repeatMode(n)}if(e.is("[align]")){var r=AXEAlignMode[e.attr("align").replace(/-/g,"_").toUpperCase()];t.alignMode(r)}if(e.is("[scale]")){var i=AXEStringUtil.lineToCamel(e.attr("scale").replace(/_/g,"-"));t.scaleMode(AXEScaleMode[i])}},AXEBGImage.prototype.needToRender=!1,AXEBGImage.prototype._width=0,AXEBGImage.prototype.width=function(e){var t=this;return isNaN(e)==0&&e!=t._width&&(t._width=e,t.needToRender=!0),t._width},AXEBGImage.prototype._height=0,AXEBGImage.prototype.height=function(e){var t=this;return isNaN(e)==0&&e!=t._height&&(t._height=e,t.needToRender=!0),t._height},AXEBGImage.prototype._bitmap=null,AXEBGImage.prototype.bitmap=function(e){var t=this;return typeof e=="string"?(t._bitmap=AXEAssetsLoader.asset(e),t.width(t._bitmap.naturalWidth),t.height(t._bitmap.naturalHeight),t.needToRender=!0):e instanceof HTMLImageElement&&(t._bitmap=e,t.width(t._bitmap.naturalWidth),t.height(t._bitmap.naturalHeight),t.needToRender=!0),t._bitmap},AXEBGImage.prototype._repeatMode=AXEBGRepeatMode.NO_REPEAT,AXEBGImage.prototype.repeatMode=function(e){var t=this;return typeof e=="string"&&e!=t._repeatMode&&(t._repeatMode=e,t.needToRender=!0),t._repeatMode},AXEBGImage.prototype._scaleMode=AXEScaleMode.noScale,AXEBGImage.prototype.scaleMode=function(e){var t=this;return typeof e=="function"&&e!=t._scaleMode&&(t._scaleMode=e,t.needToRender=!0),t._scaleMode},AXEBGImage.prototype._alignMode=AXEAlignMode.TOP_LEFT,AXEBGImage.prototype.alignMode=function(e){var t=this;return isNaN(e)==0&&e!=t._alignMode&&(t._alignMode=e,t.needToRender=!0),t._alignMode},AXEBGImage.prototype.clone=function(){var e=this,t=new AXEBGImage;return t._bitmap=e.bitmap(),t._scaleMode=e.scaleMode(),t._alignMode=e.alignMode(),t._repeatMode=e.repeatMode(),t._width=e.width(),t._height=e.height(),t},AXEBGImage.prototype.dealloc=function(){var e=this;e._bitmap=null}})(),define("bg_image",["bg_repeat_mode","align_mode","scale_mode","assets_loader"],function(){});var AXELine=function(e,t,n){if(arguments.length>0){var r=this;isNaN(e)||(r.A=e),isNaN(t)||(r.B=t),isNaN(n)||(r.C=n)}},AXESeg=function(e,t){var n=this;n._p1=e.clone(),n._p2=t.clone();var r=AXELine.lineWithTowPoints(n._p1,n._p2);AXELine.prototype.constructor.call(n,r.A,r.B,r.C)};(function(){AXELine.lineWithTowPoints=function(e,t){if(e.equalsTo(t)==0){var n=t.y-e.y,r=e.x-t.x,i=t.x*e.y-e.x*t.y,s=new AXELine(n,r,i);return s}throw new Error("Tow same points can not define one line.")},AXELine.prototype.constructor=AXELine,AXELine.prototype.A=0,AXELine.prototype.B=0,AXELine.prototype.C=0,AXELine.prototype.k=function(){var e=this,t=NaN;return e.B!=0&&(t=-1*(e.A/e.B)),t},AXELine.prototype.b=function(){var e=this,t=NaN;return e.B!=0&&(t=-1*(e.C/e.B)),t},AXELine.prototype.containPoint=function(e){var t=this;return Math.abs(t.A*e.x+t.B*e.y+t.C)<.001},AXELine.prototype.willCross=function(e){var t=this,n=t.k(),r=e.k(),i=isNaN(n)&&isNaN(r)||n==r;return i==0},AXELine.prototype.intersection=function(e){var t=this,n=null;if(t.willCross(e)){var r=(t.B*e.C-t.C*e.B)/(t.A*e.B-t.B*e.A),i=(t.A*e.C-t.C*e.A)/(t.B*e.A-t.A*e.B);n=new AXEVec2(r,i)}return n},AXESeg.prototype=new AXELine,AXESeg.prototype.constructor=AXESeg,AXESeg.prototype._p1=null,AXESeg.prototype.p1=function(){var e=this;return e._p1},AXESeg.prototype._p2=null,AXESeg.prototype.p2=function(){var e=this;return e._p2},AXESeg.prototype.containPoint=function(e){var t=this,n=AXELine.prototype.containPoint.call(t,e);if(n){var r=Math.min(t.p1().x,t.p2().x),i=Math.max(t.p1().x,t.p2().x),s=Math.min(t.p1().y,t.p2().y),o=Math.max(t.p1().y,t.p2().y);n=e.x>=r&&e.x<=i&&e.y>=s&&e.y<=o}return n},AXESeg.prototype.intersection=function(e){var t=this,n=AXELine.prototype.intersection.call(t,e);return n!=null&&(t.containPoint(n)==0||e.containPoint(n)==0)&&(n=null),n}})(),define("line",["vec2"],function(){});var AXERect=function(e,t,n,r){var i=this;i.x=isNaN(e)?i.x:e,i.y=isNaN(t)?i.y:t,i.width=isNaN(n)?i.width:n,i.height=isNaN(r)?i.height:r};(function(){AXERect.prototype.x=0,AXERect.prototype.y=0,AXERect.prototype.width=0,AXERect.prototype.height=0,AXERect.prototype.isEmpty=function(){var e=this;return e.width===0&&e.height===0},AXERect.prototype.left=function(e){var t=this;return arguments.length>0&&(t.x=e),t.x},AXERect.prototype.right=function(e){var t=this;return arguments.length>0&&(t.width=e-t.x),t.x+t.width},AXERect.prototype.top=function(e){var t=this;return arguments.length>0&&(t.y=e),t.y},AXERect.prototype.bottom=function(e){var t=this;return arguments.length>0&&(t.height=e-t.y),t.y+t.height},AXERect.prototype.topLeft=function(){var e=this;return new AXEVec2(e.x,e.y)},AXERect.prototype.topRight=function(){var e=this;return new AXEVec2(e.right(),e.top())},AXERect.prototype.bottomRight=function(){var e=this;return new AXEVec2(e.right(),e.bottom())},AXERect.prototype.bottomLeft=function(){var e=this;return new AXEVec2(e.left(),e.bottom())},AXERect.prototype.center=function(){var e=this;return new AXEVec2(e.x+e.width/2,e.y+e.height/2)},AXERect.prototype.equalsTo=function(e){var t=this;return t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},AXERect.prototype.containsVec2=function(e){var t=this;return e.x>=t.left()&&e.x<=t.right()&&e.y>=t.top()&&e.y<=t.bottom()},AXERect.prototype.containsRect=function(e){var t=this;return e.left()>=t.left()&&e.right()<=t.right()&&e.top()>=t.top()&&e.bottom()<=t.bottom()},AXERect.prototype.intersect=function(e){var t=this,n=t.topLeft(),r=t.bottomRight(),i=e.topLeft(),s=e.bottomRight(),o=new AXEVec2(Math.max(n.x,i.x),Math.max(n.y,i.y)),u=new AXEVec2(Math.min(r.x,s.x),Math.min(r.y,s.y)),a=new AXERect(0,0,0,0);return o.x<=u.x&&o.y<=u.y&&(a.x=o.x,a.y=o.y,a.width=u.x-o.x,a.height=u.y-o.y),a},AXERect.prototype.shrink=function(){var e=this;e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height)},AXERect.prototype.expand=function(){var e=this;e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height)},AXERect.prototype.crossPoints=function(e,t){var n=this,r=[],i=AXELine.lineWithTowPoints(e,t),s=AXELine.lineWithTowPoints(n.topLeft(),n.bottomLeft());r.push(s.intersection(i));var o=AXELine.lineWithTowPoints(n.topLeft(),n.topRight());r.push(o.intersection(i));var u=AXELine.lineWithTowPoints(n.topRight(),n.bottomRight());r.push(u.intersection(i));var a=AXELine.lineWithTowPoints(n.bottomLeft(),n.bottomRight());r.push(a.intersection(i));var f=[];for(var l=0;l<r.length;l++)r[l]!=null&&n.containsVec2(r[l])&&f.push(r[l]);return f},AXERect.prototype.clone=function(){var e=this;return new AXERect(e.x,e.y,e.width,e.height)},AXERect.prototype.toString=function(){var e=this;return"[x:"+e.x+",y:"+e.y+",width:"+e.width+",height:"+e.height+"]"}})(),define("rect",["vec2","line"],function(){});var AXEPath=function(){};(function(){AXEPath.prototype=new AXEEventTarget,AXEPath.prototype.constructor=AXEPath,AXEPath.prototype.rect=function(e){var t=this;t.rect4(e.x,e.y,e.width,e.height)},AXEPath.prototype.rect4=function(e,t,n,r){var i=this,s=[e,t,n,r];i.addCommand("R:"+s.join(","))},AXEPath.prototype.circle=function(e){var t=this,n=[e.center.x,e.center.y,e.radius,0,Math.PI*2];t.addCommand("A:"+n.join(","))},AXEPath.prototype.moveTo=function(e,t){var n=this,r=[e,t];n.addCommand("M:"+r.join(","))},AXEPath.prototype.lineTo=function(e,t){var n=this,r=[e,t];n.addCommand("L:"+r.join(","))},AXEPath.prototype.arcWithAngle=function(e,t,n,r,i,s){var o=this,u=[];for(var a=0;a<arguments.length;a++)u.push(arguments[a]);u.length<5?(u[3]=0,u[4]=Math.PI*2):(u[3]=r*(Math.PI/180),u[4]=i*(Math.PI/180)),o.addCommand("A:"+u.join(","))},AXEPath.prototype.ellipse=function(e,t,n,r,i,s,o,u){var a=this,f=[];for(var l=0;l<arguments.length;l++)f.push(arguments[l]);a.addCommand("E:"+f.join(","))},AXEPath.prototype.arc=function(e,t,n,r,i,s){var o=this,u=[];for(var a=0;a<arguments.length;a++)u.push(arguments[a]);u.length<5&&(u[3]=0,u[4]=Math.PI*2),o.addCommand("A:"+u.join(","))},AXEPath.prototype.arcTo=function(e,t,n,r,i){var s=this,o=[e,t,n,r,i];s.addCommand("AT:"+o.join(","))},AXEPath.prototype.bezierCurveTo=function(e,t,n,r,i,s){var o=this,u=[e,t,n,r,i,s];o.addCommand("BC:"+u.join(","))},AXEPath.prototype.closePath=function(){var e=this;e.addCommand("C")},AXEPath.prototype._commands=null,AXEPath.prototype.commands=function(){var e=this;return e._commands==null&&(e._commands=[]),e._commands},AXEPath.prototype.clearCommands=function(){var e=this;e._commands=[],e.triggerEvent(new AXEEvent(AXEEvent.CHANGE))},AXEPath.prototype.operationMap=function(e){var t=null;switch(e){case"M":t="moveTo";break;case"L":t="lineTo";break;case"A":t="arc";break;case"AA":t="arc";break;case"AT":t="arcTo";break;case"E":t="ellipse";break;case"R":t="rect";break;case"C":t="closePath";break;case"BC":t="bezierCurveTo"}return t},AXEPath.prototype.addCommand=function(e){var t=this,n=e.split("|");for(var r=0;r<n.length;r++){var i=n[r],s=i.split(":"),o=t.operationMap(s[0]);if(o!=null){var u=s.length>1?s[1].split(","):[];for(var a=0;a<u.length;a++){var f=parseFloat(u[a]);u[a]=isNaN(f)?u[a]:f,s[0]=="AA"&&(a==3||a==4)&&(u[a]=u[a]*(Math.PI/180)),(s[0]=="AA"||s[0]=="A")&&a==5&&typeof u[a]=="string"&&(u[a]=u[a]=="true")}var l={o:o,p:u};t.commands().push(l)}}n.length>0&&t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))},AXEPath.prototype.clone=function(){var e=this,t=new AXEPath;return t._commands=e.commands().slice(),t}})(),define("path",["event","event_target"],function(){});var AXEEasing={};(function(){var e=function(){};e.easeNone=function(e,t,n,r){return n*e/r+t},e.easeIn=function(e,t,n,r){return n*e/r+t},e.easeOut=function(e,t,n,r){return n*e/r+t},e.easeInOut=function(e,t,n,r){return n*e/r+t},AXEEasing.Linear=e;var t=function(){};t.easeIn=function(e,t,n,r){return n*(e/=r)*e*e+t},t.easeOut=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},t.easeInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},AXEEasing.Cubic=t;var n=function(){};n.easeIn=function(e,t,r,i){return r-n.easeOut(i-e,0,r,i)+t},n.easeOut=function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},n.easeInOut=function(e,t,r,i){return e<i/2?n.easeIn(e*2,0,r,i)*.5+t:n.easeOut(e*2-i,0,r,i)*.5+r*.5+t},AXEEasing.Bounce=n;var r=function(){};r.easeIn=function(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},r.easeOut=function(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},r.easeInOut=function(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},AXEEasing.Back=r;var i=function(){};i.easeIn=function(e,t,n,r,i,s){i=isNaN(i)?0:i,s=isNaN(s)?0:s;var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/Math.TWO_PI*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*Math.TWO_PI/s))+t)},i.easeOut=function(e,t,n,r,i,s){i=isNaN(i)?0:i,s=isNaN(s)?0:s;var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/Math.TWO_PI*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*Math.TWO_PI/s)+n+t)},i.easeInOut=function(e,t,n,r,i,s){i=isNaN(i)?0:i,s=isNaN(s)?0:s;var o;return e==0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/Math.TWO_PI*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*Math.TWO_PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*Math.TWO_PI/s)*.5+n+t)},AXEEasing.Elastic=i;var s=function(){};s.easeIn=function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},s.easeOut=function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},s.easeInOut=function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},AXEEasing.Circle=s;var o=function(){};o.easeIn=function(e,t,n,r){return e==0?t:n*Math.pow(2,10*(e/r-1))+t-n*.001},o.easeOut=function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},o.easeInOut=function(e,t,n,r){return e==0?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},AXEEasing.Expo=o;var u=function(){};u.easeIn=function(e,t,n,r){return n*(e/=r)*e+t},u.easeOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},u.easeInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},AXEEasing.Quad=u;var a=function(){};a.easeIn=function(e,t,n,r){return n*(e/=r)*e*e*e+t},a.easeOut=function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},a.easeInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},AXEEasing.Quart=a;var f=function(){};f.easeIn=function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},f.easeOut=function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},f.easeInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},AXEEasing.Quint=f;var l=function(){};l.easeIn=function(e,t,n,r){return-n*Math.cos(e/r*Math.HALF_PI)+n+t},l.easeOut=function(e,t,n,r){return n*Math.sin(e/r*Math.HALF_PI)+t},l.easeInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},AXEEasing.Sine=l,AXEEasing.segmentEase=function(e,t){e=[new AXEVec2(0,0)].concat(e).concat([new AXEVec2(1,1)]);var n=null,r=null;for(var i=0;i<e.length;i++)if(t<e[i].x){r=e[i],n=e[i-1];break}var s=r.subtract(n),o=Math.tan(s.radian()),u=r.y-o*r.x;return t*o+u}})(),define("easing",function(){});var AXEAnimate=function(e,t,n,r,i,s){var o=this;o.target=e,o.to=n,o.duration=t,o.easing=typeof r=="function"?r:AXEEasing.Linear.easeNone,o.onUpdate=i,o.onComplete=s};(function(){AXEAnimate.prototype.constructor=AXEAnimate,AXEAnimate.prototype.target=null,AXEAnimate.prototype.duration=0,AXEAnimate.prototype.easing=null,AXEAnimate.prototype.onUpdate=null,AXEAnimate.prototype.onComplete=null,AXEAnimate.prototype.to=null,AXEAnimate.prototype.from=null,AXEAnimate.prototype.startTimestamp=0,AXEAnimate.prototype.init=function(e){var t=this;t.startTimestamp=e,t.from={},AXEArrayUtil.deepCopy(t.target,t.to,t.from)},AXEAnimate.prototype.update=function(e){var t=this,n=Math.min(e-t.startTimestamp,t.duration),r=t.easing(n,0,1,t.duration);AXEArrayUtil.setValues(t.target,t.from,t.to,r),typeof t.onUpdate=="function"&&t.onUpdate(t.target,r);var i=e-t.startTimestamp>=t.duration;return i&&typeof t.onComplete=="function"&&t.onComplete(t.target),i},AXEAnimate.prototype.jumpToEnd=function(){var e=this;e.update(e.startTimestamp+e.duration)},AXEAnimate.prototype.dealloc=function(){var e=this;e.target=null,e.from=null,e.to=null,e.easing=null,e.onComplete=null,e.onUpdate=null,e.startTimestamp=0}})(),define("animate",["array_util","easing"],function(){});var AXEGhostShadow=function(e,t,n,r,i){var s=this;s.targetView=e,s.shadowView=t,s.overTargetView=typeof n=="boolean"?n:!1,isNaN(r)==0&&(s.shadowDuration=r),isNaN(i)==0&&(s.shadowInterval=i)};(function(){AXEGhostShadow.prototype.constructor=AXEGhostShadow,AXEGhostShadow.prototype.targetView=null,AXEGhostShadow.prototype.shadowView=null,AXEGhostShadow.prototype.overTargetView=!1,AXEGhostShadow.prototype.shadowInterval=.1,AXEGhostShadow.prototype.shadows=null,AXEGhostShadow.prototype.interval=0,AXEGhostShadow.prototype.shadowDuration=.5,AXEGhostShadow.prototype.onShadowEmpty=null,AXEGhostShadow.prototype.update=function(e,t){var n=this;if(n.shadows!=null)for(var r=0;r<n.shadows.length;r++)n.shadows[r].update(e,t);n.shadows!=null&&n.shadows.length<=0&&n.onShadowEmpty!=null&&n.onShadowEmpty(n),n.interval+=t;if(n.interval>n.shadowInterval){n.interval=0;var i=n.shadowView.clone();i.matrix(n.targetView.matrix().clone()),i.alpha(n.targetView.alpha()),n.shadows==null&&(n.shadows=[]),n.shadows.unshift(i),i.animate(n.shadowDuration,{alpha:0},null,null,function(){for(var e=n.shadows.length-1;e>=0;e--)if(n.shadows[e]==i){i.dealloc(),n.shadows.splice(e,1);break}})}},AXEGhostShadow.prototype.clone=function(){var e=this;return new AXEGhostShadow(e.targetView,e.shadowView,e.overTargetView,e.shadowInterval)},AXEGhostShadow.prototype.dealloc=function(){var e=this;if(e.shadows!=null){for(var t=0;t<e.shadows.length;t++)e.shadows[t].dealloc();e.shadows=null}}})(),define("ghost_shadow",function(){});var AXELinearGradientColor=function(e,t){var n=this;e!=null&&(n.from=e.clone()),t!=null&&(n.to=t.clone()),AXEGradientColor.prototype.constructor.call(n,AXEGradientColor.LINEAR)};(function(){AXELinearGradientColor.colorWithXML=function(e){var t=new AXELinearGradientColor;return t.parseXML(e),t},AXELinearGradientColor.prototype=new AXEGradientColor,AXELinearGradientColor.prototype.constructor=AXELinearGradientColor,AXELinearGradientColor.prototype.from=null,AXELinearGradientColor.prototype.to=null,AXELinearGradientColor.prototype.parseXML=function(e){var t=this,n=e.attr("from").split(",");t.from=new AXEVec2(parseFloat(n[0]),parseFloat(n[1]));var r=e.attr("to").split(",");t.to=new AXEVec2(parseFloat(r[0]),parseFloat(r[1])),AXEGradientColor.prototype.parseXML.call(t,e)},AXELinearGradientColor.prototype.clone=function(){var e=this,t=new AXELinearGradientColor;return e.copyColors(t),t.usePercent(e.usePercent()),t.from=e.from.clone(),t.to=e.to.clone(),t}})(),define("linear_gradient_color",["vec2","gradient_color"],function(){});var AXECircle=function(e,t,n){var r=this;e=arguments.length>0?e:0,t=arguments.length>1?t:0,r.center=new AXEVec2(e,t),r.radius=arguments.length>2?n:0};(function(){AXECircle.prototype.constructor=AXECircle,AXECircle.prototype.center=null,AXECircle.prototype.radius=0,AXECircle.prototype.isEqualTo=function(e){var t=this;return t.center.distance(e.center)==0&&t.radius==e.radius},AXECircle.prototype.containsAXEVec2=function(e){var t=this;return t.center.distance(e)>=t.radius},AXECircle.prototype.intersect=function(e){var t=this;return t.center.distance(e.center)>t.radius+e.radius},AXECircle.prototype.clone=function(){var e=this;return new AXECircle(e.center.x,e.center.y,e.radius)},AXECircle.prototype.toString=function(){var e=this;return"[x:"+e.center.x+", y:"+e.center.y+", r:"+e.radius+"]"}})(),define("circle",["vec2"],function(){});var AXERadialGradientColor=function(e,t){var n=this;e!=null&&(n.inner=e.clone()),t!=null&&(n.to=t.clone()),AXEGradientColor.prototype.constructor.call(n,AXEGradientColor.RADIAL)};(function(){AXERadialGradientColor.colorWithXML=function(e){var t=new AXERadialGradientColor;return t.parseXML(e),t},AXERadialGradientColor.prototype=new AXEGradientColor,AXERadialGradientColor.prototype.constructor=AXERadialGradientColor,AXERadialGradientColor.prototype.inner=null,AXERadialGradientColor.prototype.outer=null,AXERadialGradientColor.prototype.parseXML=function(e){var t=this,n=e.attr("inner").split(",");t.inner=new AXECircle(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]));var r=e.attr("outer").split(",");t.outer=new AXECircle(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2])),AXEGradientColor.prototype.parseXML.call(t,e)},AXERadialGradientColor.prototype.clone=function(){var e=this,t=new AXERadialGradientColor;return e.copyColors(t),t.usePercent(e.usePercent()),t.inner=e.inner.clone(),t.outer=e.outer.clone(),t}})(),define("radial_gradient_color",["circle","gradient_color"],function(){});var AXEView=function(e){if(arguments.length>0&&e instanceof AXEView)return e};(function(){AXEView.viewIndex=0,AXEView.issueViewName=function(e){var t=e+"_"+AXEView.viewIndex;return AXEView.viewIndex+=1,t},AXEView.prototype=new AXEEventTarget,AXEView.prototype.constructor=AXEView,AXEView.prototype.className="AXEView",AXEView.prototype.controller=null,AXEView.prototype.dealloc=function(){var e=this;e._ghostShadow=null,e._matrix=null,e._mask=null,e.remove(),e._bgColor!=null&&(e._bgColor.dealloc(),e._bgColor=null),e._gradientBGColor!=null&&(e._gradientBGColor.dealloc(),e._gradientBGColor=null),e._clickArea!=null&&(e._clickArea=null),AXEEventTarget.prototype.dealloc.call(e)},AXEView.prototype.clone=function(){var e=this,t=new AXEView;return e.copyProperties(t),t},AXEView.prototype.copyProperties=function(e){var t=this;e.viewData(t.viewData()),e.bgSat(t.bgSat()),e.name(t.name()),e.width(t.width()),e.height(t.height()),e.widthPercent(t.widthPercent()),e.heightPercent(t.heightPercent()),e.xPercent(t.xPercent()),e.yPercent(t.yPercent()),e.alpha(t.alpha()),e._initMat=t.initMat().clone(),e._initSize=t.initSize().clone(),e.cornerRadius(t.cornerRadius()),t._clickArea!=null&&e.clickArea(t._clickArea),e.scaleMode(t.scaleMode()),e.alignMode(t.alignMode()),t.bgColor()!=null&&e.bgColor(t.bgColor().clone()),t.borderColor()!=null&&e.borderColor(t.borderColor()),e.borderSize(t.borderSize()),t.shadowColor()!=null&&e.shadowColor(t.shadowColor().clone()),t._gradientBGColor!=null&&e.gradientBGColor(t._gradientBGColor.clone()),e.shadowOffsetX(t.shadowOffsetX()),e.shadowOffsetY(t.shadowOffsetY()),e.shadowBlur(t.shadowBlur()),e.blendMode(t.blendMode()),e.enabled(t.enabled()),e.visible(t.visible()),e.clip(t.clip()),t.mask()!=null&&e.mask(t.mask().clone()),e.matrix(t.matrix().clone()),t._ghostShadow!=null&&(e._ghostShadow=t._ghostShadow.clone()),t.$html()!=null&&e.$html(t.$html().clone()),t.link()!=null&&e.link(t.link()),e.window(t.window()),t.bgImage()!=null&&e.bgImage(t.bgImage().clone()),e.shakeX(t.shakeX()),e.shakeY(t.shakeY())},AXEView.prototype.updatePropsFromXML=function(e){var t=this;t.name(e.is("[name]")?e.attr("name"):null),e.is("[hide-html]")?t.removeAllHTML(e.attr("hide-html").toLowerCase()=="true"):t.removeAllHTML(!1);var n=e.children("html");if(n.length>0){var r=$("<div></div>").append(n.children().clone()).html();r=r.replace(/<br><\/br>/,"<br/>");if(typeof r=="string"&&r.length>0){var i=$(r);t.$html(i)}}var s=e.children("bg-img");if(s.length>0){var o=new AXEBGImage;o.updateProp(s),t.bgImage(o)}else t.bgImage(null);e.is("[shake]")?(t.shakeX(parseFloat(e.attr("shake"))),t.shakeY(parseFloat(e.attr("shake")))):(e.is("[shake-x]")?t.shakeX(parseFloat(e.attr("shake-x"))):t.shakeX(0),e.is("[shake-y]")?t.shakeY(parseFloat(e.attr("shake-y"))):t.shakeY(0));if(e.is("[link]"))t.link(e.attr("link")),e.is("[window]")&&t.window(e.attr("window"));else{var u=e.children("link");u.length>0&&(t.link(u.text()),u.is("[window]")&&t.window(u.attr("window")))}var a=/^([\d.]+)%$/;if(e.is("[width]")){var f=e.attr("width"),l=f.match(a);l!=null?t.widthPercent(parseFloat(l[1])/100):t.width(parseFloat(e.attr("width")))}if(e.is("[height]")){var c=e.attr("height"),h=c.match(a);h!=null?t.heightPercent(parseFloat(h[1])/100):t.height(parseFloat(e.attr("height")))}t._initSize=new AXEVec2(t.width(),t.height()),t.alpha(e.is("[alpha]")?parseFloat(e.attr("alpha")):1),e.is("[corner-radius]")&&t.cornerRadius(parseFloat(e.attr("corner-radius")));if(e.is("[click-area]")){var p=e.attr("click-area").split("|"),d=[];for(var v=0;v<p.length;v++){var m=p[v].split(","),g=new AXEVec2(parseFloat(m[0]),parseFloat(m[1]));d.push(g)}t.clickArea(d)}e.is("[bg-sat]")&&t.bgSat(parseFloat(e.attr("bg-sat")));if(e.children("bg-color").length>0){var y=e.children("bg-color"),b=y.attr("type");b==AXEGradientColor.LINEAR?t.gradientBGColor(AXELinearGradientColor.colorWithXML(y)):b==AXEGradientColor.RADIAL&&t.gradientBGColor(AXERadialGradientColor.colorWithXML(y))}e.is("[bg-color]")&&t.bgColor(AXEColor.colorWithString(e.attr("bg-color"))),e.is("[border-color]")&&t.borderColor(AXEColor.colorWithString(e.attr("border-color"))),e.is("[border-size]")&&t.borderSize(parseInt(e.attr("border-size"),10)),e.is("[shadow-color]")&&t.shadowColor(AXEColor.colorWithString(e.attr("shadow-color"))),e.is("[shadow-x]")&&t.shadowOffsetX(parseFloat(e.attr("shadow-x"))),e.is("[shadow-y]")&&t.shadowOffsetY(parseFloat(e.attr("shadow-y"))),e.is("[shadow-blur]")&&t.shadowBlur(parseInt(e.attr("shadow-blur"),10)),t.blendMode(e.is("[blend]")?e.attr("blend"):t._blendMode),t.enabled(e.is("[enabled]")?e.attr("enabled")=="true":!0),t.visible(e.is("[visible]")?String(e.attr("visible")).toLowerCase()==="true":!0),t.clip(e.is("[clip]")?String(e.attr("clip")).toLowerCase()==="true":!1);var w=e.children("mask");if(w.length>0){var E=new AXEPath;E.addCommand(w.text()),t.mask(E)}else t.mask(null);var S=new AXEMat3;if(e.is("[matrix]")){var x=e.attr("matrix").split(",");S.a=parseFloat(x[0]),S.b=parseFloat(x[1]),S.c=parseFloat(x[2]),S.d=parseFloat(x[3]),S.tx=parseFloat(x[4]),S.ty=parseFloat(x[5])}else{var T=e.is("[scale-x]")?parseFloat(e.attr("scale-x")):1,N=e.is("[scale-y]")?parseFloat(e.attr("scale-y")):1,C=e.is("[rotation]")?parseFloat(e.attr("rotation"))*(Math.PI/180):0,k=0;if(e.is("[x]")){var L=e.attr("x"),A=L.match(a);A!=null?t.xPercent(parseFloat(A[1])/100):k=parseFloat(L)}var O=0;if(e.is("[y]")){var M=e.attr("y"),_=M.match(a);_!=null?t.yPercent(parseFloat(_[1])/100):O=parseFloat(M)}S.a=T*Math.cos(C),S.b=Math.sin(C),S.c=-1*Math.sin(C),S.d=N*Math.cos(C),S.tx=k,S.ty=O}t.matrix(S),t._initMat=S.clone();if(e.is("[align]")){var D=AXEAlignMode[e.attr("align").replace(/-/g,"_").toUpperCase()];t.alignMode(D)}if(e.is("[scale]")){var P=AXEStringUtil.lineToCamel(e.attr("scale").replace(/_/g,"-"));t.scaleMode(AXEScaleMode[P])}t.controller!=null&&t.controller.onViewUpdateFromXML(e)},AXEView.prototype._initMat=null,AXEView.prototype.initMat=function(){var e=this;return e._initMat instanceof AXEMat3==0&&(e._initMat=new AXEMat3),e._initMat},AXEView.prototype._initSize=null,AXEView.prototype.initSize=function(){var e=this;return e._initSize instanceof AXEVec2==0&&(e._initSize=new AXEVec2),e._initSize},AXEView.prototype.cachedImage=null,AXEView.prototype._name=null,AXEView.prototype.name=function(e){var t=this;return typeof e=="string"&&(t._name=e),t._name==null&&(t._name=AXEView.issueViewName(t.className)),t._name},AXEView.prototype.pathname=function(){var e=this,t=[],n=e;do t.unshift(n.name()),n=n.parent();while(n!=null);return t.join(".")},AXEView.prototype._needToRender=!1,AXEView.prototype.needToRender=function(e){var t=this;arguments.length>0&&e!=t._needToRender&&(t._needToRender=Boolean(e),t._needToRender==0&&t.bgImage()!=null&&(t.bgImage().needToRender=!1));var n=t._needToRender;return t.bgImage()!=null&&(n=n||t.bgImage().needToRender),n},AXEView.prototype._renderEngine=null,AXEView.prototype.renderEngine=function(e){var t=this;return Boolean(e)&&e!=t._renderEngine&&(t._renderEngine=e),t._renderEngine},AXEView.prototype._scaleMode=null,AXEView.prototype.scaleMode=function(e){var t=this;return Boolean(e)>0&&t._scaleMode!=e&&(t._scaleMode=e,t.needResizeFlag=!0),t._scaleMode},AXEView.prototype._alignMode=AXEAlignMode.TOP_LEFT,AXEView.prototype.alignMode=function(e){var t=this;return Boolean(e)&&t._alignMode!=e&&(t._alignMode=e,t.needResizeFlag=!0),t._alignMode},AXEView.prototype._xPercent=0,AXEView.prototype.xPercent=function(e){var t=this;return isNaN(e)==0&&t._xPercent!=e&&(t._xPercent=e,t.needResizeFlag=!0),t._xPercent},AXEView.prototype._yPercent=0,AXEView.prototype.yPercent=function(e){var t=this;return isNaN(e)==0&&t._yPercent!=e&&(t._yPercent=e,t.needResizeFlag=!0),t._yPercent},AXEView.prototype.x=function(e){var t=this;if(isNaN(e)==0){var n=t.matrix().clone();n.tx=e,t.matrix(n)}return t.matrix().tx},AXEView.prototype.y=function(e){var t=this;if(isNaN(e)==0){var n=t.matrix().clone();n.ty=e,t.matrix(n)}return t.matrix().ty},AXEView.prototype.scaleX=function(e){var t=this,n=t.matrix(),r=t.radian(),i=n.a/Math.cos(r);return isNaN(e)==0&&(i=e,n=n.clone(),n.a=i*Math.cos(r),t.matrix(n)),i},AXEView.prototype.scaleY=function(e){var t=this,n=t.matrix(),r=t.radian(),i=n.d/Math.cos(r);return isNaN(e)==0&&(i=e,n=n.clone(),n.d=i*Math.cos(r),t.matrix(n)),i},AXEView.prototype.rotation=function(e){var t=this,n=0;if(isNaN(e)==0){n=e;var r=e*(Math.PI/180);t.radian(r)}else n=t.radian()*(180/Math.PI);return n},AXEView.prototype.radian=function(e){var t=this,n=t.matrix(),r=Math.asin(n.b);n.b>0&&n.a<0?r=Math.PI-r:n.b<0&&n.a<0?r=Math.PI-r:n.b<0&&n.a>0&&(r=Math.PI*2+r);if(isNaN(e)==0){var i=n.a/Math.cos(r);r=e,n=n.clone(),n.a=i*Math.cos(r),n.b=Math.sin(r),n.c=-1*n.b,n.d=n.a,t.matrix(n)}return r},AXEView.prototype._matrix=null,AXEView.prototype.matrix=function(e){var t=this;return Boolean(e)&&e!=t._matrix&&(t._matrix=e.clone(),t.triggerEvent(new AXEEvent(AXEEvent.MAT_CHANGE)),t.needToRender(!0)),t._matrix==null&&(t._matrix=new AXEMat3),t._matrix},AXEView.prototype.needResizeFlag=!1,AXEView.prototype._width=1,AXEView.prototype.width=function(e){var t=this;return isNaN(e)==0&&t._width!=e&&(t._width=e,t.needResizeFlag=!0,t.needToRender(!0)),t._width},AXEView.prototype._height=1,AXEView.prototype.height=function(e){var t=this;return isNaN(e)==0&&t._height!=e&&(t._height=e,t.needResizeFlag=!0,t.needToRender(!0)),t._height},AXEView.prototype._widthPercent=0,AXEView.prototype.widthPercent=function(e){var t=this;return isNaN(e)==0&&(e=Math.min(1,Math.max(0,e)),e!=t._widthPercent&&(t._widthPercent=e,t.needResizeFlag=!0)),t._widthPercent},AXEView.prototype._heightPercent=0,AXEView.prototype.heightPercent=function(e){var t=this;return isNaN(e)==0&&(e=Math.min(1,Math.max(0,e)),e!=t._heightPercent&&(t._heightPercent=e,t.needResizeFlag=!0)),t._heightPercent},AXEView.prototype._borderSize=0,AXEView.prototype.borderSize=function(e){var t=this;return isNaN(e)==0&&(t._borderSize=e,t.needToRender(!0)),t._borderSize},AXEView.prototype._borderColor=null,AXEView.prototype.borderColor=function(e){var t=this;return e instanceof AXEColor&&(t._borderColor=e.clone(),t.needToRender(!0)),t._borderColor},AXEView.prototype.stageAlpha=function(){var e=this,t=e.alpha(),n=e;while(n.parent()!=null)t=n.parent().alpha()*t,n=n.parent();return t},AXEView.prototype._alpha=1,AXEView.prototype.alpha=function(e){var t=this;return isNaN(e)==0&&t._alpha!=e&&(t._alpha=e,t.needToRender(!0)),t._alpha},AXEView.prototype._clickArea=null,AXEView.prototype.clickArea=function(e){var t=this;if(Boolean(e)&&e!=t._clickArea){var n=[];for(var r=0;r<e.length;r++)n.push(e[r].clone());t._clickArea=n}return t._clickArea},AXEView.prototype._cornerRadius=0,AXEView.prototype.cornerRadius=function(e){var t=this;return isNaN(e)==0&&e!=t._cornerRadius&&(t._cornerRadius=e,t.needToRender(!0)),t._cornerRadius},AXEView.prototype._bgSat=1,AXEView.prototype.bgSat=function(e){var t=this;return isNaN(e)==0&&(e=Math.max(0,Math.min(1,e)),e!=t._bgSat&&(t._bgSat=e,t.needToRender(!0))),t._bgSat},AXEView.prototype._bgImage=null,AXEView.prototype.bgImage=function(e){var t=this;return arguments.length>0&&e!=t._bgImage&&(t._bgImage!=null&&(t._bgImage.dealloc(),t._bgImage=null),t._bgImage=e,t.needToRender(!0)),t._bgImage},AXEView.prototype._bgColor=null,AXEView.prototype.bgColor=function(e){var t=this;return arguments.length>0&&(t._bgColor=Boolean(e)?e.clone():null,t.needToRender(!0)),t._bgColor},AXEView.prototype._gradientBGColor=null,AXEView.prototype.gradientBGColor=function(e){var t=this;return arguments.length>0&&(t._gradientBGColor=Boolean(e)?e.clone():null,t.needToRender(!0)),t._gradientBGColor},AXEView.prototype._clip=!1,AXEView.prototype.clip=function(e){var t=this;return arguments.length>0&&e!=t._clip&&(t._clip=e,t.needToRender(!0)),t._clip},AXEView.prototype.onViewMaskChange=function(){var e=this;e.needToRender(!0)},AXEView.prototype._mask=null,AXEView.prototype.mask=function(e){var t=this;return arguments.length>0&&e!=t._mask&&(t._mask!=null&&t._mask.dealloc(),e!=null?(t._mask=e.clone(),t._mask.addListener(AXEEvent.CHANGE,t,t.onViewMaskChange)):t._mask=null,t.needToRender(!0)),t._mask},AXEView.prototype._shadowOffsetX=0,AXEView.prototype.shadowOffsetX=function(e){var t=this;return isNaN(e)===!1&&parseFloat(e)!=t._shadowOffsetX&&(t._shadowOffsetX=parseFloat(e),t.needToRender(!0)),t._shadowOffsetX},AXEView.prototype._shadowOffsetY=0,AXEView.prototype.shadowOffsetY=function(e){var t=this;return isNaN(e)===!1&&parseFloat(e)!=t._shadowOffsetY&&(t._shadowOffsetY=parseFloat(e),t.needToRender(!0)),t._shadowOffsetY},AXEView.prototype._shadowColor=null,AXEView.prototype.shadowColor=function(e){var t=this;if(arguments.length>0)if(Boolean(e)){if(t._shadowColor==null||t._shadowColor.equalsTo(e)==0)t._shadowColor!=null&&t._shadowColor.dealloc(),t._shadowColor=e.clone(),t.needToRender(!0)}else t._shadowColor!=null&&(t._shadowColor.dealloc(),t._shadowColor=null,t.needToRender(!0));return t._shadowColor},AXEView.prototype._shadowBlur=0,AXEView.prototype.shadowBlur=function(e){var t=this;return isNaN(e)==0&&e!=t._shadowBlur&&(t._shadowBlur=e,t.needToRender(!0)),t._shadowBlur},AXEView.prototype._blendMode="source-over",AXEView.prototype.blendMode=function(e){var t=this;return typeof e=="string"&&e!=t._blendMode&&(t._blendMode=e,t.needToRender(!0)),t._blendMode},AXEView.prototype._ghostShadow=null,AXEView.prototype.ghostShadow=function(){var e=this;return e._ghostShadow},AXEView.prototype.setGhostShadow=function(e,t,n,r){var i=this;i.clearGhostShadow(),i._ghostShadow=new AXEGhostShadow(i,e,t,n,r),i.needToRender(!0)},AXEView.prototype.clearGhostShadow=function(){var e=this;e._ghostShadow!=null&&(e._ghostShadow.dealloc(),e._ghostShadow=null)},AXEView.prototype._visible=!0,AXEView.prototype.visible=function(e){var t=this;return typeof e=="boolean"&&e!=t._visible&&(t._onTheStage=-1,t._visible=e,t.resetEvents(),t.needToRender(!0)),t._visible},AXEView.prototype._parent=null,AXEView.prototype.parent=function(e){var t=this;return arguments.length>0&&e!=t._parent&&(t._parent=e),t._parent},AXEView.prototype.remove=function(){var e=this;e.parent()!=null&&e.parent().removeSubView(e)},AXEView.prototype._enabled=!0,AXEView.prototype.enabled=function(e){var t=this;return typeof e=="boolean"&&e!=t._enabled&&(t._enabled=e,t.resetEvents()),t._enabled},AXEView.prototype.matrixTo=function(e){var t=this,n=null;if(arguments.length>0&&e!=t){var r=t,i=new AXEMat3;while(r.parent()!=null){i=i.concatWith(r.matrix()),r=r.parent();if(r==e)return i}var s=e,o=new AXEMat3;while(s.parent()!=null)o=o.concatWith(s.matrix()),s=s.parent();n=i.concatWith(o.inversion())}else n=new AXEMat3;return n},AXEView.prototype._onTheStage=-1,AXEView.prototype.onTheStage=function(){var e=this;if(e._onTheStage==-1){var t=!1;if(e.visible()){var n=e.stage();if(n!=null){var r=n.rect(),i=e.rect(n);r.intersect(i).isEmpty()==0&&(t=!0)}}e._onTheStage=t?1:0}return e._onTheStage==1},AXEView.prototype.rect=function(e){var t=this,n=new AXEVec2(0,0),r=new AXEVec2(t.width(),0),i=new AXEVec2(0,t.height()),s=new AXEVec2(t.width(),t.height()),o=arguments.length>0?t.matrixTo(e):t.matrixTo(),u=null;if(o!=null){var a=o.transformPoint(n),f=o.transformPoint(r),l=o.transformPoint(i),c=o.transformPoint(s),h=Math.min(a.x,f.x,l.x,c.x),p=Math.max(a.x,f.x,l.x,c.x),d=Math.min(a.y,f.y,l.y,c.y),v=Math.max(a.y,f.y,l.y,c.y);u=new AXERect(h,d,p-h,v-d)}return u},AXEView.prototype.canTrigger=function(e){var t=this,n;if(t.clickArea()==null){var r=t.rect();n=r.containsVec2(e)}else{var i=t.clickArea();n=!1;for(var s=0;s<i.length;s++){var o=(s+1)%i.length;i[s].y>e.y!=i[o].y>e.y&&e.x<=(i[o].x-i[s].x)*(e.y-i[s].y)/(i[o].y-i[s].y)+i[s].x&&(n=!n)}}return n},AXEView.prototype.convertTouches=function(e,t){var n=this,r=[],i=t.matrixTo(n);for(var s=0;s<e.length;s++){var o=new AXEVec2(e[s].x,e[s].y);o=i.transformPoint(o);var u=new AXETouch(o.x,o.y,e[s].stageX,e[s].stageY);r.push(u)}return r},AXEView.prototype.spreadToTop=function(e){var t=this;if(t.parent()!=null){var n=e.clone();n.target=e.target,n.currentPhase=AXEEvent.BUBBLING_PHASE,e instanceof AXETouchEvent&&(n.touches=t.parent().convertTouches(e.touches,t)),t.parent().triggerEvent(n)}},AXEView.prototype.lastEvent=null,AXEView.prototype.startEvent=null,AXEView.prototype.lastClickEvent=null,AXEView.prototype.isRolling=!1,AXEView.prototype.triggerEvent=function(e){var t=this;if(e instanceof AXETouchEvent&&e.currentPhase==AXEEvent.CAPTURING_PHASE)if(t.enabled()&&t.visible())if(e.type==AXETouchEvent.ROLL_OVER){if(t.canTrigger(new AXEVec2(e.touches[0].x,e.touches[0].y)))t.isRolling==0?(t.isRolling=!0,AXEEventTarget.prototype.triggerEvent.call(t,e)):t.spreadToDeep(e);else if(t.isRolling){t.isRolling=!1;var n=new AXETouchEvent(AXETouchEvent.ROLL_OUT,[]);n.currentPhase=AXEEvent.CAPTURING_PHASE,AXEEventTarget.prototype.triggerEvent.call(t,n)}e.cancel=!0}else e.type==AXETouchEvent.ROLL_OUT?(t.isRolling&&AXEEventTarget.prototype.triggerEvent.call(t,e),e.cancel=!0):e.type==AXETouchEvent.TOUCH_START?t.canTrigger(new AXEVec2(e.touches[0].x,e.touches[0].y))?(t.lastEvent=e,t.startEvent=t.lastEvent,AXEEventTarget.prototype.triggerEvent.call(t,e)):e.cancel=!0:e.type==AXETouchEvent.TOUCH_MOVE?t.lastEvent!=null?(t.lastEvent=e,AXEEventTarget.prototype.triggerEvent.call(t,e)):e.cancel=!0:e.type==AXETouchEvent.TOUCH_END?t.lastEvent!=null?(t.lastEvent=null,t.startEvent=null,AXEEventTarget.prototype.triggerEvent.call(t,e)):e.cancel=!0:e.type==AXETouchEvent.CLICK?t.lastEvent!=null?(t.lastClickEvent=e,AXEEventTarget.prototype.triggerEvent.call(t,e)):e.cancel=!0:e.type==AXETouchEvent.SWIPE?t.lastEvent!=null&&t.lastEvent.type==AXETouchEvent.TOUCH_MOVE?AXEEventTarget.prototype.triggerEvent.call(t,e):e.cancel=!0:e.type==AXETouchEvent.DOUBLE_TAP&&(t.lastClickEvent!=null&&Math.abs(t.lastClickEvent.timestamp-e.timestamp)<=300?AXEEventTarget.prototype.triggerEvent.call(t,e):e.cancel=!0);else e.cancel=!0;else{if(e.type==AXETouchEvent.CLICK&&t.link()!=null&&t.link().length>0)var r=setTimeout(function(){clearTimeout(r),AXEEnv.os.wechat||t.window()=="_self"?window.location.href=t.link():window.open(t.link(),t.window())},100);AXEEventTarget.prototype.triggerEvent.call(t,e)}},AXEView.prototype.animateChangeFlag=!1,AXEView.prototype.objAnimate=null,AXEView.prototype._animating=!1,AXEView.prototype.animating=function(e){var t=this;typeof e=="boolean"&&(t._animating=e);var n=t._animating;return n===!1&&t.parent()!=null&&(n=t.parent().animating()),n},AXEView.prototype.animate=function(e,t,n,r,i){var s=this;s.objAnimate=new AXEAnimate(s,e,t,n,r,i),s.animateChangeFlag=!0,s.needToRender(!0)},AXEView.prototype.stopAnimation=function(e){var t=this;t.objAnimate!=null&&(e=typeof e=="boolean"?e:!1,t._animating&&e&&t.objAnimate.jumpToEnd(),t.animating(!1),t.animateChangeFlag=!1,t.objAnimate=null,t.onAnimationStop())},AXEView.prototype.onAnimationStart=function(){var e=this;e.controller!=null&&e.controller.onViewStartAnimate()},AXEView.prototype.onAnimationStop=function(){var e=this;e.controller!=null&&e.controller.onViewEndAnimate()},AXEView.prototype.onAdd=function(e){var t=this;t.controller!=null&&t.controller.onViewAdded(e);var n=new AXEEvent(AXEEvent.ADDED);t.triggerEvent(n)},AXEView.prototype.resetEvents=function(){var e=this;e.isRolling=!1,e.lastEvent=null,e.startEvent=null,e.lastClickEvent=null},AXEView.prototype.afterRender=function(){var e=this;e.controller!=null&&e.controller.onViewAfterRender()},AXEView.prototype.removeFromStage=function(){var e=this;e.resetEvents(),e.controller!=null&&e.controller.onViewRemoveFromStage();var t=new AXEEvent(AXEEvent.REMOVE_FROM_STAGE);e.triggerEvent(t)},AXEView.prototype.onRemoveFromSuperView=function(e){var t=this;t.resetEvents(),t.controller!=null&&t.controller.onViewRemoved(e);var n=new AXEEvent(AXEEvent.REMOVED);t.triggerEvent(n),t.removeFromStage()},AXEView.prototype.stage=function(){var e=this;while(e.parent()!=null&&e.parent().className!="AXEStage")e=e.parent();var t=null;return e.parent()==null?t=e:t=e.parent(),t},AXEView.prototype.onStage=!1,AXEView.prototype.onAddToStage=function(){var e=this;e.onStage=!0,e.resetEvents(),e.controller!=null&&e.controller.onViewAddToStage();var t=new AXEEvent(AXEEvent.ADD_TO_STAGE);e.triggerEvent(t);var n=e.stage();n!=null&&(e.onWindowOrientationChanged(n.orientation),e.parent()!=null?e.resize(e.parent().width(),e.parent().height()):e.resize(e.width(),e.height()))},AXEView.prototype.onWindowOrientationChanged=function(e){var t=this;t.windowOrientationChange(e),t.controller!=null&&t.controller.onWindowOrientationChanged(e)},AXEView.prototype.windowOrientationChange=function(e){},AXEView.prototype._active=!0,AXEView.prototype.active=function(e){var t=this;return e!=undefined&&t._active!=e&&(t._active=e,t._active?(t.onActivate(),t.controller!=null&&t.controller.onViewActivate(),t.needToRender(!0)):(t.onDeactivate(),t.controller!=null&&t.controller.onViewDeactivate())),t._active},AXEView.prototype.onActivate=function(){},AXEView.prototype.onDeactivate=function(){},AXEView.prototype.resize=function(e,t){var n=this;n.widthPercent()>0&&n.width(e*n.widthPercent()),n.heightPercent()>0&&n.height(t*n.heightPercent()),n.xPercent()!=0&&n.x(e*n.xPercent()),n.yPercent()!=0&&n.y(t*n.yPercent());if(isNaN(n.alignMode())==0&&n.scaleMode()!=null){var r=n.alignMode(),i=n.scaleMode(),s=i(n.width(),n.height(),e,t,r);n.matrix(s)}n.controller!=null&&n.controller.onViewResize(e,t);var o=new AXEEvent(AXEEvent.RESIZE);n.triggerEvent(o)},AXEView.prototype._shakeX=0,AXEView.prototype.shakeX=function(e){var t=this;return isNaN(e)==0&&e!=t._shakeX&&(t._shakeX=e,t.needToRender(!0)),t._shakeX},AXEView.prototype._shakeY=0,AXEView.prototype.shakeY=function(e){var t=this;return isNaN(e)==0&&e!=t._shakeX&&(t._shakeY=e,t.needToRender(!0)),t._shakeY},AXEView.prototype.update=function(e,t){var n=this;n.animateChangeFlag&&(n.animateChangeFlag=!1,n.objAnimate!=null&&(n.objAnimate.init(e),n.animating(!0),n.onAnimationStart()));if(n.objAnimate!=null){n.needToRender(!0);var r=n.objAnimate,i=n.objAnimate.update(e);i&&r==n.objAnimate&&(n.objAnimate=null,n.animating(!1),n.onAnimationStop())}n.controller!=null&&n.controller.onViewUpdated(e,t),n._ghostShadow!=null&&n._ghostShadow.update(e,t),n.needToRender()&&(n.cachedImage=null),n.needResizeFlag&&n.parent()!=null&&(n.needResizeFlag=!1,n.resize(n.parent().width(),n.parent().height())),n._onTheStage=-1},AXEView.prototype._removeAllHTML=!1,AXEView.prototype.removeAllHTML=function(e){var t=this;return typeof e=="boolean"&&e!=t._removeAllHTML&&(t._removeAllHTML=e,t.needToRender(!0)),t._removeAllHTML},AXEView.prototype._$html=null,AXEView.prototype.$html=function(e){var t=this;return arguments.length>0&&(t._$html=e,t.needToRender(!0)),t._$html},AXEView.prototype._link=null,AXEView.prototype.link=function(e){var t=this;return arguments.length>0&&(t._link=e),t._link},AXEView.prototype._window="_self",AXEView.prototype.window=function(e){var t=this;return Boolean(e)&&e!=t._window&&(t._window=e),t._window},AXEView.prototype._viewData=null,AXEView.prototype.viewData=function(e){var t=this;return arguments.length>0&&(t._viewData=e),t._viewData==null&&(t._viewData={}),t._viewData}})(),define("view",["bg_image","string_util","mat3","rect","vec2","path","animate","color","event","event_target","touch","touch_event","scale_mode","align_mode","ghost_shadow","gradient_color","linear_gradient_color","radial_gradient_color"],function(){});var AXEViewContainer=function(e){if(arguments.length>0&&e instanceof AXEViewContainer)return e};(function(){AXEViewContainer.prototype=new AXEView,AXEViewContainer.prototype.constructor=AXEViewContainer,AXEViewContainer.prototype.className="AXEViewContainer",AXEViewContainer.prototype.clone=function(){var e=this,t=new AXEViewContainer;return e.copyProperties(t),t},AXEViewContainer.prototype.copyProperties=function(e){var t=this;AXEView.prototype.copyProperties.call(t,e),AXEViewContainer(e).muted(t.muted()),t.subViews().length>0&&t.eachSubView(function(t,n){AXEViewContainer(e).addSubView(n.clone())})},AXEViewContainer.prototype.dealloc=function(){var e=this,t=e.subViews();for(var n=0;n<t.length;n++){var r=t[n];r.dealloc()}AXEView.prototype.dealloc.call(e)},AXEViewContainer.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e),e.is("[muted]")&&t.muted(e.attr("muted")=="true");var n=e.children();n.each(function(e,n){var r=$(n),i=r[0].nodeName.toLowerCase(),s=AXEViewFactory.createViewByNodeName(i);s!=null&&(s.updatePropsFromXML(r),t.addSubView(s))})},AXEViewContainer.prototype.needToRender=function(e){var t=this,n,r=t.subViews();if(arguments.length>0)n=AXEView.prototype.needToRender.call(t,e),Boolean(e)===!1&&t.eachSubView(function(e,t){t.needToRender(!1)});else{n=AXEView.prototype.needToRender.call(t);if(n===!1)for(var i=0;i<r.length;i++){var s=r[i];if(s.needToRender()){n=!0;break}}}return n},AXEViewContainer.prototype.resetEvents=function(){var e=this;AXEView.prototype.resetEvents.call(e),e.eachSubView(function(e,t){t.resetEvents()})},AXEViewContainer.prototype._subViews=null,AXEViewContainer.prototype.subViews=function(){var e=this;return e._subViews==null&&(e._subViews=[]),e._subViews},AXEViewContainer.prototype.subViewsCount=function(){var e=this;return e.subViews().length},AXEViewContainer.prototype.addSubView=function(e){var t=this;e.parent()!=null&&e.parent().clearSubView(e),t.subViews().push(e),t.afterSubViewAdded(e)},AXEViewContainer.prototype.insertSubViewAt=function(e,t){var n=this;e.parent()!=null&&e.parent().clearSubView(e);var r=n.subViews();t=Math.max(0,Math.min(r.length-1,t)),r.splice(t,0,e),n.afterSubViewAdded(e)},AXEViewContainer.prototype.swapSubViews=function(e,t){var n=this,r=n.indexOfSubView(e);if(r>=0){var i=n.indexOfSubView(t);i>=0&&n.swapSubViewsByIndex(r,i)}},AXEViewContainer.prototype.swapSubViewsByIndex=function(e,t){var n=this;if(e>=0&&e<n.subViewsCount()&&t>=0&&t<n.subViewsCount()){var r=n.subViews().slice();n.subViews()[e]=r[t],n.subViews()[t]=r[e]}},AXEViewContainer.prototype.afterSubViewAdded=function(e){var t=this;e.parent(t),e.onAdd(t),t.onTheStage()&&e.onAddToStage(),e.active(t.active()),t.needToRender(!0)},AXEViewContainer.prototype.onAddToStage=function(){var e=this;for(var t=0;t<e.subViews().length;t++){var n=e.subViews()[t];n.onAddToStage()}AXEView.prototype.onAddToStage.call(e)},AXEViewContainer.prototype.empty=function(){var e=this,t=e.subViews().slice();for(var n=0;n<t.length;n++)e.removeSubView(t[n])},AXEViewContainer.prototype.orderSubViews=function(e){var t=this,n,r=t.subViews().slice(),i=!1;do{n=0;for(var s=0;s<r.length-1;s++){var o=r[s],u=r[s+1],a=e(o,u);a&&(i=!0,r[s]=u,r[s+1]=o,n++)}}while(n>0);i&&(t._subViews=r,t.needToRender(!0))},AXEViewContainer.prototype.clearSubView=function(e){var t=this,n=!1;if(e.parent()==t)for(var r=0;r<t.subViews().length;r++){var i=t.subViews()[r];if(i===e){t.subViews().splice(r,1),i.parent(null),n=!0;break}}return n&&t.needToRender(!0),n},AXEViewContainer.prototype.removeSubView=function(e){var t=this,n=t.clearSubView(e);n&&e.onRemoveFromSuperView(t)},AXEViewContainer.prototype.onRemoveFromStage=function(){var e=this;AXEView.prototype.onRemoveFromStage.call(e),e.eachSubView(function(e,t){t.onRemoveFromStage()})},AXEViewContainer.prototype.indexOfSubView=function(e){var t=this,n=-1;for(var r=0;r<t.subViews().length;r++){var i=t.subViews()[r];if(i===e){n=r;break}}return n},AXEViewContainer.prototype.subViewByIndex=function(e){var t=this,n=null;return e>=0&&e<t.subViews().length&&(n=t.subViews()[e]),n},AXEViewContainer.prototype.subViewByName=function(e){var t=this,n=null;for(var r=0;r<t.subViews().length;r++){var i=t.subViews()[r];if(i.name()==e){n=i;break}}if(n==null)for(var s=0;s<t.subViews().length;s++){var o=t.subViews()[s];o instanceof AXEViewContainer&&(n=o.subViewByName(e));if(n!=null)break}return n},AXEViewContainer.prototype.containsSubView=function(e){var t=this,n=!1;return t.eachSubView(function(t,r){return r==e?(n=!0,!1):!0}),n},AXEViewContainer.prototype.onTheStage=function(){var e=this;if(e._onTheStage==-1){var t=AXEView.prototype.onTheStage.call(e);e.visible()&&t==0&&e.clip()==0&&e.eachSubView(function(e,n){if(n.onTheStage())return t=!0,!1}),e._onTheStage=t?1:0}return e._onTheStage==1},AXEViewContainer.prototype.eachSubView=function(e){var t=this,n=t.subViews().slice();for(var r=0;r<n.length;r++){var i=n[r],s=e.call(null,r,i);if(s===!1)break}},AXEViewContainer.prototype._muted=!1,AXEViewContainer.prototype.muted=function(e){var t=this;return typeof e=="boolean"&&e!=t._muted&&(t._muted=e),t._muted},AXEViewContainer.prototype.spreadToDeep=function(e){var t=this,n=!1;if(t.subViewsCount()>0){var r=t.subViews().slice();for(var i=r.length-1;i>=0;i--){var s=r[i],o=e.clone();o.currentPhase=AXEEvent.CAPTURING_PHASE,o instanceof AXETouchEvent&&(o.touches=s.convertTouches(e.touches,t)),s.triggerEvent(o);if(o.cancel==0){n=!0;break}}}return n},AXEViewContainer.prototype.triggerEvent=function(e){var t=this;e instanceof AXETouchEvent?t.visible()&&t.enabled()?t.muted()?e.currentPhase==AXEEvent.CAPTURING_PHASE?e.cancel=!t.spreadToDeep(e):e.currentPhase==AXEEvent.BUBBLING_PHASE?AXEView.prototype.triggerEvent.call(t,e):e.currentPhase==AXEEvent.AT_TARGET&&e.bubbles==1&&t.spreadToTop(e):AXEView.prototype.triggerEvent.call(t,e):e.cancel=!0:AXEView.prototype.triggerEvent.call(t,e)},AXEViewContainer.prototype.active=function(e){var t=this,n=AXEView.prototype.active.call(t,e);return t.eachSubView(function(e,t){t.active(n)}),n},AXEViewContainer.prototype.onWindowOrientationChanged=function(e){var t=this;AXEView.prototype.onWindowOrientationChanged.call(t,e),t.eachSubView(function(t,n){n.onWindowOrientationChanged(e)})},AXEViewContainer.prototype.resize=function(e,t){var n=this;AXEView.prototype.resize.call(n,e,t),n.eachSubView(function(e,t){t.resize(n.width(),n.height())})},AXEViewContainer.prototype.update=function(e,t){var n=this;if(n.cachedImage==null){var r=n.subViews();for(var i=0;i<r.length;i++){var s=r[i];s.visible()&&s.update(e,t)}}AXEView.prototype.update.call(n,e,t)}})(),define("view_container",["view","rect","touch_event","view_factory"],function(){});var AXEDateUtil={};(function(){AXEDateUtil.parseFormat=function(e){var t=[],n={};n.type="y";var r=/yyyy/g,i=e.search(r);i>-1?(n.length=4,n.order=i,t.push(n)):(r=/yy/g,i=e.search(r),i>-1&&(n.length=2,n.order=i,t.push(n)));var s={};s.type="m";var o=/mm/g;i=e.search(o),i>-1?(s.length=2,s.order=i,t.push(s)):(o=/m/g,i=e.search(o),i>-1&&(s.length=1,s.order=i,t.push(s)));var u={};u.type="d";var a=/dd/g;i=e.search(a),i>-1?(u.length=2,u.order=i,t.push(u)):(a=/d/g,i=e.search(a),i>-1&&(u.length=1,u.order=i,t.push(u)));var f={};f.type="h";var l=/hh/g;i=e.search(l),i>-1?(f.length=2,f.order=i,t.push(f)):(l=/h/g,i=e.search(l),i>-1&&(f.length=1,f.order=i,t.push(f)));var c={};c.type="M";var h=/MM/g;i=e.search(h),i>-1?(c.length=2,c.order=i,t.push(c)):(h=/M/g,i=e.search(h),i>-1&&(c.length=1,c.order=i,t.push(c)));var p={};p.type="s";var d=/ss/g;i=e.search(d),i>-1?(p.length=2,p.order=i,t.push(p)):(d=/s/g,i=e.search(d),i>-1&&(p.length=1,p.order=i,t.push(p)));var v=0;do{v=0;for(var m=0;m<t.length-1;m++){var g=t[m],y=t[m+1];g.order>y.order&&(t[m]=y,t[m+1]=g,v++)}}while(v>0);return t},AXEDateUtil.strToDate=function(e,t){var n=AXEDateUtil.parseFormat(t),r=e.match(/\d+/g),i=new Date(0);if(r==null||r.length!=n.length)throw new Error("Invalid date format!");i.setHours(0,0,0);for(var s=0;s<r.length;s++){var o=parseInt(r[s],10),u=n[s];switch(u.type){case"y":if(u.length==4)i.setFullYear(o);else if(u.length==2){var a=parseInt(String((new Date).getFullYear()).slice(2,4),10);o<a?i.setFullYear(2e3+o):i.setFullYear(1900+o)}break;case"m":i.setMonth(o-1);break;case"d":i.setDate(o);break;case"h":i.setHours(o);break;case"M":i.setMinutes(o);break;case"s":i.setSeconds(o);break;default:}}return i},AXEDateUtil.dateToStr=function(e,t){var n=t,r=AXEDateUtil.parseFormat(t);for(var i=0;i<r.length;i++){var s=r[i];switch(s.type){case"y":var o=null;s.length==4?o=String(e.getFullYear()):s.length==2&&(o=String(e.getFullYear()).slice(2,4)),n=n.replace(/y+/g,o);break;case"m":var u=String(e.getMonth()+1);while(u.length<s.length)u="0"+u;n=n.replace(/m+/g,u);break;case"d":var a=String(e.getDate());while(a.length<s.length)a="0"+a;n=n.replace(/d+/g,a);break;case"h":var f=String(e.getHours());while(f.length<s.length)f="0"+f;n=n.replace(/h+/g,f);break;case"M":var l=String(e.getMinutes());while(l.length<s.length)l="0"+l;n=n.replace(/M+/g,l);break;case"s":var c=String(e.getSeconds());while(c.length<s.length)c="0"+c;n=n.replace(/s+/g,c);break;default:}}return n}})(),define("date_util",function(){});var AXEStage=function(e){if(arguments.length>0&&e instanceof AXEStage)return e};(function(){AXEStage.prototype=new AXEViewContainer,AXEStage.prototype.constructor=AXEStage,AXEStage.prototype.className="AXEStage",AXEStage.prototype.render=null,AXEStage.prototype.clone=function(){var e=this,t=new AXEStage;return e.copyProperties(t),t},AXEStage.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXEStage(e).ratio(t.ratio()),AXEStage(e).acceptOrientation(t.acceptOrientation()),AXEStage(e)._frameRate=t._frameRate},AXEStage.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),e.is("[ratio]")?t.ratio(parseFloat(e.attr("ratio"))):window["devicePixelRatio"]!=undefined&&t.ratio(window.devicePixelRatio),e.is("[fps]")?t._frameRate=parseFloat(e.attr("fps")):t._frameRate=40,e.is("[min-width]")&&t.minWidth(parseFloat(e.attr("min-width"))),e.is("[min-height]")&&t.minHeight(parseFloat(e.attr("min-height")));if(e.is("[orientation]")){var n=e.attr("orientation").split("|"),r=0;for(var i=0;i<n.length;i++){var s=AXEOrientation[n[i].toUpperCase()];r|=s}t.acceptOrientation(r)}},AXEStage.prototype._frameRate=40,AXEStage.prototype.frameRate=function(e){var t=this;return isNaN(e)==0&&e!=t._frameRate&&(t._frameRate=e),t._frameRate},AXEStage.prototype._minWidth=0,AXEStage.prototype.minWidth=function(e){var t=this;return isNaN(e)==0&&e!=t._minWidth&&(t._minWidth=e,t.sizeChange=!0),t._minWidth},AXEStage.prototype._minHeight=0,AXEStage.prototype.minHeight=function(e){var t=this;return isNaN(e)==0&&e!=t._minHeight&&(t._minHeight=e,t.sizeChange=!0),t._minHeight},AXEStage.prototype.dealloc=function(){var e=this;e._stageMatrix=null,AXEViewContainer.prototype.dealloc.call(e)},AXEStage.prototype.sizeChange=!1,AXEStage.prototype._acceptOrientation=AXEOrientation.ALL_ORIENTATION,AXEStage.prototype.acceptOrientation=function(e){var t=this;return isNaN(e)==0&&e!=t._acceptOrientation&&(t._acceptOrientation=e,t.sizeChange=!0),t._acceptOrientation},AXEStage.prototype.matrix=function(e){var t=this;if(e instanceof AXEMat3&&e.equalsTo(new AXEMat3)==0)throw new Error("Stage matrix should not be set.");return AXEViewContainer.prototype.matrix.call(t)},AXEStage.prototype._stageMatrix=new AXEMat3,AXEStage.prototype.stageMatrix=function(e){var t=this;return arguments.length>0&&(t._stageMatrix=e,t.needToRender(!0)),t._stageMatrix},AXEStage.prototype._ratio=2,AXEStage.prototype.ratio=function(e){var t=this;return isNaN(e)===!1&&t._ratio!=parseFloat(e)&&(t._ratio=e,t.needToRender(!0)),t._ratio},AXEStage.prototype.orientation=AXEOrientation.UNKONWN,AXEStage.prototype.windowWidth=0,AXEStage.prototype.windowHeight=0,AXEStage.prototype._lockSise=!1,AXEStage.prototype.lockSize=function(e){var t=this;return typeof e=="boolean"&&e!=t._lockSise&&(t._lockSise=e,t._lockSise==0&&(t.sizeChange=!0)),t._lockSise},AXEStage.prototype.firstUpdate=!1,AXEStage.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.sizeChange&&(n.sizeChange=!1,n.resizeStage()),n.firstUpdate==0&&(n.firstUpdate=!0,n.onAddToStage())},AXEStage.prototype.openResize=0,AXEStage.prototype.resize=function(e,t){var n=this,r=AXEEnv.device.orientation();r!=n.orientation&&r!=AXEOrientation.UNKONWN&&(n.openResize=Date.now());if(n.windowWidth!=e||n.windowHeight!=t){n.windowWidth=e,n.windowHeight=t;if(n.lockSize()==0||Date.now()-n.openResize<500)n.sizeChange=!0}},AXEStage.prototype.resizeStage=function(){var e=this;if(e.lockSize()==0||Date.now()-e.openResize<500){var t=AXEEnv.device.orientation(),n=(e.acceptOrientation()&t)==t;if(n)e.width(e.windowWidth*e.ratio()),e.height(e.windowHeight*e.ratio()),e.stageMatrix(new AXEMat3);else{var r,i,s,o;(e.acceptOrientation()|t)==AXEOrientation.PORTRAIT||(e.acceptOrientation()|t)==AXEOrientation.LANDSCAPE?(e.width(e.windowWidth*e.ratio()),e.height(e.windowHeight*e.ratio()),r=e.width()/2,s=e.height()/2,i=r,o=s):(e.width(e.windowHeight*e.ratio()),e.height(e.windowWidth*e.ratio()),r=e.width()/2,s=e.height()/2,i=e.height()/2,o=e.width()/2);var u=new AXEMat3,a=0;t==AXEOrientation.PORTRAIT_UP?(e.acceptOrientation()&AXEOrientation.PORTRAIT_DOWN)==AXEOrientation.PORTRAIT_DOWN?a=Math.PI:(e.acceptOrientation()&AXEOrientation.LANDSCAPE_LEFT)==AXEOrientation.LANDSCAPE_LEFT?a=Math.PI/2:a=-1*Math.PI/2:t==AXEOrientation.PORTRAIT_DOWN?(e.acceptOrientation()&AXEOrientation.PORTRAIT_UP)==AXEOrientation.PORTRAIT_UP?a=Math.PI:(e.acceptOrientation()&AXEOrientation.LANDSCAPE_LEFT)==AXEOrientation.LANDSCAPE_LEFT?a=-1*Math.PI/2:a=Math.PI/2:t==AXEOrientation.LANDSCAPE_LEFT?(e.acceptOrientation()&AXEOrientation.LANDSCAPE_RIGHT)==AXEOrientation.LANDSCAPE_RIGHT?a=Math.PI:(e.acceptOrientation()&AXEOrientation.PORTRAIT_UP)==AXEOrientation.PORTRAIT_UP?a=-1*Math.PI/2:a=Math.PI/2:t==AXEOrientation.LANDSCAPE_RIGHT&&((e.acceptOrientation()&AXEOrientation.LANDSCAPE_LEFT)==AXEOrientation.LANDSCAPE_LEFT?a=Math.PI:(e.acceptOrientation()&AXEOrientation.PORTRAIT_UP)==AXEOrientation.PORTRAIT_UP?a=Math.PI/2:a=-1*Math.PI/2),u.a=Math.cos(a),u.b=Math.sin(a),u.c=-1*u.b,u.d=u.a,u.tx=i-u.a*r-u.c*s,u.ty=o-u.b*r-u.d*s,e.stageMatrix(u)}e.needToRender(!0),AXEViewContainer.prototype.resize.call(e,e.width(),e.height()),t!=e.orientation&&(e.orientation=t,e.onWindowOrientationChanged(t))}}})(),define("stage",["mat3","env","orientation","view_container","date_util"],function(){});var AXEQRCode=function(e){if(e instanceof AXEQRCode)return e};(function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function a(e,t){if(e.length==undefined)throw new Error(e.length+"/"+t);var n=0;while(n<e.length&&e[n]==0)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function f(e,t){this.totalCount=e,this.dataCount=t}function l(){this.buffer=new Array,this.length=0}e.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){var t=f.getRSBlocks(e,this.errorCorrectLevel),n=new l,r=0;for(var i=0;i<t.length;i++)r+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var o=this.dataList[i];n.put(o.mode,4),n.put(o.getLength(),s.getLengthInBits(o.mode,e)),o.write(n)}if(n.getLengthInBits()<=r*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++){if(e+n<=-1||this.moduleCount<=e+n)continue;for(var r=-1;r<=7;r++){if(t+r<=-1||this.moduleCount<=t+r)continue;0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[e+n][t+r]=!0:this.modules[e+n][t+r]=!1}}},getBestMaskPattern:function(){var e=0,t=0;for(var n=0;n<8;n++){this.makeImpl(!0,n);var r=s.getLostPoint(this);if(n==0||e>r)e=r,t=n}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n),i=1;this.make();for(var s=0;s<this.modules.length;s++){var o=s*i;for(var u=0;u<this.modules[s].length;u++){var a=u*i,f=this.modules[s][u];f&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+i,o),r.lineTo(a+i,o+i),r.lineTo(a,o+i),r.endFill())}}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++){if(this.modules[e][6]!=null)continue;this.modules[e][6]=e%2==0}for(var t=8;t<this.moduleCount-8;t++){if(this.modules[6][t]!=null)continue;this.modules[6][t]=t%2==0}},setupPositionAdjustPattern:function(){var e=s.getPatternPosition(this.typeNumber);for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(this.modules[r][i]!=null)continue;for(var o=-2;o<=2;o++)for(var u=-2;u<=2;u++)o==-2||o==2||u==-2||u==2||o==0&&u==0?this.modules[r+o][i+u]=!0:this.modules[r+o][i+u]=!1}},setupTypeNumber:function(e){var t=s.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){var n=this.errorCorrectLevel<<3|t,r=s.getBCHTypeInfo(n);for(var i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){var n=-1,r=this.moduleCount-1,i=7,o=0;for(var u=this.moduleCount-1;u>0;u-=2){u==6&&u--;for(;;){for(var a=0;a<2;a++)if(this.modules[r][u-a]==null){var f=!1;o<e.length&&(f=(e[o]>>>i&1)==1);var l=s.getMask(t,r,u-a);l&&(f=!f),this.modules[r][u-a]=f,i--,i==-1&&(o++,i=7)}r+=n;if(r<0||this.moduleCount<=r){r-=n,n=-n;break}}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){var i=f.getRSBlocks(e,n),o=new l;for(var u=0;u<r.length;u++){var a=r[u];o.put(a.mode,4),o.put(a.getLength(),s.getLengthInBits(a.mode,e)),a.write(o)}var c=0;for(var u=0;u<i.length;u++)c+=i[u].dataCount;if(o.getLengthInBits()>c*8)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+c*8+")");o.getLengthInBits()+4<=c*8&&o.put(0,4);while(o.getLengthInBits()%8!=0)o.putBit(!1);for(;;){if(o.getLengthInBits()>=c*8)break;o.put(t.PAD0,8);if(o.getLengthInBits()>=c*8)break;o.put(t.PAD1,8)}return t.createBytes(o,i)},t.createBytes=function(e,t){var n=0,r=0,i=0,o=new Array(t.length),u=new Array(t.length);for(var f=0;f<t.length;f++){var l=t[f].dataCount,c=t[f].totalCount-l;r=Math.max(r,l),i=Math.max(i,c),o[f]=new Array(l);for(var h=0;h<o[f].length;h++)o[f][h]=255&e.buffer[h+n];n+=l;var p=s.getErrorCorrectPolynomial(c),d=new a(o[f],p.getLength()-1),v=d.mod(p);u[f]=new Array(p.getLength()-1);for(var h=0;h<u[f].length;h++){var m=h+v.getLength()-u[f].length;u[f][h]=m>=0?v.get(m):0}}var g=0;for(var h=0;h<t.length;h++)g+=t[h].totalCount;var y=new Array(g),b=0;for(var h=0;h<r;h++)for(var f=0;f<t.length;f++)h<o[f].length&&(y[b++]=o[f][h]);for(var h=0;h<i;h++)for(var f=0;f<t.length;f++)h<u[f].length&&(y[b++]=u[f][h]);return y};var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(s.getBCHDigit(t)-s.getBCHDigit(s.G15)>=0)t^=s.G15<<s.getBCHDigit(t)-s.getBCHDigit(s.G15);return(e<<10|t)^s.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(s.getBCHDigit(t)-s.getBCHDigit(s.G18)>=0)t^=s.G18<<s.getBCHDigit(t)-s.getBCHDigit(s.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(e!=0)t++,e>>>=1;return t},getPatternPosition:function(e){return s.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i.PATTERN000:return(t+n)%2==0;case i.PATTERN001:return t%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(t+n)%3==0;case i.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return t*n%2+t*n%3==0;case i.PATTERN110:return(t*n%2+t*n%3)%2==0;case i.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){var t=new a([1],0);for(var n=0;n<e;n++)t=t.multiply(new a([1,o.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){var t=e.getModuleCount(),n=0;for(var r=0;r<t;r++)for(var i=0;i<t;i++){var s=0,o=e.isDark(r,i);for(var u=-1;u<=1;u++){if(r+u<0||t<=r+u)continue;for(var a=-1;a<=1;a++){if(i+a<0||t<=i+a)continue;if(u==0&&a==0)continue;o==e.isDark(r+u,i+a)&&s++}}s>5&&(n+=3+s-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var f=0;e.isDark(r,i)&&f++,e.isDark(r+1,i)&&f++,e.isDark(r,i+1)&&f++,e.isDark(r+1,i+1)&&f++;if(f==0||f==4)n+=3}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(var i=0;i<t;i++)for(var r=0;r<t;r++)e.isDark(r,i)&&l++;var c=Math.abs(100*l/t/t-50)/5;return n+=c*10,n}},o={glog:function(e){if(e<1)throw new Error("glog("+e+")");return o.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return o.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var u=0;u<8;u++)o.EXP_TABLE[u]=1<<u;for(var u=8;u<256;u++)o.EXP_TABLE[u]=o.EXP_TABLE[u-4]^o.EXP_TABLE[u-5]^o.EXP_TABLE[u-6]^o.EXP_TABLE[u-8];for(var u=0;u<255;u++)o.LOG_TABLE[o.EXP_TABLE[u]]=u;a.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){var t=new Array(this.getLength()+e.getLength()-1);for(var n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=o.gexp(o.glog(this.get(n))+o.glog(e.get(r)));return new a(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;var t=o.glog(this.get(0))-o.glog(e.get(0)),n=new Array(this.getLength());for(var r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=o.gexp(o.glog(e.get(r))+t);return(new a(n,0)).mod(e)}},f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f.getRSBlocks=function(e,t){var n=f.getRsBlockTable(e,t);if(n==undefined)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);var r=n.length/3,i=new Array;for(var s=0;s<r;s++){var o=n[s*3+0],u=n[s*3+1],a=n[s*3+2];for(var l=0;l<o;l++)i.push(new f(u,a))}return i},f.getRsBlockTable=function(e,t){switch(t){case r.L:return f.RS_BLOCK_TABLE[(e-1)*4+0];case r.M:return f.RS_BLOCK_TABLE[(e-1)*4+1];case r.Q:return f.RS_BLOCK_TABLE[(e-1)*4+2];case r.H:return f.RS_BLOCK_TABLE[(e-1)*4+3];default:return undefined}},l.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},AXEQRCode.CORRECT_LEVEL_L=1,AXEQRCode.CORRECT_LEVEL_M=0,AXEQRCode.CORRECT_LEVEL_Q=3,AXEQRCode.CORRECT_LEVEL_H=2,AXEQRCode.VERSION_2=2,AXEQRCode.prototype=new AXEView,AXEQRCode.prototype.constructor=AXEQRCode,AXEQRCode.prototype.className="AXEQRCode",AXEQRCode.prototype.clone=function(){var e=this,t=new AXEQRCode;return e.copyProperties(t),t},AXEQRCode.prototype.copyProperties=function(e){var t=this;AXEQRCode(e).text(t.text()),AXEQRCode(e).correctLevel(t.correctLevel()),AXEQRCode(e).color(t.color().clone()),AXEView.prototype.copyProperties.call(t,e)},AXEQRCode.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e),e.is("[correct]")&&t.correctLevel(parseInt(AXEQRCode["CORRECT_LEVEL_"+e.attr("correct").toUpperCase()],10)),e.children("text").length>0&&t.text(e.children("text").text()),e.is("[color]")&&t.color(AXEColor.colorWithString(e.attr("color")))},AXEQRCode.prototype.update=function(e,n){var r=this;AXEView.prototype.update.call(r,e,n);if((r.correctLevelChange||r.textChange)&&r._text!=null){r.correctLevelChange=!1,r.textChange=!1;var i=new t(-1,r.correctLevel());i.addData(r.text()),i.make(),r._qrcode=i,r.needToRender(!0)}},AXEQRCode.prototype._qrcode=null,AXEQRCode.prototype.qrcode=function(){var e=this;return e._qrcode},AXEQRCode.prototype._color=null,AXEQRCode.prototype.color=function(e){var t=this;return e instanceof AXEColor&&e!=t._color&&(t._color=e.clone(),t.needToRender(!0)),t._color==null&&(t._color=AXEColor.colorWithString("#000000")),t._color},AXEQRCode.prototype.correctLevelChange=!1,AXEQRCode.prototype._correctLevel=AXEQRCode.CORRECT_LEVEL_L,AXEQRCode.prototype.correctLevel=function(e){var t=this;return typeof e=="number"&&e!=t._correctLevel&&(t._correctLevel=e,t.correctLevelChange=!0),t._correctLevel},AXEQRCode.prototype.textChange=!1,AXEQRCode.prototype._text=null,AXEQRCode.prototype.text=function(e){var t=this;return typeof e=="string"&&e!=t._text&&(t._text=e,t.textChange=!0),t._text}})(),define("qrcode",["view"],function(){});var AXEBitmap=function(e){if(arguments.length>0&&e instanceof AXEBitmap)return e};(function(){AXEBitmap.prototype=new AXEView,AXEBitmap.prototype.constructor=AXEBitmap,AXEBitmap.prototype.renderHTML=function(){var e=this;e._bitmap!=null&&e.showHTML()?e.$html($(e._bitmap).clone()):e.$html(null)},AXEBitmap.prototype.className="AXEBitmap",AXEBitmap.prototype.clone=function(){var e=this,t=new AXEBitmap;return e.copyProperties(t),t},AXEBitmap.prototype.copyProperties=function(e){var t=this;AXEView.prototype.copyProperties.call(t,e),AXEBitmap(e).sat(t.sat()),AXEBitmap(e).fixSize(t.fixSize()),AXEBitmap(e).bitmap(t.bitmap()),AXEBitmap(e).showHTML(t.showHTML())},AXEBitmap.prototype.dealloc=function(){var e=this;e._bitmap=null,AXEView.prototype.dealloc.call(e)},AXEBitmap.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e),e.is("[html]")?t.showHTML(e.attr("html").toLowerCase()=="true"):t.showHTML(!1),e.is("[sat]")?t.sat(parseFloat(e.attr("sat"))):t.sat(1),t.fixSize(e.is("[width]")&&e.is("[height]")),e.is("[src]")&&t.bitmap(AXEAssetsLoader.asset(e.attr("src")))},AXEBitmap.prototype.updateSize=function(){var e=this;e.bitmap()!=null&&(e.fixSize()==0?(e.width(e.bitmap().naturalWidth),e.height(e.bitmap().naturalHeight)):(e.bitmap().width=e.width(),e.bitmap().height=e.height()))},AXEBitmap.prototype._showHTML=!1,AXEBitmap.prototype.showHTML=function(e){var t=this;return typeof e=="boolean"&&e!=t._showHTML&&(t._showHTML=e,t.renderHTML()),t._showHTML},AXEBitmap.prototype._fixSize=!1,AXEBitmap.prototype.fixSize=function(e){var t=this;return arguments.length>0&&e!=t._fixSize&&(t._fixSize=e,t.updateSize(),t.needToRender(!0)),t._fixSize},AXEBitmap.prototype._bitmap=null,AXEBitmap.prototype.bitmap=function(e){var t=this;return arguments.length>0&&e!=t._bitmap&&(t._bitmap=e,t.updateSize(),t.renderHTML(),t.needToRender(!0)),t._bitmap},AXEBitmap.prototype._sat=1,AXEBitmap.prototype.sat=function(e){var t=this;return isNaN(e)==0&&(e=Math.max(Math.min(1,e),0),e!=t._sat&&(t._sat=e,t.needToRender(!0))),t._sat}})(),define("bitmap",["view","assets_loader"],function(){});var AXEAudioController=function(e,t){var n=this;if(arguments.length>0)if(typeof e=="string"){var r=AXEAssetsLoader.asset(e);if(r==null){r=document.createElement("audio");var i=document.createElement("source");i.type="audio/mp3",i.src=AXEURLUtil.assetLoadURL(AXELoaderConfig.baseURI,e,AXELoaderConfig.version),r.appendChild(i)}n.audio(r)}else typeof e=="object"&&n.audio(e);if(typeof t=="boolean"){var s=$(n.audio());t?s.attr("loop","loop"):s.removeAttr("loop"),n.loop(t)}};(function(){AXEAudioController.audioByURL=function(e){return new AXEAudioController(e)},AXEAudioController.prototype=new AXEEventTarget,AXEAudioController.prototype.constructor=AXEAudioController,AXEAudioController.prototype._audio=null,AXEAudioController.prototype.audio=function(e){var t=this;if(typeof e=="object"&&t._audio!=e){t._audio!=null&&(t.pause(),t._audio=null,t._audio.removeEventListener("playing",t),t._audio.removeEventListener("pause",t),t._audio.removeEventListener("ended",t)),t._audio=e;try{t._audio.loop=t.loop()}catch(n){}try{t._audio.volume=t._volume}catch(n){}t._audio.addEventListener("playing",t),t._audio.addEventListener("pause",t),t._audio.addEventListener("ended",t)}return t._audio},AXEAudioController.prototype.handleEvent=function(e){var t=this,n=e.type;n=="playing"?(t._playing=!0,t.triggerEvent(new AXEEvent(AXEEvent.PLAYING))):n=="pause"?(t._playing=!1,t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))):n=="ended"&&(t.loop()?t.play(0):(t._playing=!1,t.triggerEvent(new AXEEvent(AXEEvent.END))))},AXEAudioController.prototype._volume=1,AXEAudioController.prototype.volume=function(e){var t=this;if(isNaN(e)===!1&&t._volume!=e){t._volume=e;if(t.audio()!=null)try{t.audio().volume=t._volume}catch(n){}}return t._volume},AXEAudioController.prototype._playing=!1,AXEAudioController.prototype.playing=function(){var e=this;return e._playing},AXEAudioController.prototype._loop=!1,AXEAudioController.prototype.loop=function(e){var t=this;if(typeof e=="boolean"&&e!=t._loop){t._loop=e;if(t.audio()!=null)try{t.audio().loop=t._loop}catch(n){}}return t._loop},AXEAudioController.prototype.play=function(e){var t=this;if(t.audio()!=null){if(isNaN(e)===!1)try{t.audio().currentTime=e}catch(n){}try{t.audio().play()}catch(n){}}},AXEAudioController.prototype.pause=function(){var e=this;if(e.audio()!=null)try{e.audio().pause()}catch(t){}},AXEAudioController.prototype.duration=function(){var e=this,t=0;if(e.audio()!=null)try{t=e.audio().duration}catch(n){}return t},AXEAudioController.prototype.currentTime=function(e){var t=this;if(isNaN(e)==0&&t.audio()!=null)try{t.audio().currentTime=e}catch(n){}var r=0;if(t.audio()!=null)try{r=t.audio().currentTime}catch(n){}return r},AXEAudioController.prototype.ended=function(){var e=this,t=!0;if(e._audio!=null)try{t=e._audio.ended}catch(n){}return t},AXEAudioController.prototype.dealloc=function(){var e=this;e._audio!=null&&(e.pause(),e._audio.removeEventListener("playing",e),e._audio.removeEventListener("pause",e),e._audio.removeEventListener("ended",e),e._audio=null,e._playing=!1,e._loop=!1,e._volume=1),AXEEventTarget.prototype.dealloc.call(e)}})(),define("audio_ctrl",["url_util","event_target","event","assets_loader","loader_config"],function(){});var AXEMovie=function(e){if(arguments.length>0&&e instanceof AXEMovie)return e};(function(){var e=function(e,t,n,r){var i=this;i.frame=e,i.target=r instanceof Object?r:null,i.action=t,i.params=n instanceof Array?n:[]};e.prototype.constructor=e,e.prototype.target=null,e.prototype.action=null,e.prototype.params=null,e.prototype.frame=NaN,e.prototype.execute=function(){var e=this;e.action.apply(e.target,e.params)},AXEMovie.prototype=new AXEView,AXEMovie.prototype.constructor=AXEMovie,AXEMovie.prototype.className="AXEMovie",AXEMovie.prototype.dealloc=function(){var e=this;e._frames=null,AXEView.prototype.dealloc.call(e)},AXEMovie.prototype.clone=function(){var e=this,t=new AXEMovie;return e.copyProperties(t),t},AXEMovie.prototype.copyProperties=function(e){var t=this;AXEView.prototype.copyProperties.call(t,e),AXEMovie(e).playing=t.playing,AXEMovie(e)._currentFrame=t._currentFrame,AXEMovie(e)._frames=t.frames().slice(),AXEMovie(e).pauseWhenAnimating(t.pauseWhenAnimating()),AXEMovie(e).frameRate(t.frameRate()),AXEMovie(e).loop(t.loop()),AXEMovie(e).backToFirst(t.backToFirst()),AXEMovie(e).reversing=t.reversing;if(t.actions()!=null){AXEMovie(e)._actions={};var n=t.actions();for(var r in n)n.hasOwnProperty(r)&&(AXEMovie(e)._actions[r]=n[r])}},AXEMovie.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e);var n=e.children("frame"),r=t.frames();n.each(function(e,t){var n=$(t),i=n.is("[repeat]")?parseInt(n.attr("repeat"),10):1,s=[];for(var o=0;o<i;o++){var u=n.text(),a=AXEURLUtil.splitURLs(u);n.is("[reverse]")&&(a=a.reverse());for(var f=0;f<a.length;f++){var l=a[f];s.push(AXEAssetsLoader.asset(l))}}if(n.is("[random]"))for(var c=0;c<s.length;c++){var h=Math.floor(Math.random()*s.length),p=Math.floor(Math.random()*s.length),d=s[h];s[h]=s[p],s[p]=d}r=r.concat(s)}),t.frames(r),e.is("[pause-when-animating]")&&t.pauseWhenAnimating(e.attr("pause-when-animating")==="true"),e.is("[fps]")&&t.frameRate(parseFloat(e.attr("fps"))),t.loop(e.is("[loop]")?String(e.attr("loop")).toLowerCase()=="true":!0),t.backToFirst(e.is("[back]")?String(e.attr("back")).toLowerCase()=="true":!1);var i=e.children("script");i.each(function(e,n){var r=$(n),i=r.attr("frame").toLowerCase(),s;i=="first"?s=0:i=="last"?s=t.framesCount()-1:s=parseInt(i,10);if(isNaN(s))return;var o=r.attr("action"),u=o.split(":"),a=u[0],f=t[a];if(typeof f!="function")return;var l=[];if(u.length>1){l=u[1].split(",");for(var c=0;c<l.length;c++){var h=parseFloat(l[c]);if(isNaN(h)===!1)l[c]=h;else if(l[c]=="true"||l[c]=="false")l[c]=l[c]=="true"}}t.addAction(s,f,l,t)});if(e.is("[delay]")){t.goToAndStop(0);var s=parseFloat(e.attr("delay"));setTimeout(function(){t.goToAndPlay(0)},s*1e3)}else{var o=e.is("[auto-play]")?String(e.attr("auto-play")).toLowerCase()=="true":!0;o?t.goToAndPlay(0):t.goToAndStop(0)}},AXEMovie.prototype._actions=null,AXEMovie.prototype.actions=function(){var e=this;return e._actions==null&&(e._actions={}),e._actions},AXEMovie.prototype.frameActions=function(e){var t=this,n=String(e),r=null;return t.actions().hasOwnProperty(n)&&(r=t.actions()[n]),r},AXEMovie.prototype.addAction=function(t,n,r,i){var s=this,o=new e(t,n,r,i),u=s.frameActions(t);return u==null&&(u=[],s.actions()[String(t)]=u),u.push(o),o},AXEMovie.prototype.removeAction=function(e){var t=this,n=t.frameActions(e.frame);if(n!=null)for(var r=0;r<n.length;r++)if(n[r]==e){n.splice(r,1);break}},AXEMovie.prototype.removeFrameAction=function(e){var t=this,n=t.frameActions(e);n!=null&&delete t.actions()[String(e)]},AXEMovie.prototype._actionDisabled=!1,AXEMovie.prototype.actionDisabled=function(e){var t=this;return typeof e=="boolean"&&e!=t._actionDisabled&&(t._actionDisabled=e),t._actionDisabled},AXEMovie.prototype._frameActionDisabled=null,AXEMovie.prototype.frameActionDisabled=function(e,t){var n=this,r=String(e);typeof t=="boolean"&&(n._frameActionDisabled=n._frameActionDisabled==null?{}:n._frameActionDisabled,n._frameActionDisabled[r]=t);var i=!1;return n._frameActionDisabled!=null&&n._frameActionDisabled.hasOwnProperty(r)&&(i=n._frameActionDisabled[r]),i},AXEMovie.prototype._backToFirst=!1,AXEMovie.prototype.backToFirst=function(e){var t=this;return arguments.length>0&&(t._backToFirst=e),t._backToFirst},AXEMovie.prototype._loop=!0,AXEMovie.prototype.loop=function(e){var t=this;return arguments.length>0&&(t._loop=e),t._loop},AXEMovie.prototype.duration=function(){var e=this;return e.framesCount()/e.frameRate()},AXEMovie.prototype.sounds=null,AXEMovie.prototype.soundBySrc=function(e){var t=this,n=null;return t.sounds!=null&&t.sounds.hasOwnProperty(e)&&(n=t.sounds[e]),n},AXEMovie.prototype.playSound=function(e,t){var n=this,r=n.soundBySrc(e);r==null&&(t=typeof t=="boolean"?t:!1,r=new AXEAudioController(e,t),n.sounds==null&&(n.sounds={}),n.sounds[e]=r),(r.playing()==0||r.loop()==0)&&r.play(0)},AXEMovie.prototype.pauseSound=function(e){var t=this;if(Boolean(e)){if(t.sounds!=null&&t.sounds.hasOwnProperty(e)){var n=t.sounds[e];n!=null&&n.pause()}}else if(t.sounds!=null)for(var r in t.sounds)t.sounds.hasOwnProperty(r)&&t.sounds[r].pause()},AXEMovie.prototype.framesCount=function(){var e=this;return e.frames().length},AXEMovie.prototype.addFramesByURL=function(e,t,n){var r=this;n=isNaN(n)?1:n,t=typeof t=="boolean"?t:!1;var i=r.frames();for(var s=0;s<n;s++){var o=AXEURLUtil.splitURLs(e);t&&(o=o.reverse());for(var u=0;u<o.length;u++){var a=o[u];i.push(AXEAssetsLoader.asset(a))}}},AXEMovie.prototype.delayTimer=null,AXEMovie.prototype.delay=function(e){var t=this;t.clearDelay(),t.stop(),t.delayTimer=window.setTimeout(function(){window.clearTimeout(t.delayTimer),t.clearDelay()},e*1e3)},AXEMovie.prototype.clearDelay=function(){var e=this;isNaN(e.delayTimer)==0&&(window.clearTimeout(e.delayTimer),e.delayTimer=null,e.play())},AXEMovie.prototype.setFramesByURL=function(e){var t=this,n=t.frames().slice(),r=AXEURLUtil.splitURLs(e);for(var i=0;i<r.length;i++){var s=r[i];n.push(AXEAssetsLoader.asset(s))}t.frames(n)},AXEMovie.prototype._frames=null,AXEMovie.prototype.frames=function(e){var t=this;return arguments.length>0&&e!=null&&(t._frames=e.slice(),t.needToRender(!0)),t._frames==null&&(t._frames=[]),t._frames},AXEMovie.prototype._frameRate=24,AXEMovie.prototype.frameRate=function(e){var t=this;return isNaN(e)===!1&&(t._frameRate=e,t.needToRender(!0)),t._frameRate},AXEMovie.prototype.reversing=!1,AXEMovie.prototype.reverse=function(){var e=this,t=e.frames();t.reverse(),e.frames(t),e.reversing=!e.reversing},AXEMovie.prototype.playing=!1,AXEMovie.prototype.play=function(){var e=this;if(e.playing)return;e.playing=!0},AXEMovie.prototype.stop=function(){var e=this;e.playing&&(e.playing=!1)},AXEMovie.prototype.goToAndStop=function(e){var t=this;t.stop(),t._currentFrame=Math.max(0,Math.min(t.framesCount()-1,e)),t.needToRender(!0)},AXEMovie.prototype.goToAndPlay=function(e){var t=this;t.goToAndStop(e),t.play(),t.needToRender(!0)},AXEMovie.prototype._currentFrame=0,AXEMovie.prototype.currentFrame=function(e){var t=this;return isNaN(e)==0&&e!=t._currentFrame&&(t._currentFrame=e,t.needToRender(!0)),Math.floor(t._currentFrame)},AXEMovie.prototype._pauseWhenAnimating=!1,AXEMovie.prototype.pauseWhenAnimating=function(e){var t=this;return arguments.length>0&&e!=t._pauseWhenAnimating&&(t._pauseWhenAnimating=e),t._pauseWhenAnimating},AXEMovie.prototype.update=function(e,t){var n=this;AXEView.prototype.update.call(n,e,t);if(n.playing&&(n.pauseWhenAnimating()===!1||n.animating()===!1)){var r=t*n.frameRate(),i=Math.floor(n._currentFrame+r),s=n.currentFrame(),o=i-s,u=n._currentFrame+r-i;for(var a=0;a<o;a++){var f=n.currentFrame();if(n.actionDisabled()==0&&n.frameActionDisabled(f)==0){var l=n.frameActions(f);if(l!=null)for(var c=0;c<l.length;c++)l[c].execute()}n._currentFrame=n.currentFrame()+1,n._currentFrame==n.framesCount()&&(n.loop()?n._currentFrame=0:(n._currentFrame=n.backToFirst()?0:n.framesCount()-1,n.stop()),n.triggerEvent(new AXEEvent(AXEEvent.END))),n.needToRender(!0),n.triggerEvent(new AXEEvent(AXEEvent.CHANGE));if(n.playing==0)break}n.playing&&(n._currentFrame=n.currentFrame()+u)}}})(),define("movie",["view","assets_loader","url_util","event","audio_ctrl"],function(){});var AXEShape=function(e){if(arguments.length>0&&e instanceof AXEShape)return e};(function(){AXEShape.prototype=new AXEView,AXEShape.prototype.constructor=AXEShape,AXEShape.prototype.className="AXEShape",AXEShape.prototype.dealloc=function(){var e=this;e._path!=null&&(e._path.dealloc(),e._path=null),e._strokeColor!=null&&(e._strokeColor.dealloc(),e._strokeColor=null),e._fillColor!=null&&(e._fillColor.dealloc(),e._fillColor=null),e._gradientFillColor!=null&&(e._gradientFillColor.dealloc(),e._gradientFillColor=null),e._gradientStrokeColor!=null&&(e._gradientStrokeColor.dealloc(),e._gradientStrokeColor=null),AXEView.prototype.dealloc.call(e)},AXEShape.prototype.clone=function(){var e=this,t=new AXEShape;return e.copyProperties(t),t},AXEShape.prototype.copyProperties=function(e){var t=this;AXEView.prototype.copyProperties.call(t,e),AXEShape(e).strokeSize(t.strokeSize()),t.strokeColor()!=null&&AXEShape(e).strokeColor(t.strokeColor().clone()),t.fillColor()!=null&&AXEShape(e).fillColor(t.fillColor().clone()),t.path()!=null&&(AXEShape(e)._path=t.path().clone()),t._gradientFillColor!=null&&(AXEShape(e)._gradientFillColor=t._gradientFillColor),t._gradientStrokeColor!=null&&(AXEShape(e)._gradientStrokeColor=t._gradientStrokeColor)},AXEShape.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e),e.is("[stroke-size]")&&t.strokeSize(parseFloat(e.attr("stroke-size"))),e.is("[stroke-color]")&&t.strokeColor(AXEColor.colorWithString(e.attr("stroke-color"))),e.is("[fill-color]")&&t.fillColor(AXEColor.colorWithString(e.attr("fill-color")));if(e.children("fill-color").length>0){var n=e.children("fill-color"),r=n.attr("type");r==AXEGradientColor.LINEAR?t.gradientFillColor(AXELinearGradientColor.colorWithXML(n)):r==AXEGradientColor.RADIAL&&t.gradientFillColor(AXERadialGradientColor.colorWithXML(n))}if(e.children("stroke-color").length>0){var i=e.children("stroke-color"),s=i.attr("type");s==AXEGradientColor.LINEAR?t.gradientStrokeColor(AXELinearGradientColor.colorWithXML(i)):s==AXEGradientColor.RADIAL&&t.gradientStrokeColor(AXERadialGradientColor.colorWithXML(i))}var o=e.children("path");if(o.length>0){var u=$.trim(o.text());t.path().clearCommands(),t.path().addCommand(u)}},AXEShape.prototype._strokeSize=1,AXEShape.prototype.strokeSize=function(e){var t=this;return isNaN(e)==0&&t._strokeSize!=e&&(t._strokeSize=e,t.needToRender(!0)),t._strokeSize},AXEShape.prototype._strokeColor=null,AXEShape.prototype.strokeColor=function(e){var t=this;return arguments.length>0&&t._strokeColor!=e&&(t._strokeColor=e,t.gradientStrokeColor(null),t.needToRender(!0)),t._strokeColor},AXEShape.prototype._fillColor=null,AXEShape.prototype.fillColor=function(e){var t=this;return arguments.length>0&&t._fillColor!=e&&(t._fillColor=e,t.gradientFillColor(null),t.needToRender(!0)),t._fillColor},AXEShape.prototype._gradientStrokeColor=null,AXEShape.prototype.gradientStrokeColor=function(e){var t=this;return arguments.length>0&&e!=t._gradientStrokeColor&&(t._gradientStrokeColor=e,t.strokeColor(null),t.needToRender(!0)),t._gradientFillColor},AXEShape.prototype._gradientFillColor=null,AXEShape.prototype.gradientFillColor=function(e){var t=this;return arguments.length>0&&e!=t._gradientFillColor&&(t._gradientFillColor=e,t.fillColor(null),t.needToRender(!0)),t._gradientFillColor},AXEShape.prototype._path=null,AXEShape.prototype.path=function(){var e=this;return e._path==null&&(e._path=new AXEPath,e._path.addListener(AXEEvent.CHANGE,e,e.onPathChanged)),e._path},AXEShape.prototype.onPathChanged=function(){var e=this;e.needToRender(!0)}})(),define("shape",["view","color","path"],function(){});var AXETextAlign={};(function(){AXETextAlign.LEFT="left",AXETextAlign.CENTER="center",AXETextAlign.RIGHT="right"})(),define("text_align",function(){});var AXETextVerticalAlign={};(function(){AXETextVerticalAlign.TOP="top",AXETextVerticalAlign.MIDDLE="middle",AXETextVerticalAlign.BOTTOM="bottom",AXETextVerticalAlign.ALPHABETIC="alphabetic",AXETextVerticalAlign.IDEOGRAPHIC="ideographic",AXETextVerticalAlign.HANGING="hanging"})(),define("text_v_align",function(){});var AXEText=function(e){if(arguments.length>0&&e instanceof AXEText)return e};(function(){AXEText.prototype=new AXEView,AXEText.prototype.constructor=AXEText,AXEText.prototype.className="AXEText",AXEText.prototype.dealloc=function(){var e=this;AXEView.prototype.dealloc.call(e),e._color!=null&&(e._color.dealloc(),e._color=null),e._gradientColor!=null&&(e._gradientColor.dealloc(),e._gradientColor=null)},AXEText.prototype.clone=function(){var e=this,t=new AXEText;return e.copyProperties(t),t},AXEText.prototype.copyProperties=function(e){var t=this;AXEView.prototype.copyProperties.call(t,e),t.color()!=null&&AXEText(e).color(t.color()),t.font()!=null&&AXEText(e).font(t.font()),AXEText(e).lineHeight(t.lineHeight()),AXEText(e).wordWrap(t.wordWrap()),AXEText(e).size(t.size()),AXEText(e).style(t.style()),AXEText(e).textAlign(t.textAlign()),AXEText(e).textVAlign(t.textVAlign()),AXEText(e).text(t.text()),AXEText(e).mergeLastLine(t.mergeLastLine()),AXEText(e).underline(t.underline()),AXEText(e).autoSize(t.autoSize()),AXEText(e).shrink(t.shrink()),AXEText(e).fillRepeat(t.fillRepeat()),AXEText(e)._initText=t._initText,t._gradientColor!=null&&AXEText(e).gradientColor(t.gradientColor().clone())},AXEText.prototype.updatePropsFromXML=function(e){var t=this;AXEView.prototype.updatePropsFromXML.call(t,e),e.is("[auto-size]")?t.autoSize(e.attr("auto-size").toLowerCase()=="true"):t.autoSize(!1),e.is("[shrink]")?t.shrink(e.attr("shrink").toLowerCase()=="true"):t.shrink(!1),e.is("[merge-last-line]")&&t.mergeLastLine(parseInt(e.attr("merge-last-line"),10)),e.is("[color]")&&t.color(AXEColor.colorWithString(e.attr("color"))),e.is("[fill-repeat]")?t.fillRepeat(e.attr("fill-repeat").toLowerCase()=="true"):t.fillRepeat(!1);if(e.children("color").length>0){var n=e.children("color"),r=n.attr("type");r==AXEGradientColor.LINEAR?t.gradientColor(AXELinearGradientColor.colorWithXML(n)):r==AXEGradientColor.RADIAL&&t.gradientColor(AXERadialGradientColor.colorWithXML(n))}e.is("[font]")&&t.font(e.attr("font")),e.is("[size]")&&t.size(parseFloat(e.attr("size"))),e.is("[style]")&&t.style(e.attr("style")),e.is("[text-align]")&&t.textAlign(e.attr("text-align")),e.is("[text-v-align]")&&t.textVAlign(e.attr("text-v-align")),e.is("[word-wrap]")&&t.wordWrap(e.attr("word-wrap")=="true"),e.is("[line-height]")&&t.lineHeight(parseFloat(e.attr("line-height"))),e.is("[underline]")&&t.underline(e.attr("underline")=="true");var i=$.trim(e.text());t.text(i),t._initText=i},AXEText.prototype._initText=null,AXEText.prototype.initText=function(){var e=this;return e._initText},AXEText.prototype._underline=!1,AXEText.prototype.underline=function(e){var t=this;return typeof e=="boolean"&&e!=t._underline&&(t._underline=e,t.needToRender(!0)),t._underline},AXEText.prototype._mergeLastLine=0,AXEText.prototype.mergeLastLine=function(e){var t=this;return isNaN(e)==0&&t._mergeLastLine!=Math.abs(e)&&(t._mergeLastLine=Math.abs(e),t.needToRender(!0)),t._mergeLastLine},AXEText.prototype._lineHeight=0,AXEText.prototype.lineHeight=function(e){var t=this;return arguments.length>0&&e!=t._lineHeight&&(t._lineHeight=e,t.needToRender(!0)),t._lineHeight},AXEText.prototype._wordWrap=!1,AXEText.prototype.wordWrap=function(e){var t=this;return arguments.length>0&&e!=t._wordWrap&&(t._wordWrap=e,t.needToRender(!0)),t._wordWrap},AXEText.prototype._fillRepeat=!1,AXEText.prototype.fillRepeat=function(e){var t=this;return typeof e=="boolean"&&e!=t._fillRepeat&&(t._fillRepeat=e,t.needToRender(!0)),t._fillRepeat},AXEText.prototype._gradientColor=null,AXEText.prototype.gradientColor=function(e){var t=this;return arguments.length>0&&e!=t._gradientColor&&(t._gradientColor=e,t.color(null),t.needToRender(!0)),t._gradientColor},AXEText.prototype._color=null,AXEText.prototype.color=function(e){var t=this;return arguments.length>0&&e!=t._color&&(t._color=e,t.gradientColor(null),t.needToRender(!0)),t._color},AXEText.prototype._font="sans-serif",AXEText.prototype.font=function(e){var t=this;return arguments.length>0&&typeof e=="string"&&t._font!=e&&(t._font=e,t.needToRender(!0)),t._font},AXEText.prototype._size=12,AXEText.prototype.size=function(e){var t=this;return arguments.length>0&&isNaN(parseFloat(e))===!1&&parseFloat(e)!=t._size&&(t._size=parseFloat(e),t.needToRender(!0)),t._size},AXEText.prototype._style=null,AXEText.prototype.style=function(e){var t=this;return arguments.length>0&&typeof e=="string"&&e!=t._style&&(t._style=e,t.needToRender(!0)),t._style},AXEText.prototype.textStyle=function(){var e=this,t=[];return e._style!=null&&t.push(e._style),e._size!=null&&t.push(e._size+"px"),e._font!=null&&t.push(e._font),t.join(" ")},AXEText.prototype._textVAlign=AXETextVerticalAlign.ALPHABETIC,AXEText.prototype.textVAlign=function(e){var t=this;return arguments.length>0&&typeof e=="string"&&t._textVAlign!=e&&(t._textVAlign=e,t.needToRender(!0)),t._textVAlign},AXEText.prototype._textAlign=AXETextAlign.LEFT,AXEText.prototype.textAlign=function(e){var t=this;return arguments.length>0&&typeof e=="string"&&e!=t._textAlign&&(t._textAlign=e,t.needToRender(!0)),t._textAlign},AXEText.prototype._text="",AXEText.prototype.text=function(e){var t=this;return arguments.length>0&&t._text!=e&&(t._text=String(e),t.needToRender(!0)),t._text},AXEText.prototype._autoSize=!1,AXEText.prototype.autoSize=function(e){var t=this;return typeof e=="boolean"&&e!=t._autoSize&&(t._autoSize=e,t.needToRender(!0)),t._autoSize},AXEText.prototype._shrink=!1,AXEText.prototype.shrink=function(e){var t=this;return typeof e=="boolean"&&e!=t._shrink&&(t._shrink=e,t.needToRender(!0)),t._shrink},AXEText.prototype.computeTextWidth=function(){var e=this,t=$("<div></div>");t.css("white-space","nowrap"),t.css("display","inline-block"),t.css("line-height",e.height()+"px"),t.css("font-family",e.font()+"px"),t.css("font-size",e.size()+"px"),t.css("font-style",e.style()),t.css("width","auto"),t.text(e.text()),t.css("opacity",0),$("body").append(t);var n=t.width();return n},AXEText.prototype.computeTextHeight=function(){var e=this,t=$("<div></div>");t.css("line-height",e.lineHeight()+"px"),t.css("font-family",e.font()+"px"),t.css("font-size",e.size()+"px"),t.css("font-style",e.style()),t.css("height","auto"),t.width(e.width()),t.text(e.text()),t.css("opacity",0),$("body").append(t);var n=t.height();return t.remove(),n}})(),define("text",["view","color","text_align","text_v_align"],function(){});var AXEVideo=function(e){if(arguments.length>0&&e instanceof AXEVideo)return e},AXERenderMode={CANVAS:"canvas",VIDEO_TAG:"video_tag"};(function(){AXEVideo.prototype=new AXEViewContainer,AXEVideo.prototype.constructor=AXEVideo,AXEVideo.prototype.changeRenderMode=function(){var e=this;e.renderMode()==AXERenderMode.CANVAS?(e.videoRender().bitmap(e.$video()[0]),e.$html(null)):e.renderMode()==AXERenderMode.VIDEO_TAG&&(e.videoRender().$html(e.$video()),e.videoRender().bitmap(null)),e.needToRender(!0)},AXEVideo.prototype.dealloc=function(){var e=this;e.destroy(),AXEViewContainer.prototype.dealloc.call(e)},AXEVideo.prototype.destroy=function(){var e=this;e._videoPath=null,e._posterPath=null,e._$video!=null&&(e._$video[0].pause(),e._$video.off(),e._$video=null)},AXEVideo.prototype.clone=function(){var e=this,t=new AXEVideo;return e.copyProperties(t),t},AXEVideo.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e);var n=AXEVideo(e);t._videoPath!=null&&n.videoPath(t._videoPath),t._posterPath!=null&&n.posterPath(t._posterPath),n.loop(t.loop()),n.renderMode(t.renderMode())},AXEVideo.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),e.is("[video]")&&t.videoPath(e.attr("video")),e.is("[poster]")&&t.posterPath(e.attr("poster")),e.is("[render]")&&t.renderMode(AXERenderMode[e.attr("render").toUpperCase()]),e.is("[loop]")&&t.loop(e.attr("loop").toLowerCase()=="true")},AXEVideo.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.playing()&&n.renderMode()==AXERenderMode.CANVAS&&n.needToRender(!0)},AXEVideo.prototype._videoRender=null,AXEVideo.prototype.videoRender=function(){var e=this;return e._videoRender==null&&(e._videoRender=new AXEBitmap,e._$video!=null&&(e._videoRender.width(e._$video[0].videoWidth),e._videoRender.height(e._$video[0].videoHeight)),e._videoRender.scaleMode(AXEScaleMode.extraFit),e.addSubView(e._videoRender),e.changeRenderMode()),e._videoRender},AXEVideo.prototype._posterRener=null,AXEVideo.prototype.posterRender=function(){var e=this;if(e._posterRener==null){e._posterRener=new AXEBitmap,e._posterRener.widthPercent(1),e._posterRener.heightPercent(1),e.insertSubViewAt(e._posterRener,0);if(e._posterPath!=null){var t=AXEAssetsLoader.asset(e._posterPath);e._posterRener.bitmap(t)}}return e._posterRener},AXEVideo.prototype._$video=null,AXEVideo.prototype.$video=function(){var e=this;if(e._$video==null&&e._videoPath!=null){e._$video=$("<video></video>"),e._$video.attr("width",1),e._$video.attr("height",1),e._$video.attr("x-webkit-airplay","allow"),e._$video.attr("x5-video-player-type","h5"),e._$video.attr("x5-video-player-fullscreen","true"),e._$video.attr("webkit-playsinline","true"),e._$video.attr("playsinline",!0),e._$video.attr("preload","meta");var t;e.renderMode()==AXERenderMode.CANVAS&&(t=AXEAssetsLoader.asset(e._videoPath)),Boolean(t)==0&&(t=AXEURLUtil.assetLoadURL(AXELoaderConfig.baseURI,e._videoPath,AXELoaderConfig.version));var n=$("<source/>");n.attr("src",t),n.attr("type","video/mp4"),e._$video.append(n),e._$video.on("loadedmetadata",function(t){e._$video.attr("width",e._$video[0].videoWidth),e._$video.attr("height",e._$video[0].videoHeight),e._videoRender!=null&&(e._videoRender.width(e._$video[0].videoWidth),e._videoRender.height(e._$video[0].videoHeight))}),e._$video.on("playing",function(t){e._buffering=!1,e._playing=!0,e.triggerEvent(new AXEEvent(AXEEvent.PLAY))}),e._$video.on("waiting",function(t){e._buffering=!0}),e._$video.on("pause",function(t){e._playing=!1,e.triggerEvent(new AXEEvent(AXEEvent.PAUSE))}),e._$video.on("ended",function(t){e._playing=!1,e.triggerEvent(new AXEEvent(AXEEvent.ENDED)),e.loop()&&e.play(0)}),e.changeRenderMode()}return e._$video},AXEVideo.prototype._playing=!1,AXEVideo.prototype.playing=function(){var e=this;return e._playing},AXEVideo.prototype._videoPath=null,AXEVideo.prototype.videoPath=function(e){var t=this;return typeof e=="string"&&e!=t._videoPath&&(t._$video!=null&&(t._$video[0].pause(),t._$video.off(),t._$video=null),t._videoPath=e),t._videoPath},AXEVideo.prototype._renderMode=AXERenderMode.CANVAS,AXEVideo.prototype.renderMode=function(e){var t=this;return typeof e=="string"&&e!=t._renderMode&&(e==AXERenderMode.CANVAS||e==AXERenderMode.VIDEO_TAG)&&(t._renderMode=e,t.changeRenderMode()),t._renderMode},AXEVideo.prototype._posterPath=null,AXEVideo.prototype.posterPath=function(e){var t=this;if(typeof e=="string"&&e!=t._posterPath){t._posterPath=e;if(t._posterRener!=null){var n=AXEAssetsLoader.asset(e);t.posterRender().bitmap(n)}}return t._posterPath},AXEVideo.prototype.play=function(e){var t=this;if(typeof e=="number")try{t.$video()[0].currentTime=e}catch(n){}t.$video()[0].play()},AXEVideo.prototype.pause=function(){var e=this;e.$video()!=null&&e.$video()[0].pause()},AXEVideo.prototype.duration=function(){var e=this,t=0;return e.$video()!=null&&(t=e.$video()[0].duration),t},AXEVideo.prototype.currentTime=function(e){var t=this;isNaN(e)==0&&t.$video()!=null&&(t.$video()[0].currentTime=e,t.needToRender(!0));var n=0;return t.$video()!=null&&(n=t.$video()[0].currentTime),n},AXEVideo.prototype._buffering=!1,AXEVideo.prototype.buffering=function(){var e=this;return e._buffering},AXEVideo.prototype._loop=!1,AXEVideo.prototype.loop=function(e){var t=this;return typeof e=="boolean"&&e!=t._loop&&(t._loop=e),t._loop}})(),define("video",["view_container","bitmap","assets_loader"],function(){});var AXEButtonState={};(function(){AXEButtonState.NORMAL_STATE=0,AXEButtonState.DOWN_STATE=1,AXEButtonState.UP_STATE=2})(),define("button_state",function(){});var AXEButton=function(e){if(arguments.length>0&&e instanceof AXEButton)return e};(function(){AXEButton.prototype=new AXEViewContainer,AXEButton.prototype.constructor=AXEButton,AXEButton.prototype.normalStateView=null,AXEButton.prototype.clickStateView=null,AXEButton.prototype.disableStateView=null,AXEButton.prototype.clone=function(){var e=this,t=new AXEButton;return e.copyProperties(t),t},AXEButton.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXEButton(e).initButton(),AXEButton(e).switchMode(t.switchMode())},AXEButton.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),t.initButton(),e.is("[switch-mode]")&&t.switchMode(e.attr("switch-mode")=="true")},AXEButton.prototype.onAddToStage=function(){var e=this;AXEViewContainer.prototype.onAddToStage.call(e),e.switchMode()==0&&e.buttonState(AXEButtonState.NORMAL_STATE)},AXEButton.prototype.initButton=function(){var e=this;e.normalStateView=e.subViewByName("normal"),e.clickStateView=e.subViewByName("click"),e.disableStateView=e.subViewByName("disable"),e.updateButtonView(),AXEEnv.os.isTouchDevice?(e.addListener(AXETouchEvent.TOUCH_START,e,e.onButtonTouchStart),e.addListener(AXETouchEvent.TOUCH_END,e,e.onButtonTouchEnd)):(e.addListener(AXETouchEvent.ROLL_OVER,e,e.onButtonTouchStart),e.addListener(AXETouchEvent.ROLL_OUT,e,e.onButtonTouchEnd))},AXEButton.prototype.onButtonTouchStart=function(){var e=this;e.switchMode()===!1&&e.buttonState(AXEButtonState.DOWN_STATE)},AXEButton.prototype.onButtonTouchEnd=function(){var e=this;e.switchMode()===!1?e.buttonState(AXEButtonState.NORMAL_STATE):(e.buttonState()==AXEButtonState.NORMAL_STATE?e.buttonState(AXEButtonState.DOWN_STATE):e.buttonState(AXEButtonState.NORMAL_STATE),e.triggerEvent(new AXEEvent(AXEEvent.CHANGE)))},AXEButton.prototype._switchMode=!1,AXEButton.prototype.switchMode=function(e){var t=this;return typeof e=="boolean"&&e!=t._switchMode&&(t._switchMode=e,t.buttonState(AXEButtonState.NORMAL_STATE)),t._switchMode},AXEButton.prototype._buttonState=AXEButtonState.NORMAL_STATE,AXEButton.prototype.buttonState=function(e){var t=this;return isNaN(e)===!1&&(t._buttonState=e,t.updateButtonView()),t._buttonState},AXEButton.prototype.enabled=function(e){var t=this,n=AXEViewContainer.prototype.enabled.call(t,e);return typeof e=="boolean"&&t.updateButtonView(),n},AXEButton.prototype.resetEvents=function(){var e=this;AXEViewContainer.prototype.resetEvents.call(e),e.switchMode()==0&&e.buttonState(AXEButtonState.NORMAL_STATE)},AXEButton.prototype.updateButtonView=function(){var e=this;e.switchMode()?(e.disableStateView!=null&&e.disableStateView.visible(!1),e.normalStateView!=null&&e.normalStateView.visible(e.buttonState()==AXEButtonState.NORMAL_STATE),e.clickStateView!=null&&e.clickStateView.visible(e.buttonState()==AXEButtonState.DOWN_STATE)):(e.disableStateView!=null&&e.disableStateView.visible(e.enabled()==0),e.normalStateView!=null&&(e.enabled()?e.normalStateView.visible(e.buttonState()==AXEButtonState.NORMAL_STATE):e.normalStateView.visible(e.disableStateView==null)),e.clickStateView!=null&&e.clickStateView.visible(e.enabled()&&e.buttonState()==AXEButtonState.DOWN_STATE))}})(),define("button",["env","view_container","button_state","event_target","touch_event","event"],function(){});var AXEStackView=function(e){if(e instanceof AXEStackView)return e};(function(){var e={};e.itemsCount=function(e){return 0},e.itemByIndex=function(e,t){return null},e.itemSize=function(e){return new AXEVec2},AXEStackView.prototype=new AXEViewContainer,AXEStackView.prototype.constructor=AXEStackView,AXEStackView.prototype.needReload=!1,AXEStackView.prototype.alphaCurve=function(e){var t=.2;return 2*e*(1-e)*t+Math.pow(e,2)},AXEStackView.prototype.scaleCurve=function(e){var t=.48;return 2*e*(1-e)*t+Math.pow(e,2)},AXEStackView.prototype.xCurve=function(e){var t=.35;return 2*e*(1-e)*t+Math.pow(e,2)},AXEStackView.prototype.itemY=function(e,t){var n=this;return(n.height()-e.y*t)/2},AXEStackView.prototype.renderStacks=function(){var e=this,t=Math.floor(e.countPerPage()/2),n=e.stackIndex()-t-1;n=n>=0?Math.ceil(n):Math.floor(n);var r=e.stackIndex()+t+1;r=r>=0?Math.ceil(r):Math.floor(r);var i=[];for(var s=n;s<=r;s++){var o=Math.abs(s-e.stackIndex()),u=1;e.minOpacity()<1&&(o>t+1?u=e.minOpacity():u=e.minOpacity()+(1-e.minOpacity())*e.alphaCurve((t-o+1)/(t+1)));var a=1;e.minScale()<1&&(o>t+1?a=e.minScale():a=e.minScale()+(1-e.minScale())*e.scaleCurve((t-o+1)/(t+1)));var f=e.dataSource().itemSize(e),l=e.itemY(f,a),c=e.width()/2,h=s!=e.stackIndex()?o/(s-e.stackIndex()):0;o>t+1?c=e.width()/2+h*(e.width()/2-e.minItemX())-f.x*a/2:c=e.width()/2+h*(e.width()/2-e.minItemX())*(1-e.xCurve((t-o+1)/(t+1)))-f.x*a/2;var p=e.dataSource().itemsCount(e),d=s%p;d<0&&(d+=p);var v=e.dataSource().itemByIndex(e,d);v.viewData().stackIndex=s,v.alpha(u),v.matrix(new AXEMat3(a,0,0,a,c,l)),i.push(v)}e.eachSubView(function(e,t){var n=!1;for(var r=0;r<i.length;r++)if(t==i[r]){n=!0;break}n==0&&t.remove()});for(var m=0;m<i.length;m++){var g=!1,y=e.subViews().slice();for(var b=0;b<y.length;b++)if(i[m]==y[b]){g=!0;break}g==0&&e.addSubView(i[m])}var w;do{w=0;for(var E=0;E<e.subViews().length-1;E++){var S=e.subViewByIndex(E),x=S.rect(e),T=Math.abs(x.x+x.width/2-e.width()/2),N=e.subViewByIndex(E+1),C=N.rect(e),k=Math.abs(C.x+C.width/2-e.width()/2);T<k&&(e.swapSubViewsByIndex(E,E+1),w++)}}while(w>0)},AXEStackView.prototype.touching=!1,AXEStackView.prototype.touchStartX=0,AXEStackView.prototype.startIndex=0,AXEStackView.prototype.onStackTouchStart=function(e){var t=this;t.touching=!0,t.stopAnimation(),t.reduceAcc=0,t.touchStartX=e.touches[0].x,t.startIndex=t.stackIndex(),t.addListener(AXETouchEvent.TOUCH_MOVE,t,t.onStackTouchMove),t.addListener(AXETouchEvent.TOUCH_END,t,t.onStackTouchEnd)},AXEStackView.prototype.onStackTouchMove=function(e){var t=this,n=e.touches[0].x-t.touchStartX;t.stackIndex(t.startIndex-n/t.width()*t.countPerPage())},AXEStackView.prototype.onStackTouchEnd=function(){var e=this;if(e.moveSpeed!=0||e.stackIndex()!=Math.floor(e.stackIndex())){var t=(0-e.moveSpeed)/e.REDUCE_DURATION,n=e.stackIndex()+e.moveSpeed*e.REDUCE_DURATION+t*Math.pow(e.REDUCE_DURATION,2)*.5;e.desIndex=Math.round(n),e.reduceAcc=(e.desIndex-e.stackIndex()-e.moveSpeed*e.REDUCE_DURATION)/(Math.pow(e.REDUCE_DURATION,2)*.5),e.reduceElapse=0,e.reduceSpeed=e.moveSpeed,e.reduceStartIndex=e.stackIndex()}else e.reduceAcc=0;e.touching=!1,e.removeListener(AXETouchEvent.TOUCH_MOVE,e,e.onStackTouchMove),e.removeListener(AXETouchEvent.TOUCH_END,e,e.onStackTouchEnd)},AXEStackView.prototype.clone=function(){var e=this,t=new AXEStackView;return e.copyProperties(t),t},AXEStackView.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXEStackView(e).countPerPage(t.countPerPage()),AXEStackView(e).minOpacity(t.minOpacity()),AXEStackView(e).minScale(t.minScale()),AXEStackView(e).minItemX(t.minItemX()),AXEStackView(e).swipable(t.swipable())},AXEStackView.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),e.is("[count]")&&t.countPerPage(parseInt(e.attr("count"),10)),e.is("[min-opacity]")&&t.minOpacity(parseFloat(e.attr("min-opacity"))),e.is("[min-scale]")&&t.minScale(parseFloat(e.attr("min-scale"))),e.is("[min-x]")&&t.minItemX(parseFloat(e.attr("min-x"))),e.is("[swipable]")?t.swipable(e.attr("swipable").toLowerCase()=="true"):t.swipable(!1)},AXEStackView.prototype.moveSpeed=0,AXEStackView.prototype.MAX_MOVE_SPEED=10,AXEStackView.prototype.lastStackIndex=0,AXEStackView.prototype.reduceAcc=0,AXEStackView.prototype.reduceElapse=0,AXEStackView.prototype.REDUCE_DURATION=.5,AXEStackView.prototype.desIndex=0,AXEStackView.prototype.reduceSpeed=0,AXEStackView.prototype.reduceStartIndex=0,AXEStackView.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.moveSpeed=Math.min(n.MAX_MOVE_SPEED,(n.stackIndex()-n.lastStackIndex)/t),n.lastStackIndex=n.stackIndex(),n.reduceAcc!=0&&(n.reduceElapse<n.REDUCE_DURATION?(n.reduceElapse+=t,n.stackIndex(n.reduceStartIndex+n.reduceSpeed*n.reduceElapse+n.reduceAcc*Math.pow(n.reduceElapse,2)*.5)):(n.stackIndex(n.desIndex),n.reduceAcc=0)),n.dataSource().itemsCount(n)>0&&(n.needReload||n.needToRender())&&(n.needReload=!1,n.renderStacks())},AXEStackView.prototype.animate=function(e,t,n,r,i){var s=this;s.reduceAcc=0,AXEViewContainer.prototype.animate.call(s,e,t,n,r,i)},AXEStackView.prototype.stopAnimation=function(e){var t=this;t.reduceAcc=0,AXEViewContainer.prototype.stopAnimation.call(t,e)},AXEStackView.prototype._countPerPage=5,AXEStackView.prototype.countPerPage=function(e){var t=this;return isNaN(e)==0&&e%2>0&&e!=t._countPerPage&&(t._countPerPage=e,t.needReload=!0),t._countPerPage},AXEStackView.prototype._stackIndex=0,AXEStackView.prototype.stackIndex=function(e){var t=this;return isNaN(e)==0&&e!=t._stackIndex&&(t._stackIndex=e,t.needReload=!0),t._stackIndex},AXEStackView.prototype._dataSource=null,AXEStackView.prototype.dataSource=function(t){var n=this;return arguments.length>0&&t!=n._dataSource&&(n._dataSource=t,n.needReload=!0),n._dataSource==null&&(n._dataSource=e),n._dataSource},AXEStackView.prototype.reloadData=function(){var e=this;e.needReload=!0},AXEStackView.prototype._minScale=.36,AXEStackView.prototype.minScale=function(e){var t=this;return isNaN(e)==0&&e!=t._minScale&&(t._minScale=e,t.needReload=!0),t._minScale},AXEStackView.prototype._minOpacity=0,AXEStackView.prototype.minOpacity=function(e){var t=this;return isNaN(e)==0&&e!=t._minOpacity&&(t._minOpacity=e,t.needReload=!0),t._minOpacity},AXEStackView.prototype._minItemX=59,AXEStackView.prototype.minItemX=function(e){var t=this;return isNaN(e)==0&&t._minItemX!=e&&(t._minItemX=e,t.needReload=!0),t._minItemX},AXEStackView.prototype._swipable=!1,AXEStackView.prototype.swipable=function(e){var t=this;return typeof e=="boolean"&&e!=t._swipable&&(t._swipable=e,t._swipable?t.addListener(AXETouchEvent.TOUCH_START,t,t.onStackTouchStart):(t.removeListener(AXETouchEvent.TOUCH_START,t,t.onStackTouchStart),t.touching&&t.onStackTouchEnd())),t._swipable}})(),define("stack_view",["view_container","mat3","vec2","touch_event"],function(){});var AXEScrollBarStyle={};(function(){AXEScrollBarStyle.AUTO=0,AXEScrollBarStyle.HIDDEN=1,AXEScrollBarStyle.VISIBLE=2})(),define("scroll_bar_style",function(){});var AXEScrollBar=function(e){if(typeof e=="boolean"){var t=this;t._isVertical=e,t.buildView()}};(function(){AXEScrollBar.prototype=new AXEViewContainer,AXEScrollBar.prototype.constructor=AXEScrollBar,AXEScrollBar.prototype.BAR_SIZE=4,AXEScrollBar.prototype.BAR_MARGIN=2,AXEScrollBar.prototype.BAR_COLOR=AXEColor.colorWithString("#00000066"),AXEScrollBar.prototype.MIN_BAR_SIZE=10,AXEScrollBar.prototype.barView=null,AXEScrollBar.prototype.buildView=function(){var e=this;e.barView=new AXEView,e.barView.bgColor(e.BAR_COLOR),e.barView.cornerRadius(e.BAR_SIZE/2),e.barView.clip(!0),e.isVertical()?(e.width(e.BAR_SIZE+2*e.BAR_MARGIN),e.barView.width(e.BAR_SIZE),e.barView.x(e.BAR_MARGIN)):(e.height(e.BAR_SIZE+2*e.BAR_MARGIN),e.barView.height(e.BAR_SIZE),e.barView.y(e.BAR_MARGIN)),e.addSubView(e.barView)},AXEScrollBar.prototype.renderSlider=function(){var e=this,t,n,r,i;if(e.isVertical()){e.height(e.scrollView().height()),e.x(e.scrollView().width()-e.width()),t=e.scrollView().contentSize().y,n=e.scrollView().height(),r=e.height()-e.BAR_MARGIN*2,i=Math.max(r*(n/t),e.MIN_BAR_SIZE);var s=e.scrollView().offset().y;s=Math.max(0,Math.min(s,e.scrollView().contentSize().y-e.scrollView().height())),e.barView.height(i),e.barView.y((e.height()-2*e.BAR_MARGIN)*(s/e.scrollView().contentSize().y))}else{e.width(e.scrollView().width()),e.y(e.scrollView().height()-e.height()),t=e.scrollView().contentSize().x,n=e.scrollView().width(),r=e.width()-e.BAR_MARGIN*2,i=Math.max(r*(n/t),e.MIN_BAR_SIZE);var o=e.scrollView().offset().x;o=Math.max(0,Math.min(o,e.scrollView().contentSize().x-e.scrollView().width())),e.barView.width(i),e.barView.x((e.width()-2*e.BAR_MARGIN)*(o/e.scrollView().contentSize().x))}},AXEScrollBar.prototype.barNeedRender=!1,AXEScrollBar.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.barNeedRender&&n.scrollView()!=null&&(n.renderSlider(),n.barNeedRender=!1)},AXEScrollBar.prototype._isVertical=!1,AXEScrollBar.prototype.isVertical=function(e){var t=this;return typeof e=="boolean"&&e!=t._isVertical&&(t._isVertical=e,t.barNeedRender=!0),t._isVertical},AXEScrollBar.prototype._scrollView=null,AXEScrollBar.prototype.scrollView=function(e){var t=this;return arguments.length>0&&e!=t._scrollView&&(t._scrollView=e,t.barNeedRender=!0),t._scrollView},AXEScrollBar.prototype.updateScroll=function(){var e=this;e.barNeedRender=!0},AXEScrollBar.prototype.hidden=!1,AXEScrollBar.prototype.show=function(){var e=this;e.hidden&&(e.hidden=!1,e.stopAnimation(),e.visible(!0),e.alpha(1))},AXEScrollBar.prototype.hide=function(){var e=this;e.hidden==0&&(e.hidden=!0,e.animate(.4,{alpha:0},AXEEasing.Cubic.easeOut,null,function(){e.visible(!1)}))}})(),define("scroll_bar",["view_container","shape","color","circle","rect","easing"],function(){});var AXEScrollView=function(e){var t=this;if(arguments.length>0&&e instanceof AXEScrollView)return e};(function(){var e=function(){};e.prototype.scrollBar=function(e,t){return null},e.prototype.onScrollViewStartScroll=function(e){},e.prototype.onScrollViewScrolling=function(e){},e.prototype.onScrollViewEndScroll=function(e){},e.prototype.onScrollViewStartEasing=function(e){},AXEScrollView.prototype=new AXEViewContainer,AXEScrollView.prototype.constructor=AXEScrollView,AXEScrollView.prototype.scrolling=!1,AXEScrollView.prototype.delegate=null,AXEScrollView.prototype.dealloc=function(){var e=this;e._contentView!=null&&(e._contentView.dealloc(),e._contentView=null),e._hScrollBar!=null&&(e._hScrollBar.remove(),e._hScrollBar.dealloc(),e._hScrollBar=null),e._vScrollBar!=null&&(e._vScrollBar.remove(),e._vScrollBar.dealloc(),e._vScrollBar=null),AXEViewContainer.prototype.dealloc.call(e)},AXEScrollView.prototype.clone=function(){var e=this,t=new AXEScrollView;return e.copyProperties(t),t},AXEScrollView.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXEScrollView(e).empty(),t._contentView!=null&&(AXEScrollView(e)._contentView=t._contentView.clone(),AXEScrollView(e).addSubView(t._contentView)),t._hScrollBar!=null&&(AXEScrollView(e)._hScrollBar=t._hScrollBar.clone(),AXEScrollView(e)._hScrollBar.scrollView=e,AXEScrollView(e).addSubView(t._hScrollBar)),t._vScrollBar!=null&&(AXEScrollView(e)._vScrollBar=t._vScrollBar.clone(),AXEScrollView(e)._vScrollBar.scrollView=e,AXEScrollView(e).addSubView(t._vScrollBar)),AXEScrollView(e).offset(t.offset().clone()),AXEScrollView(e).contentSize(t.contentSize().clone()),AXEScrollView(e).paging(t._paging),AXEScrollView(e).bouncing(t._bouncing),AXEScrollView(e).lockHorizontal(t._lockHorizontal),AXEScrollView(e).lockVertical(t._lockVertical),AXEScrollView(e).scrollBarStyle(t._scrollBarStyle),AXEScrollView(e).easing(t._easing),AXEScrollView(e).scrollable(t._scrollable),AXEScrollView(e).resizeable(t._resizeable),AXEScrollView(e).maxScale(t._maxScale),AXEScrollView(e).minScale(t._minScale),AXEScrollView(e).reloadData()},AXEScrollView.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),t.clip(!0);var n=e.children("content");n.length>0&&t.contentView().updatePropsFromXML(n),e.is("[resizeable]")?t.resizeable(e.attr("resizeable").toLowerCase()=="true"):t.resizeable(!1),e.is("[max-scale]")?t.maxScale(parseFloat(e.attr("max-scale"))):t.maxScale(1),e.is("[min-scale]")?t.minScale(parseFloat(e.attr("min-scale"))):t.minScale(1),e.is("[scale]")?t.currentScale(parseFloat(e.attr("scale"))):t.currentScale(1),e.is("[scrollable]")?t.scrollable(e.attr("scrollable").toLowerCase()=="true"):t.scrollable(!1);if(e.is("[offset]")){var r=e.attr("offset").split(","),i=new AXEVec2(parseFloat(r[0]),parseFloat(r[1]));t.offset(i)}if(e.is("[content-size]")){var s=e.attr("content-size").split(","),o=new AXEVec2(parseFloat(s[0]),parseFloat(s[1]));t.contentSize(o)}e.is("[bouncing]")&&t.bouncing(e.attr("bouncing")=="true"),e.is("[paging]")&&t.paging(e.attr("paging")=="true"),e.is("[lock-h]")&&t.lockHorizontal(e.attr("lock-h")=="true"),e.is("[lock-v]")&&t.lockVertical(e.attr("lock-v")=="true"),e.is("[scroll-bar-style]")&&t.scrollBarStyle(AXEScrollBarStyle[e.attr("scroll-bar-style").toUpperCase()]),t.reloadData()},AXEScrollView.prototype.lastOffset=null,AXEScrollView.prototype.currentSpeed=null,AXEScrollView.prototype.easingInitSpeed=null,AXEScrollView.prototype.easingDuration=null,AXEScrollView.prototype.easingAcc=null,AXEScrollView.prototype.desOffset=null,AXEScrollView.prototype.beginEasing=!1,AXEScrollView.prototype.easingStartTs=0,AXEScrollView.prototype.easingStartOffset=null,AXEScrollView.prototype.update=function(e,t){var n=this;if(n.lastOffset!=null){var r=n.offset().clone();if(n.paging()==0||n.lastOffset.equalsTo(r)==0)n.currentSpeed=new AXEVec2,n.currentSpeed.x=(r.x-n.lastOffset.x)/t,n.currentSpeed.y=(r.y-n.lastOffset.y)/t}n.lastOffset=n.offset().clone(),n.beginEasing&&(n.easingStartTs=e,n.easingStartOffset=n.offset().clone(),n.beginEasing=!1);if(n.easingInitSpeed!=null){var i=e-n.easingStartTs,s=n.offset().clone();i<n.easingDuration.x?s.x=n.easingStartOffset.x+n.easingInitSpeed.x*i+n.easingAcc.x*i*i/2:s.x=n.desOffset.x,i<n.easingDuration.y?s.y=n.easingStartOffset.y+n.easingInitSpeed.y*i+n.easingAcc.y*i*i/2:s.y=n.desOffset.y,n.offset(s),i>=n.easingDuration.x&&i>=n.easingDuration.y?n.onViewEndScroll():n.delegate!=null&&n.delegate.onScrollViewScrolling!=null&&n.delegate.onScrollViewScrolling(n)}n.needScale&&function(){var e=n.contentView().matrixTo(n).inversion(),t=e.transformPoint(n.scaleOrigin()),r=new AXEMat3;r.a=n.currentScale(),r.d=n.currentScale(),r.tx=n.scaleOrigin().x-(r.a*t.x+r.c*t.y),r.ty=n.scaleOrigin().y-(r.b*t.x+r.d*t.y),n.contentView().scaleX(r.a),n.contentView().scaleY(r.d);var i=new AXEVec2(-1*r.tx,-1*r.ty);i.x=Math.max(0,Math.min(i.x,n.maxOffset().x)),i.y=Math.max(0,Math.min(i.y,n.maxOffset().y)),n.offset(i),n.needScale=!1}(),n.needReload&&(n.needReload=!1,n.renderView()),AXEViewContainer.prototype.update.call(n,e,t)},AXEScrollView.prototype.width=function(e){var t=this;return isNaN(e)==0&&e!=t.width()&&(AXEViewContainer.prototype.width.call(t,e),t.reloadData()),AXEViewContainer.prototype.width.call(t)},AXEScrollView.prototype.height=function(e){var t=this;return isNaN(e)==0&&e!=t.height()&&(AXEViewContainer.prototype.height.call(t,e),t.reloadData()),AXEViewContainer.prototype.height.call(t)},AXEScrollView.prototype._contentView=null,AXEScrollView.prototype.contentView=function(){var e=this;return e._contentView==null&&(e._contentView=new AXEViewContainer,e.insertSubViewAt(e._contentView,0)),e._contentView},AXEScrollView.prototype._offset=null,AXEScrollView.prototype.offset=function(e){var t=this;return Boolean(e)&&(t._offset==null||e.equalsTo(t._offset)==0)&&(t._offset=e.clone(),t.reloadData()),t._offset==null&&(t._offset=new AXEVec2),t._offset},AXEScrollView.prototype._contentSize=null,AXEScrollView.prototype.contentSize=function(e){var t=this;Boolean(e)&&(Boolean(t._contentSize)==0||e.equalsTo(t._contentSize)==0)&&(t._contentSize=e.clone(),t.reloadData()),t._contentSize==null&&(t._contentSize=new AXEVec2);var n=t._contentSize.clone();return n.x=n.x*t.currentScale(),n.y=n.y*t.currentScale(),n},AXEScrollView.prototype.maxOffset=function(){var e=this,t=new AXEVec2;return t.x=Math.max(0,e.contentSize().x-e.width()),t.y=Math.max(0,e.contentSize().y-e.height()),t},AXEScrollView.prototype._bouncing=!0,AXEScrollView.prototype.bouncing=function(e){var t=this;return typeof e=="boolean"&&t._bouncing!=e&&(t._bouncing=e),t._bouncing},AXEScrollView.prototype._easing=!0,AXEScrollView.prototype.easing=function(e){var t=this;return typeof e=="boolean"&&e==t._easing&&(t._easing=e),t._easing},AXEScrollView.prototype._paging=!1,AXEScrollView.prototype.paging=function(e){var t=this;return typeof e=="boolean"&&t._paging!=e&&(t._paging=e),t._paging},AXEScrollView.prototype._hScrollBar=null,AXEScrollView.prototype.hScrollBar=function(){var e=this;return e._hScrollBar==null&&(e.delegate!=null&&e.delegate.scrollBar!=null&&(e._hScrollBar=e.delegate.scrollBar(e,!1)),e._hScrollBar==null&&(e._hScrollBar=new AXEScrollBar(!1),e.addSubView(e._hScrollBar)),e._hScrollBar.scrollView(e)),e._hScrollBar},AXEScrollView.prototype._vScrollBar=null,AXEScrollView.prototype.vScrollBar=function(){var e=this;return e._vScrollBar==null&&(e.delegate!=null&&e.delegate.scrollBar!=null&&(e._vScrollBar=e.delegate.scrollBar(e,!0)),e._vScrollBar==null&&(e._vScrollBar=new AXEScrollBar(!0),e.addSubView(e._vScrollBar)),e._vScrollBar.scrollView(e)),e._vScrollBar},AXEScrollView.prototype._lockHorizontal=!1,AXEScrollView.prototype.lockHorizontal=function(e){var t=this;return typeof e=="boolean"&&t._lockHorizontal!=e&&(t._lockHorizontal=e),t._lockHorizontal},AXEScrollView.prototype._lockVertical=!1,AXEScrollView.prototype.lockVertical=function(e){var t=this;return typeof e=="boolean"&&t._lockVertical!=e&&(t._lockVertical=e),t._lockVertical},AXEScrollView.prototype._maxScale=1,AXEScrollView.prototype.maxScale=function(e){var t=this;return isNaN(e)==0&&(e=Math.max(1,e),e!=t._maxScale&&(t._maxScale=e)),t._maxScale},AXEScrollView.prototype._minScale=1,AXEScrollView.prototype.minScale=function(e){var t=this;return isNaN(e)==0&&(e=Math.min(1,Math.max(0,e)),e!=t._minScale&&(t._minScale=e)),t._minScale},AXEScrollView.prototype.needScale=!1,AXEScrollView.prototype._scaleOrigin=null,AXEScrollView.prototype.scaleOrigin=function(e){var t=this;return e instanceof AXEVec2&&e!=t._scaleOrigin&&(t._scaleOrigin=e.clone(),t.needScale=!0),t._scaleOrigin},AXEScrollView.prototype._currentScale=1,AXEScrollView.prototype.currentScale=function(e){var t=this;return isNaN(e)==0&&(e=Math.max(t.minScale(),Math.min(t.maxScale(),e)),e!=t._currentScale&&(t._currentScale=e,t.needScale=!0)),t._currentScale},AXEScrollView.prototype.lastScalePoints=null,AXEScrollView.prototype.onViewResizeStart=function(e){var t=this;(t.maxScale()>1||t.minScale()<1)&&e.touches.length>=2&&(t.lastScalePoints=[new AXEVec2(e.touches[0].x,e.touches[0].y),new AXEVec2(e.touches[1].x,e.touches[1].y)],t.addListener(AXETouchEvent.TOUCH_MOVE,t,t.onViewResizing),t.addListener(AXETouchEvent.TOUCH_END,t,t.onViewResizeEnd))},AXEScrollView.prototype.onViewResizing=function(e){var t=this;if(e.touches.length>1){var n=t.lastScalePoints,r=[new AXEVec2(e.touches[0].x,e.touches[0].y),new AXEVec2(e.touches[1].x,e.touches[1].y)],i=new AXEVec2((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2);t.scaleOrigin(i);var s=r[0].distance(r[1])/n[0].distance(n[1]);t.currentScale(t.currentScale()*s),t.lastScalePoints=r}},AXEScrollView.prototype.onViewResizeEnd=function(){var e=this;e.removeListener(AXETouchEvent.TOUCH_MOVE,e,e.onViewResizing),e.removeListener(AXETouchEvent.TOUCH_END,e,e.onViewResizeEnd)},AXEScrollView.prototype.onViewDoubleTap=function(e){var t=this;t.currentScale(1),t.scaleOrigin(new AXEVec2(e.touches[0].x,e.touches[0].y))},AXEScrollView.prototype._resizeable=!1,AXEScrollView.prototype.resizeable=function(e){var t=this;return typeof e=="boolean"&&e!=t._resizeable&&(t._resizeable=e,t._resizeable?(t.addListener(AXETouchEvent.TOUCH_START,t,t.onViewResizeStart),t.addListener(AXETouchEvent.DOUBLE_TAP,t,t.onViewDoubleTap)):(t.removeListener(AXETouchEvent.TOUCH_START,t,t.onViewResizeStart),t.removeListener(AXETouchEvent.DOUBLE_TAP,t,t.onViewDoubleTap))),t._resizeable},AXEScrollView.prototype._scrollable=!1,AXEScrollView.prototype.scrollable=function(e){var t=this;return typeof e=="boolean"&&e!=t._scrollable&&(t._scrollable=e,t._scrollable?t.addListener(AXETouchEvent.TOUCH_START,t,t.onViewScrollBegin):t.removeListener(AXETouchEvent.TOUCH_START,t,t.onViewScrollBegin)),t._scrollable},AXEScrollView.prototype._scrollBarStyle=AXEScrollBarStyle.AUTO,AXEScrollView.prototype.scrollBarStyle=function(e){var t=this;return isNaN(e)==0&&e!=t._scrollBarStyle&&(t._scrollBarStyle=e,t._scrollBarStyle==AXEScrollBarStyle.AUTO?(t._hScrollBar!=null&&(t._hScrollBar.stopAnimation(),t.scrolling&&t.lockHorizontal()==0&&t.contentSize().x>t.width()?t._hScrollBar.show():t._hScrollBar.hide()),t._vScrollBar!=null&&t.lockVertical()==0&&t.contentSize().y>t.height()&&(t._vScrollBar.stopAnimation(),t.scrolling?t._vScrollBar.show():t._vScrollBar.hide())):t._scrollBarStyle==AXEScrollBarStyle.HIDDEN?(t._hScrollBar!=null&&(t._hScrollBar.remove(),t._hScrollBar.dealloc(),t._hScrollBar=null),t._vScrollBar!=null&&(t._vScrollBar.remove(),t._vScrollBar.dealloc(),t._vScrollBar=null)):t._scrollBarStyle==AXEScrollBarStyle.VISIBLE&&(t.lockHorizontal()==0&&t.hScrollBar().show(),t.lockVertical()==0&&t.vScrollBar().show())),t._scrollBarStyle},AXEScrollView.prototype.needReload=!1,AXEScrollView.prototype.reloadData=function(){var e=this;e.needReload=!0},AXEScrollView.prototype.renderView=function(){var e=this;if(e.bouncing()==0){var t=e.offset();t.x=Math.max(0,Math.min(e.contentSize().x-e.width(),t.x)),t.y=Math.max(0,Math.min(e.contentSize().y-e.height(),t.y))}e.lockHorizontal()&&(e.offset().x=0),e.lockVertical()&&(e.offset().y=0),e._contentView!=null&&(e._contentView.width(e.contentSize().x),e._contentView.height(e.contentSize().y),e._contentView.x(-1*e.offset().x),e._contentView.y(-1*e.offset().y)),e._hScrollBar!=null&&e._hScrollBar.updateScroll(e),e._vScrollBar!=null&&e._vScrollBar.updateScroll(e)},AXEScrollView.prototype.lastTouch=null,AXEScrollView.prototype.figureMoved=!1,AXEScrollView.prototype.onViewScrollBegin=function(e){var t=this;(t.contentSize().x>t.width()||t.contentSize().y>t.height())&&e.touches.length==1&&(t.easingInitSpeed=null,t.easingDuration=null,t.easingAcc=null,t.desOffset=null,t.lastTouch=new AXEVec2(e.touches[0].x,e.touches[0].y),t.figureMoved=!1,t.addListener(AXETouchEvent.TOUCH_MOVE,t,t.onViewScrolling),t.addListener(AXETouchEvent.TOUCH_END,t,t.onViewScrollEnd),t.scrolling=!0,t.delegate!=null&&t.delegate.onScrollViewStartScroll!=null&&t.delegate.onScrollViewStartScroll(t)),e.touches.length>1&&(t.figureMoved=!1,t.onViewScrollEnd())},AXEScrollView.prototype.onViewScrolling=function(e){var t=this,n=new AXEVec2(e.touches[0].x,e.touches[0].y),r=t.offset().clone(),i=new AXEVec2;t.lockHorizontal()?i.x=r.x:r.x>=0&&r.x<=t.contentSize().x-t.width()?i.x=r.x-(n.x-t.lastTouch.x):i.x=r.x-(n.x-t.lastTouch.x)/4,t.lockVertical()?i.y=r.y:r.y>=0&&r.y<=t.contentSize().y-t.height()?i.y=r.y-(n.y-t.lastTouch.y):i.y=r.y-(n.y-t.lastTouch.y)/4,t.offset(i),t.lastTouch=n,t.delegate!=null&&t.onScrollViewScrolling!=null&&t.delegate.onScrollViewScrolling(t),t.scrollBarStyle()==AXEScrollBarStyle.AUTO&&(t.lockHorizontal()==0&&t.contentSize().x>t.width()&&t.hScrollBar().show(),t.lockVertical()==0&&t.contentSize().y>t.height()&&t.vScrollBar().show()),t.figureMoved=!0},AXEScrollView.prototype.bouncingDuration=.3,AXEScrollView.prototype.easeDuration=1,AXEScrollView.prototype.onViewScrollEnd=function(){var e=this;if(e.figureMoved||e.paging()){var t=e.offset().clone(),n=t.clone(),r=0,i=0,s=0,o=0;e.currentSpeed==null&&(e.currentSpeed=new AXEVec2);var u=e.currentSpeed.clone();t.x<0?(n.x=0,r=e.bouncingDuration,u.x=(n.x-t.x)*2/r,s=u.x/r*-1):t.x>e.contentSize().x-e.width()?(n.x=e.contentSize().x-e.width(),r=e.bouncingDuration,u.x=(n.x-t.x)*2/r,s=u.x/r*-1):e.paging()?(u.x>0?n.x=Math.ceil(t.x/e.width())*e.width():u.x<0?n.x=Math.floor(t.x/e.width())*e.width():n.x=Math.round(t.x/e.width())*e.width(),n.x=Math.max(0,Math.min(n.x,e.contentSize().x-e.width())),r=e.easeDuration,u.x=(n.x-t.x)*2/r,s=u.x/r*-1):e.easing()&&u.x!=0&&(r=e.easeDuration,n.x=t.x+u.x*r/2,n.x=Math.max(0,Math.min(n.x,e.contentSize().x-e.width())),u.x=(n.x-t.x)*2/r,s=u.x/r*-1),t.y<0?(n.y=0,i=e.bouncingDuration,u.y=(n.y-t.y)*2/i,o=u.y/i*-1):t.y>e.contentSize().y-e.height()?(n.y=e.contentSize().y-e.height(),i=e.bouncingDuration,u.y=(n.y-t.y)*2/i,o=u.y/i*-1):e.paging()?(u.y>0?n.y=Math.ceil(t.y/e.height())*e.height():u.y<0?n.y=Math.floor(t.y/e.height())*e.height():n.y=Math.round(t.y/e.height())*e.height(),n.y=Math.max(0,Math.min(n.y,e.contentSize().y-e.height())),i=e.easeDuration,u.y=(n.y-t.y)*2/i,o=u.y/i*-1):e.easing()&&u.y!=0&&(i=e.easeDuration,n.y=t.y+u.y*i/2,n.y=Math.max(0,Math.min(n.y,e.contentSize().y-e.height())),u.y=(n.y-t.y)*2/i,o=u.y/i*-1),n.equalsTo(t)?e.onViewEndScroll():(e.desOffset=n,e.easingInitSpeed=u,e.easingDuration=new AXEVec2(r,i),e.easingAcc=new AXEVec2(s,o),e.beginEasing=!0,e.delegate!=null&&e.delegate.onScrollViewStartEasing!=null&&e.delegate.onScrollViewStartEasing(e))}e.lastTouch=null,e.removeListener(AXETouchEvent.TOUCH_MOVE,e,e.onViewScrolling),e.removeListener(AXETouchEvent.TOUCH_END,e,e.onViewScrollEnd)},AXEScrollView.prototype.onViewEndScroll=function(){var e=this;e.scrolling=!1,e.easingInitSpeed=null,e.easingDuration=null,e.easingAcc=null,e.desOffset=null,e.delegate!=null&&e.delegate.onScrollViewEndScroll!=null&&e.delegate.onScrollViewEndScroll(e),e.scrollBarStyle()==AXEScrollBarStyle.AUTO&&(e.lockHorizontal()==0&&e.contentSize().x>e.width()&&e.hScrollBar().hide(),e.lockVertical()==0&&e.contentSize().y>e.height()&&e.vScrollBar().hide())}})(),define("scroll_view",["view_container","scroll_bar_style","scroll_bar","touch_event"],function(){});var AXETableView=function(){var e=this;AXEScrollView.prototype.constructor.call(e)};(function(){var e={};e.isVertical=function(e){return!1},e.cellCount=function(e){return 0},e.cellSizeByIndex=function(e,t){return 0},e.cellByIndex=function(e,t){return null},AXETableView.prototype=new AXEScrollView,AXETableView.constructor=AXETableView,AXETableView.prototype._dataSource=null,AXETableView.prototype.dataSource=function(e){var t=this;return Boolean(e)&&e!=t._dataSource&&(t._dataSource=e,e.isVertical(t)?(t.lockHorizontal(!0),t.lockVertical(!1)):(t.lockVertical(!0),t.lockHorizontal(!1))),t._dataSource},AXETableView.prototype.reloadData=function(){var e=this;if(e._dataSource!=null){var t=new AXEVec2;for(var n=0;n<e._dataSource.cellCount(e);n++)t[e._dataSource.isVertical(e)?"y":"x"]+=e._dataSource.cellSizeByIndex(e,n);e._contentSize=t,AXEScrollView.prototype.reloadData.call(e)}},AXETableView.prototype.renderView=function(){var e=this;if(e._dataSource!=null){if(e.bouncing()==0){var t=e.offset();t.x=Math.max(0,Math.min(e.contentSize().x-e.width(),t.x)),t.y=Math.max(0,Math.min(e.contentSize().y-e.height(),t.y))}var n=e.contentView();n.width(e.width()),n.height(e.height());var r;e._dataSource.isVertical(e)?r=e.renderVertical():r=e.renderHorizontal();var i=e.contentView().subViews().slice();for(var s=0;s<i.length;s++){var o=!0;for(var u=0;u<r.length;u++)if(i[s]==r[u]){o=!1;break}o&&i[s].remove()}for(var a=0;a<r.length;a++){var f=!0;for(var l=0;l<i.length;l++)if(r[a]==i[l]){f=!1;break}f&&e.contentView().addSubView(r[a])}e._hScrollBar!=null&&e._hScrollBar.updateScroll(),e._vScrollBar!=null&&e._vScrollBar.updateScroll()}},AXETableView.prototype.renderVertical=function(){var e=this,t=new AXEVec2(e.offset().y,e.offset().y+e.height()),n=[],r=0;for(var i=0;i<e.dataSource().cellCount(e);i++){var s=e.dataSource().cellSizeByIndex(e,i),o=new AXEVec2(r,r+s),u=o.y<t.x||o.x>t.y;if(u==0){var a=e.dataSource().cellByIndex(e,i);a.x(0),a.y(r-e.offset().y),n.push(a)}r+=s}return n},AXETableView.prototype.renderHorizontal=function(){var e=this,t=new AXEVec2(e.offset().x,e.offset().x+e.width()),n=[],r=0;for(var i=0;i<e.dataSource().cellCount(e);i++){var s=e.dataSource().cellSizeByIndex(e,i),o=new AXEVec2(r,r+s),u=o.y<t.x||o.x>t.y;if(u==0){var a=e.dataSource().cellByIndex(e,i);a.x(r-e.offset().x),a.y(0),n.push(a)}r+=s}return n}})(),define("table_view",["scroll_view","rect","vec2"],function(){});var AXESpinView=function(e){if(arguments.length>0&&e instanceof AXESpinView)return e};(function(){AXESpinView.prototype=new AXEViewContainer,AXESpinView.prototype.constructor=AXESpinView,AXESpinView.prototype.clone=function(){var e=this,t=new AXESpinView;return e.copyProperties(t),t},AXESpinView.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXESpinView(e).originalMat=t.originalMat.clone(),AXESpinView(e).clockwise=t.clockwise,AXESpinView(e).aps(t.aps()),AXESpinView(e).angle(t.angle()),t.playing?AXESpinView(e).play():AXESpinView(e).pause()},AXESpinView.prototype.dealloc=function(){var e=this;e.originalMat=null,AXEViewContainer.prototype.dealloc.call(e)},AXESpinView.prototype.originalMat=null,AXESpinView.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),t.originalMat=t.matrix().clone(),e.is("[clockwise]")?t.clockwise=e.attr("clockwise")=="true":t.clockwise=!0,e.is("[angle]")&&t.angle(parseFloat(e.attr("angle")));if(e.is("[aps]")){var n=parseFloat(e.attr("aps"));t.aps(n)}e.is("[auto-play]")?t.playing=e.attr("auto-play")=="true":t.playing=!0},AXESpinView.prototype.playing=!1,AXESpinView.prototype.clockwise=!0,AXESpinView.prototype.play=function(){var e=this;e.playing=!0},AXESpinView.prototype.pause=function(){var e=this;e.playing=!1},AXESpinView.prototype.angleChanged=!1,AXESpinView.prototype._angle=0,AXESpinView.prototype.angle=function(e){var t=this;return typeof e=="number"&&(e=e>=0?e%360:360-Math.abs(e)%360,t._angle!=e&&(t._angle=e,t.angleChanged=!0)),t._angle},AXESpinView.prototype._aps=0,AXESpinView.prototype.aps=function(e){var t=this;return isNaN(e)==0&&e!=t._aps&&(t._aps=e,t.needToRender(!0)),t._aps},AXESpinView.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t);if(n.playing){var r=t*n.aps();n.angle(n.angle()+(n.clockwise?1:-1)*r)}if(n.angleChanged){n.angleChanged=!1;var i=n.angle()*(Math.PI/180),s=new AXEMat3;s.a=Math.cos(i),s.b=Math.sin(i),s.c=-1*s.b,s.d=s.a,s.tx=n.width()/2-s.a*n.width()/2-s.c*n.height()/2,s.ty=n.height()/2-s.b*n.width()/2-s.d*n.height()/2,s=s.concatWith(n.originalMat),n.matrix(s)}}})(),define("spin_view",["view_container","mat3"],function(){});var AXEEraserView=function(e){if(e instanceof AXEEraserView)return e};(function(){AXEEraserView.prototype=new AXEViewContainer,AXEEraserView.prototype.constructor=AXEEraserView,AXEEraserView.prototype.fromPoint=null,AXEEraserView.prototype.onEraserTouchStart=function(e){var t=this;t.mask()!=null&&(t.fromPoint=new AXEVec2(e.touches[0].x,e.touches[0].y),t.addListener(AXETouchEvent.TOUCH_MOVE,t,t.onEraserTouchMove),t.addListener(AXETouchEvent.TOUCH_END,t,t.onEraserTouchEnd))},AXEEraserView.prototype.onEraserTouchMove=function(e){var t=this;if(t.mask()!=null){var n=new AXEVec2(e.touches[0].x,e.touches[0].y);t.fromPoint.equalsTo(n)===!1&&(t.drawCircle(t.fromPoint),t.drawRect(t.fromPoint,n),t.drawCircle(n),t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))),t.fromPoint=n}else t.onEraserTouchEnd()},AXEEraserView.prototype.onEraserTouchEnd=function(){var e=this;e.removeListener(AXETouchEvent.TOUCH_MOVE,e,e.onEraserTouchMove),e.removeListener(AXETouchEvent.TOUCH_END,e,e.onEraserTouchEnd)},AXEEraserView.prototype.cleanArea=0,AXEEraserView.prototype.drawCircle=function(e){var t=this,n=new AXECircle(e.x,e.y,t.strokeSize()/2),r=t.mask();r.circle(n),r.closePath()},AXEEraserView.prototype.drawRect=function(e,t){var n=this,r=t.subtract(e),i=r.radian()*-1,s=new AXEMat3;s.a=Math.cos(i),s.d=s.a,s.b=Math.sin(i),s.c=-1*s.b,s.tx=e.x-s.a*e.x-s.c*e.y,s.ty=e.y-s.b*e.x-s.d*e.y;var o=s.transformPoint(t),u=new AXERect(e.x,e.y-n.strokeSize()/2,o.x-e.x,n.strokeSize());n.cleanArea+=u.width*u.height;var a=s.inversion(),f=a.transformPoint(u.topLeft()),l=a.transformPoint(u.topRight()),c=a.transformPoint(u.bottomRight()),h=a.transformPoint(u.bottomLeft()),p=n.mask();p.moveTo(f.x,f.y),p.lineTo(l.x,l.y),p.lineTo(c.x,c.y),p.lineTo(h.x,h.y),p.closePath()},AXEEraserView.prototype.clone=function(){var e=this,t=new AXEEraserView;return e.copyProperties(t),t},AXEEraserView.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e);var n=AXEEraserView(e);n.strokeSize(t.strokeSize()),t.initEraser()},AXEEraserView.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),e.is("[stroke-size]")&&t.strokeSize(parseFloat(e.attr("stroke-size"))),t.initEraser()},AXEEraserView.prototype.initEraser=function(){var e=this;e.blurAll(),e.addListener(AXETouchEvent.TOUCH_START,e,e.onEraserTouchStart)},AXEEraserView.prototype._strokesize=40,AXEEraserView.prototype.strokeSize=function(e){var t=this;return isNaN(e)==0&&e!=t._strokesize&&(t._strokesize=e),t._strokesize},AXEEraserView.prototype.cleanPercent=function(){var e=this;return e.cleanArea/(e.width()*e.height())},AXEEraserView.prototype.cleanAll=function(){var e=this;e.cleanArea=e.width()*e.height(),e.mask(null)},AXEEraserView.prototype.blurAll=function(){var e=this;e.cleanArea=0,e.mask(new AXEPath)}})(),define("eraser_view",["vec2","event","touch_event","view_container","path","vec2","mat3","circle"],function(){});var AXEMotionFrame=function(){};(function(){AXEMotionFrame.prototype.constructor=AXEMotionFrame,AXEMotionFrame.prototype.time=0,AXEMotionFrame.prototype.tween=null,AXEMotionFrame.prototype.isBlank=!1,AXEMotionFrame.prototype.properties=null,AXEMotionFrame.prototype.updateFromXML=function(e){var t=this;t.isBlank=e.is("[blank]"),t.time=parseFloat(e.attr("time"));if(e.is("[tween]")){var n=e.attr("tween").split(".");t.tween=AXEEasing[n[0]][n[1]]}else t.tween=null;t.properties={};var r=e[0].attributes;for(var i=0;i<r.length;i++){var s=r[i].name;if(s!="tween"&&s!="blank"&&s!="time")if(s=="matrix"){var o=r[i].value.split(",");t.properties.matrix={a:parseFloat(o[0]),b:parseFloat(o[1]),c:parseFloat(o[2]),d:parseFloat(o[3]),tx:parseFloat(o[4]),ty:parseFloat(o[5])}}else if(s.match(/color/gi)){var u=r[i].value.split(",");t.properties[s]={r:parseFloat(u[0]),g:parseFloat(u[1]),b:parseFloat(u[2])},u.length>3&&(t.properties[s].a=parseFloat(u[3]))}else{var a=r[i].value,f=/^\{[\d\D]*\}$/;if(f.test(a))t.properties[s]=JSON.parse(a.replace(/'/g,'"'));else{var l=parseFloat(a),c=/[^\d.\-]/;isNaN(l)==0&&c.test(a)==0?t.properties[s]=l:a.toLowerCase()=="true"||a.toLowerCase()=="false"?t.properties[s]=a=="true":t.properties[s]=a}}}},AXEMotionFrame.prototype.clone=function(){var e=this,t=new AXEMotionFrame;return t.time=e.time,t.tween=e.tween,t.isBlank=e.isBlank,t.properties=JSON.parse(JSON.stringify(e.properties)),t},AXEMotionFrame.prototype.dealloc=function(){var e=this;e.properties=null}})(),define("motion_frame",["vec2","mat3","color","easing"],function(){});var AXEMotionLayer=function(){};(function(){AXEMotionLayer.prototype.constructor=AXEMotionLayer,AXEMotionLayer.prototype.contentView=null,AXEMotionLayer.prototype.updateFromXML=function(e){var t=this,n=e.children("content").children();if(n.length>0){var r=n[0].nodeName.toLowerCase();t.contentView=AXEViewFactory.createViewByNodeName(r),t.contentView!=null&&t.contentView.updatePropsFromXML(n);var i=t.contentView.className=="AXEViewContainer"?t.contentView.subViews().length:0}else t.contentView=null;t.frames=[];var s=e.children("frame");s.each(function(e,n){var r=$(n),i=new AXEMotionFrame;i.updateFromXML(r),t.frames.push(i)})},AXEMotionLayer.prototype.frames=null,AXEMotionLayer.prototype.contentWithTime=function(e){var t=this,n=null,r=null;for(var i=t.frames.length-1;i>=0;i--){var s=t.frames[i];if(s.time<=e){n=s,i<t.frames.length-1&&(r=t.frames[i+1]);break}}var o=null;if(n!=null&&n.isBlank==0){o=t.contentView;if(n.tween==null||r==null)AXEArrayUtil.setValues(o,n.properties,n.properties,0);else{var u=r.time-n.time,a=e-n.time,f=n.tween(a,0,1,u);AXEArrayUtil.setValues(o,n.properties,r.properties,f)}}return o},AXEMotionLayer.prototype.reverse=function(e){var t=this,n=[];for(var r=t.frames.length-1;r>=0;r--){var i=t.frames[r].clone();i.time=e-i.time;if(r>0){var s=t.frames[r-1];i.tween=s.tween}else i.tween=null;n.push(i)}t.frames=n},AXEMotionLayer.prototype.clone=function(){var e=this,t=new AXEMotionLayer;e.contentView!=null&&(t.contentView=e.contentView.clone()),t.frames=[];for(var n=0;n<e.frames.length;n++){var r=e.frames[n].clone();t.frames.push(r)}return t},AXEMotionLayer.prototype.dealloc=function(){var e=this;e.contentView.dealloc(),e.contentView=null;for(var t=0;t<e.frames.length;t++)e.frames[t].dealloc();e.frames=null}})(),define("motion_layer",["motion_frame","array_util","mat3","view_factory","color","vec2"],function(){});var AXEMotion=function(e){if(arguments.length>0&&e instanceof AXEMotion)return e};(function(){AXEMotion.prototype=new AXEViewContainer,AXEMotion.prototype.constructor=AXEMotion,AXEMotion.prototype.clone=function(){var e=this,t=new AXEMotion;return e.copyProperties(t),t},AXEMotion.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e),AXEMotion(e).layers=[];for(var n=0;n<t.layers.length;n++){var r=t.layers[n];AXEMotion(e).layers.push(r.clone())}AXEMotion(e)._duration=t.duration(),AXEMotion(e).loop(t.loop()),AXEMotion(e).currentTime(t.currentTime()),AXEMotion(e).updateFromTime(),AXEMotion(e).isReverse=t.isReverse;if(t._labels!=null){AXEMotion(e)._labels={};for(var i in t._labels)t._labels.hasOwnProperty(i)&&(AXEMotion(e)._labels[i]=t._labels[i])}AXEMotion(e)._speedScale=t._speedScale,AXEMotion(e).isPlaying=t.isPlaying},AXEMotion.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),t.layers=[];var n=e.children("layer");n.each(function(e,n){var r=$(n),i=new AXEMotionLayer;i.updateFromXML(r),t.layers.push(i)}),t._duration=parseFloat(e.attr("duration")),t.loop(e.is("[loop]")?e.attr("loop")=="true":!0),e.is("[speed-scale]")?t.speedScale(parseFloat(e.attr("speed-scale"))):t.speedScale(1);if(e.is("[labels]")){var r=e.attr("labels"),i=r.split(",");t._labels={};for(var s=0;s<i.length;s++){var o=i[s].split(":"),u=o[0];t._labels[u]=o[1]}}e.is("[reverse]")&&t.reverse(),e.is("[time]")?t.currentTime(parseFloat(e.attr("time"))):t.currentTime(0),t.updateFromTime();if(e.is("[auto-play]"))e.attr("auto-play")=="true"?t.play():t.pause();else if(e.is("[delay]")){t.pause();var a=parseFloat(e.attr("delay")),f=setTimeout(function(){clearTimeout(f),t.play()},a*1e3)}else t.play()},AXEMotion.prototype.remainLabels=null,AXEMotion.prototype.resetLabels=function(){var e=this;e.remainLabels={};if(e.labels()!=null)for(var t in e.labels())e.remainLabels[t]=e.labels()[t]},AXEMotion.prototype._labels=null,AXEMotion.prototype.labels=function(){var e=this;return e._labels},AXEMotion.prototype.timeByLabel=function(e){var t=this,n=t.labels(),r=0;for(var i in n)if(n[i]==e){r=parseFloat(i);break}return r},AXEMotion.prototype.layers=null,AXEMotion.prototype.layerContentByName=function(e){var t=this,n=null;for(var r=0;r<t.layers.length;r++){var i=t.layers[r].contentView;if(i.name()==e){n=i;break}}if(n==null)for(var s=0;s<t.layers.length;s++){var o=t.layers[s].contentView;o instanceof AXEMotion?n=AXEMotion(o).layerContentByName(e):o instanceof AXEViewContainer&&(n=AXEViewContainer(o).subViewByName(e));if(n!=null)break}return n},AXEMotion.prototype._speedScale=1,AXEMotion.prototype.speedScale=function(e){var t=this;return isNaN(e)==0&&e!=t._speedScale&&(t._speedScale=e),t._speedScale},AXEMotion.prototype.isReverse=!1,AXEMotion.prototype.reverse=function(){var e=this;for(var t=0;t<e.layers.length;t++){var n=e.layers[t];n.reverse(e.duration())}var r={};for(var i in e.labels())r[e.duration()-parseFloat(i)]=e.labels()[i];e._labels=r,e.updateFromTime(),e.isReverse=!e.isReverse},AXEMotion.prototype._duration=0,AXEMotion.prototype.duration=function(){var e=this;return e._duration},AXEMotion.prototype.percent=function(e){var t=this;return isNaN(e)==0&&t.currentTime(t.duration()*e),t.currentTime()/t.duration()},AXEMotion.prototype._currentTime=NaN,AXEMotion.prototype.currentTime=function(e){var t=this;if(isNaN(e)==0){t.loop()?e-=Math.floor(e/t.duration())*t.duration():e=Math.min(t.duration(),Math.max(0,e));if(t._currentTime!=e){t._currentTime=e,t.updateFromTime();if(t.labels()!=null){t.remainLabels={};for(var n in t.labels()){var r=parseFloat(n);r>=t._currentTime&&(t.remainLabels[n]=t.labels()[n])}}}}return t._currentTime},AXEMotion.prototype.isPlaying=!1,AXEMotion.prototype.pause=function(e){var t=this;isNaN(e)==0&&t.currentTime(e),t.isPlaying=!1},AXEMotion.prototype.play=function(e){var t=this;isNaN(e)==0&&t.currentTime(e),t.isPlaying=!0},AXEMotion.prototype._loop=!1,AXEMotion.prototype.loop=function(e){var t=this;return typeof e=="boolean"&&e!=t._loop&&(t._loop=e,t.needToRender(!0)),t._loop},AXEMotion.prototype.updateFromTime=function(){var e=this,t=e.subViews().slice(),n=[];for(var r=0;r<e.layers.length;r++){var i=e.layers[r].contentWithTime(e.currentTime());i!=null&&n.push(i)}for(var s=0;s<t.length;s++){var o=!0;for(var u=0;u<n.length;u++)if(n[u]==t[s]){o=!1;break}o&&t[s].remove()}e._subViews=[];for(var a=0;a<n.length;a++){var f=!1;for(var l=0;l<t.length;l++)if(n[a]==t[l]){t.splice(l,1),f=!0;break}f?e._subViews[a]=n[a]:e.addSubView(n[a])}e.needToRender(!0)},AXEMotion.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t);if(n.isPlaying){t*=n.speedScale();var r=n.currentTime()+t,i=r;n.loop()?r-=Math.floor(r/n.duration())*n.duration():r=Math.min(n.duration(),Math.max(0,r)),r!=n._currentTime&&(n._currentTime=r,n.updateFromTime()),n.triggerEvent(new AXEEvent(AXEEvent.CHANGE)),n.remainLabels==null&&n.resetLabels();for(var s in n.remainLabels){var o=parseFloat(s);if(o<=i){var u=new AXEEvent(AXEEvent.CUE_POINT);u.evtData={time:parseFloat(s),label:n.remainLabels[s]},n.triggerEvent(u),delete n.remainLabels[s]}}i>=n.duration()&&n.resetLabels(),i>=n.duration()&&(n.loop()==0&&n.pause(),n.triggerEvent(new AXEEvent(AXEEvent.END)))}},AXEMotion.prototype.dealloc=function(){var e=this;for(var t=0;t<e.layers.length;t++)e.layers[t].dealloc();e._labels=null,e.remainLabels=null,AXEViewContainer.prototype.dealloc.call(e)}})(),define("motion",["view_container","motion_layer","event"],function(){});var AXESliderView=function(e){if(e instanceof AXESliderView)return e};(function(){AXESliderView.DIRECTION_VERTICAL="vertical",AXESliderView.DIRECTION_HORIZONTAL="horizontal",AXESliderView.prototype=new AXEViewContainer,AXESliderView.prototype.constructor=AXESliderView,AXESliderView.prototype.dotView=null,AXESliderView.prototype.dotBox=null,AXESliderView.prototype.dots=null,AXESliderView.prototype.sliceBox=null,AXESliderView.prototype.onSliderSwipe=function(e){var t=this;if(t.animating()==0&&t.slices().length>1){var n=e.touches[1].x-e.touches[0].x,r=e.touches[1].y-e.touches[0].y;Math.abs(n)>Math.abs(r)&&t.direction()==AXESliderView.DIRECTION_HORIZONTAL?n>0?t.moveToPrevSlice():t.moveToNextSlice():Math.abs(r)>Math.abs(n)&&t.direction()==AXESliderView.DIRECTION_VERTICAL&&(r>0?t.moveToPrevSlice():t.moveToNextSlice())}},AXESliderView.prototype.moveToPrevSlice=function(){var e=this;window.clearTimeout(e.scrollTimer),e.animate(.5,{sliceIndex:Math.ceil(e.sliceIndex())-1},AXEEasing.Cubic.easeOut,null,function(){e.interval()>0&&(e.scrollTimer=window.setTimeout(function(){e.moveToNextSlice()},e.interval()*1e3))})},AXESliderView.prototype.moveToNextSlice=function(){var e=this;window.clearTimeout(e.scrollTimer),e.animate(.5,{sliceIndex:Math.floor(e.sliceIndex())+1},AXEEasing.Cubic.easeOut,null,function(){e.interval()>0&&(e.scrollTimer=window.setTimeout(function(){e.moveToNextSlice()},e.interval()*1e3))})},AXESliderView.prototype.renderDots=function(){var e=this;if(e.slices().length>0&&e.dotView!=null&&e.dotBox!=null){e.dotBox.empty();if(e.direction()==AXESliderView.DIRECTION_HORIZONTAL){var t=e.slices().length*e.dotView.width()+(e.slices().length-1)*e.dotSpace(),n=0;e.dotAlign()==AXEAlignMode.CENTER?n=(e.dotBox.width()-t)/2:e.dotAlign()==AXEAlignMode.CENTER&&(n=e.dotBox.width()-t),e.dots=[],AXEArrayUtil.each(e.slices(),function(t,r){var i=e.dotView.clone();i.switchMode(!0),i.x(n),i.y((e.dotBox.height()-i.height())/2),e.dotBox.addSubView(i),t==Math.round(e.sliceIndex())?i.buttonState(AXEButtonState.DOWN_STATE):i.buttonState(AXEButtonState.NORMAL_STATE),e.dots.push(i),n+=i.width()+e.dotSpace()})}else{var r=e.slices().length*e.dotView.height()+(e.slices().length-1)*e.dotSpace(),i=0;e.dotAlign()==AXEAlignMode.MIDDLE?i=(e.dotBox.height()-r)/2:e.dotAlign()==AXEAlignMode.BOTTOM&&(i=e.dotBox.height()-r),e.dots=[],AXEArrayUtil.each(e.slices(),function(t,n){var r=e.dotView.clone();r.switchMode(!0),r.x((e.dotBox.width()-r.width())/2),r.y(i),e.dotBox.addSubView(r),t==Math.round(e.sliceIndex())?r.buttonState(AXEButtonState.DOWN_STATE):r.buttonState(AXEButtonState.NORMAL_STATE),e.dots.push(r),i+=r.height()+e.dotSpace()})}}else e.dotBox!=null&&e.dotBox.empty()},AXESliderView.prototype.renderSlices=function(){var e=this;if(e.slices().length>0){var t=Math.floor(e.sliceIndex()),n=Math.ceil(e.sliceIndex()),r=e.sliceBox.subViews().slice(),i=[],s=e.slices();for(var o=t;o<=n;o++){var u=o%s.length,a=s[u],f=e.width()/a.width(),l=e.height()/a.height();a.scaleX(f),a.scaleY(l);var c=0,h=0;e.direction()==AXESliderView.DIRECTION_VERTICAL?h=(o-e.sliceIndex())*e.height():c=(o-e.sliceIndex())*e.width(),a.x(c),a.y(h),i.push(a)}AXEArrayUtil.each(i,function(t,n){var i=!1;for(var s=0;s<r.length;s++)if(n==r[s]){r.splice(s,1),i=!0;break}i==0&&e.sliceBox.addSubView(n)});for(var p=0;p<r.length;p++)r[p].remove()}else e.sliceBox.empty(),e._slices=[]},AXESliderView.prototype.dealloc=function(){var e=this;e.dotView!=null&&(e.dotView.dealloc(),e.dotView=null);if(e._slices!=null){for(var t=0;t<e._slices.length;t++)e._slices[t].dealloc();e._slices=null}AXEViewContainer.prototype.dealloc.call(e)},AXESliderView.prototype.clone=function(){var e=this,t=new AXESliderView;return e.copyProperties(t),t},AXESliderView.prototype.copyProperties=function(e){var t=this;AXEViewContainer.prototype.copyProperties.call(t,e);var n=AXESliderView(e);if(t._slices!=null){n._slices=[];for(var r=0;r<t._slices.length;r++)n._slices.push(t._slices[r].clone())}else t._slices=null;n.scrollable(t.scrollable()),n.direction(t.direction()),n.dotAlign(t.dotAlign()),n.interval(t.interval()),t.dotView!=null&&(n.dotView=t.dotView.clone()),n.dotSpace(t.dotSpace()),n.initView()},AXESliderView.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e);var n=e.children("slices").children();n.length>0&&(t._slices=[],n.each(function(e,n){var r=$(n),i=n.nodeName.toLowerCase(),s=AXEViewFactory.createViewByNodeName(i);s!=null&&(s.updatePropsFromXML(r),t._slices.push(s))})),e.is("[dot-space]")?t.dotSpace(parseFloat(e.attr("dot-space"))):t.dotSpace(0),e.is("[scrollable]")&&t.scrollable(e.attr("scrollable").toLowerCase()=="true"),e.is("[direction]")?t.direction(e.attr("direction")):t.direction(AXESliderView.DIRECTION_HORIZONTAL),e.is("[dot-align]")?t.dotAlign(AXEAlignMode[e.attr("dot-align").toUpperCase()]):t.dotAlign(AXEAlignMode.CENTER),e.is("[interval]")?t.interval(parseFloat(e.attr("interval"))):t.interval(0),t.initView()},AXESliderView.prototype.initView=function(){var e=this;e.dotView=e.subViewByName("dot"),e.dotView!=null&&e.dotView.remove(),e.dotBox=e.subViewByName("dot-box"),e.sliceBox=new AXEViewContainer,e.sliceBox.clip(!0),e.sliceBox.widthPercent(1),e.sliceBox.heightPercent(1),e.insertSubViewAt(e.sliceBox,0)},AXESliderView.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.dotNeedRender&&(n.dotNeedRender=!1,n.renderDots()),n.sliceNeedRender&&(n.sliceNeedRender=!1,n.renderSlices())},AXESliderView.prototype.dotNeedRender=!1,AXESliderView.prototype._dotAlign=NaN,AXESliderView.prototype.dotAlign=function(e){var t=this;return typeof e=="number"&&e!=t._dotAlign&&(t._dotAlign=e,t.dotNeedRender=!0),t._dotAlign},AXESliderView.prototype.sliceNeedRender=!1,AXESliderView.prototype._direction=null,AXESliderView.prototype.direction=function(e){var t=this;return typeof e=="string"&&e!=t._direction&&(t._direction=e,t.dotNeedRender=!0,t.sliceNeedRender=!0),t._direction},AXESliderView.prototype.scrollTimer=0,AXESliderView.prototype._interval=0,AXESliderView.prototype.interval=function(e){var t=this;return typeof e=="number"&&e>=0&&e!=t._interval&&(t._interval=e,window.clearTimeout(t.scrollTimer),t._interval>0&&window.setTimeout(function(){t.moveToNextSlice()},t._interval*1e3)),t._interval},AXESliderView.prototype._slices=null,AXESliderView.prototype.slices=function(){var e=this;return e._slices==null&&(e._slices=[]),e._slices},AXESliderView.prototype.addSlice=function(e,t){var n=this;t=isNaN(t)||t<0||t>n.slices().length?n.slices().length:t,n.slices().splice(t,0,e),n.sliceNeedRender=!0,n.dotNeedRender=!0},AXESliderView.prototype.removeSlice=function(e){var t=this,n=t.slices();e>=0&&e<n.length&&(n.splice(e,1),t.sliceIndex()>t.slices().length-1&&t.sliceIndex(t.slices().length-1),t.sliceNeedRender=!0,t.dotNeedRender=!0)},AXESliderView.prototype.removeAllSlices=function(){var e=this;while(e.slices().length>0)e.removeSlice(0)},AXESliderView.prototype._dotSpace=0,AXESliderView.prototype.dotSpace=function(e){var t=this;return typeof e=="number"&&e!=t._dotSpace&&(t._dotSpace=e,t.dotNeedRender=!0),t._dotSpace},AXESliderView.prototype._scrollable=!1,AXESliderView.prototype.scrollable=function(e){var t=this;return typeof e=="boolean"&&e!=t._scrollable&&(t._scrollable=e,t._scrollable?t.addListener(AXETouchEvent.SWIPE,t,t.onSliderSwipe):t.removeListener(AXETouchEvent.SWIPE,t,t.onSliderSwipe)),t._scrollable},AXESliderView.prototype._sliceIndex=0,AXESliderView.prototype.sliceIndex=function(e){var t=this;if(typeof e=="number"){e%=t.slices().length,e<0&&(e+=t.slices().length);if(e!=t._sliceIndex){t._sliceIndex=e,t.sliceNeedRender=!0;if(t.dots!=null){var n=Math.round(t.sliceIndex())%t.dots.length;AXEArrayUtil.each(t.dots,function(e,t){t.buttonState(e==n?AXEButtonState.DOWN_STATE:AXEButtonState.NORMAL_STATE)})}}}return t._sliceIndex}})(),define("slider_view",["view_container"],function(){});var AXERequest=function(){};(function(){AXERequest.RETRY_INTERVAL=100,AXERequest.MAX_FAIL_COUNT=10,AXERequest.failCount=0,AXERequest.apiURL=function(e){return"./api/"+e+".php"},AXERequest.logFailRequest=function(e,t){console.log("Fetch data from "+e+" fail! Error ID: "+t+"\nFail count:"+AXERequest.failCount)},AXERequest.sendRequest=function(e,t,n,r,i){var s=AXERequest.apiURL(e);t=typeof t=="object"?t:null,n=typeof n=="string"?n:"get",$.ajax({url:s,dataType:"json",async:!0,cache:!1,type:n,data:t,success:function(e,t){if(t=="success"){AXERequest.failCount=0;if(typeof r=="function"){var n=parseInt(e.code,10);if(n==800)typeof r=="function"&&r(e);else{AXERequest.logFailRequest(s,n);var o=e.msg;typeof i=="function"&&i(n,o)}}}},error:function(o,u,a){AXERequest.failCount++;var f="UNKNOWN";AXERequest.logFailRequest(s,f),AXERequest.failCount>=AXERequest.MAX_FAIL_COUNT?typeof i=="function"&&(AXERequest.failCount=0,i(f,a)):setTimeout(function(){AXERequest.sendRequest(e,t,n,r,i)},AXERequest.RETRY_INTERVAL)}})}})(),define("request",function(){});var AXE=function(e,t,n,r){AXE.showDeveloperInfo&&console.log(AXE.DEVELOPER_INFO);var i=this;AXEViewFactory.addClass("stage",AXEStage),AXEViewFactory.addClass("container",AXEViewContainer),AXEViewFactory.addClass("view",AXEView),AXEViewFactory.addClass("qrcode",AXEQRCode),AXEViewFactory.addClass("bitmap",AXEBitmap),AXEViewFactory.addClass("shape",AXEShape),AXEViewFactory.addClass("movie",AXEMovie),AXEViewFactory.addClass("text",AXEText),AXEViewFactory.addClass("video",AXEVideo),AXEViewFactory.addClass("button",AXEButton),AXEViewFactory.addClass("stack",AXEStackView),AXEViewFactory.addClass("motion",AXEMotion),AXEViewFactory.addClass("scroll",AXEScrollView),AXEViewFactory.addClass("table",AXETableView),AXEViewFactory.addClass("spin",AXESpinView),AXEViewFactory.addClass("slider",AXESliderView),AXEViewFactory.addClass("eraser",AXEEraserView),i.stageCtrl=new e,typeof t=="string"?(i.stageCtrl.addListener(AXEEvent.PREPARED,i,function(){typeof r=="function"?i._renderEngine=new r(AXEStage(i.stageCtrl.view()),n):i._renderEngine=new AXERenderCanvas(AXEStage(i.stageCtrl.view()),n)}),i.stageCtrl.initWithURL(t)):(i.stageCtrl.init(),typeof r=="function"?i._renderEngine=new r(AXEStage(i.stageCtrl.view()),n):i._renderEngine=new AXERender(AXEStage(i.stageCtrl.view()),n)),i.udid=AXEManager.issueUdid(),AXEManager.addAXE(i)};(function(){AXE.VERSION="1.0.4",AXE.DEVELOPER_INFO=function(){var e="Teown Tech Co. Ltd",t="xu.chunning@teown.com",n={version:AXE.VERSION,email:t,company:e,prjVersion:$('meta[name="axe:version"]').attr("content")},r="AXE H5 Library version: %version%\nProject version: %prjVersion%\nPowered by %company%\n%email%";return AXEStringUtil.formatString(r,n)}(),AXE.showDeveloperInfo=!0,AXE.prototype.constructor=AXE,AXE.prototype.udid=null,AXE.prototype.stageCtrl=null,AXE.prototype._renderEngine=null,AXE.prototype.renderEngine=function(){var e=this;return e._renderEngine}})(),define("axe",["axe_manager","render","render_canvas","event","view_factory","stage","view_container","view","qrcode","bitmap","movie","shape","text","video","button","stack_view","scroll_view","table_view","spin_view","eraser_view","motion","slider_view","string_util","request"],function(){});var AXESNSEvent=function(e,t,n){var r=this;r.channel=t,r.message=n,AXEEvent.prototype.constructor.call(r,e,!1)};(function(){AXESNSEvent.CANCEL_SHARING="cancel_sharing",AXESNSEvent.SUCCESS_SHARING="success_sharing",AXESNSEvent.WEICHAT_READY="wechat_ready",AXESNSEvent.SNS_ERROR="sns_error",AXESNSEvent.prototype=new AXEEvent,AXESNSEvent.prototype.constructor=AXESNSEvent,AXESNSEvent.prototype.message=null,AXESNSEvent.prototype.channel=null,AXESNSEvent.prototype.clone=function(){var e=this;return new AXESNSEvent(e.type,e.channel,e.message)}})(),define("sns_event",["event"],function(){});var AXEWechat=function(){};(function(){var e=window.jWeixin;AXEWechat._wechat=null,AXEWechat.MOMENTS="moments",AXEWechat.FRIENDS="to_friends",AXEWechat.QQ_WEIBO="qq_weibo",AXEWechat.wechat=function(){return AXEWechat._wechat==null&&(AXEWechat._wechat=new AXEWechat),AXEWechat._wechat},AXEWechat.prototype=new AXEEventTarget,AXEWechat.prototype.constructor=AXEWechat,AXEWechat.prototype._hasInit=!1,AXEWechat.prototype.hasInit=function(){var e=this;return e._hasInit},AXEWechat.prototype.jsTicketInfo=null,AXEWechat.prototype.debug=!1,AXEWechat.prototype.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","getLocation"],AXEWechat.prototype.jsTicketURL="./php/wechat_js/jsticket.php",AXEWechat.prototype.initWithObject=function(e){var t=this;t.hasInit()===!1&&(t._hasInit=!0,t.jsTicketInfo=e,t.configWechat())},AXEWechat.prototype.initialize=function(e,t){var n=this;if(n.hasInit()!==!1)throw new Error("Wechat API has been initialized.");n._hasInit=!0,typeof t=="boolean"&&(n.debug=t),typeof e=="string"&&(n.jsTicketURL=e),$.ajax({url:n.jsTicketURL,dataType:"json",data:{js_url:AXEURLUtil.cleanURL(!0)},async:!0,cache:!1,type:"get",success:function(e,t){t=="success"&&(n.jsTicketInfo=e,n.configWechat())}})},AXEWechat.prototype.shareTitle="",AXEWechat.prototype.shareLink="",AXEWechat.prototype.shareImageURL="",AXEWechat.prototype.shareDesc="",AXEWechat.prototype.timelineShareTitle=null,AXEWechat.prototype.timelineShareLink=null,AXEWechat.prototype.timelineShareImageURL=null,AXEWechat.prototype.friendShareTitle=null,AXEWechat.prototype.friendShareLink=null,AXEWechat.prototype.friendShareDesc=null,AXEWechat.prototype.friendShareImageURL=null,AXEWechat.prototype.qqShareTitle=null,AXEWechat.prototype.qqShareLink=null,AXEWechat.prototype.qqShareImageURL=null,AXEWechat.prototype.qqShareDesc=null,AXEWechat.prototype.shareType="",AXEWechat.prototype.shareDataURL="",AXEWechat.prototype.jWechat=function(){return e},AXEWechat.prototype.updateSharing=function(){var t=this;this.removeListener(AXESNSEvent.WEICHAT_READY);if(t.isReady){var n=function(e,n){t.triggerEvent(new AXESNSEvent(AXESNSEvent.SUCCESS_SHARING,e,n.errMsg))},r=function(e,n){t.triggerEvent(new AXESNSEvent(AXESNSEvent.CANCEL_SHARING,e,n.errMsg))};e.onMenuShareTimeline({title:t.timelineShareTitle||t.shareTitle,link:t.timelineShareLink||t.shareLink,imgUrl:t.timelineShareImageURL||t.shareImageURL,success:function(e){n(AXEWechat.MOMENTS,e)},cancel:function(e){r(AXEWechat.MOMENTS,e)}}),e.onMenuShareAppMessage({title:t.friendShareTitle||t.shareTitle,desc:t.friendShareDesc||t.shareDesc,link:t.friendShareLink||t.shareLink,imgUrl:t.friendShareImageURL||t.shareImageURL,type:t.shareType,dataUrl:t.shareDataURL,success:function(e){n(AXEWechat.FRIENDS,e)},cancel:function(e){r(AXEWechat.FRIENDS,e)}}),e.onMenuShareQQ({title:t.qqShareTitle||t.shareTitle,desc:t.qqShareDesc||t.shareDesc,link:t.qqShareLink||t.shareLink,imgUrl:t.qqShareImageURL||t.shareImageURL,success:function(e){n(AXEWechat.QQ_WEIBO,e)},cancel:function(e){r(AXEWechat.QQ_WEIBO,e)}})}else t.addListener(AXESNSEvent.WEICHAT_READY,t,t.updateSharing)},AXEWechat.prototype.isReady=!1,AXEWechat.prototype.configWechat=function(){var t=this;e.error(function(e){console.log(e),t.triggerEvent(new AXESNSEvent(AXESNSEvent.SNS_ERROR,"",e.errMsg))}),e.ready(function(e){t.isReady=!0;var n=null;Boolean(e)&&e.hasOwnProperty("errMsg")&&(n=e.errMsg),t.triggerEvent(new AXESNSEvent(AXESNSEvent.WEICHAT_READY,"",n))}),e.config({debug:t.debug,appId:t.jsTicketInfo.appId,timestamp:t.jsTicketInfo.timestamp,nonceStr:t.jsTicketInfo.nonceStr,signature:t.jsTicketInfo.signature,jsApiList:t.jsApiList})}})(),define("wechat",["url_util","event_target","sns_event"],function(){});var AXEViewController=function(e){var t=this;arguments.length>0&&e instanceof AXEViewContainer&&t.initWithView(e)};(function(){AXEViewController.prototype=new AXEEventTarget,AXEViewController.prototype.constructor=AXEViewController,AXEViewController.prototype.inited=!1,AXEViewController.prototype.prepared=!1,AXEViewController.prototype._view=null,AXEViewController.prototype.view=function(e){var t=this;return arguments.length>0&&e!=t._view&&(t._view!=null&&(t._view.controller=null),t._view=e,t._view.controller=t),t._view==null&&(t._view=t.generateView(),t._view.controller=t,t.$viewXML!=null&&t.prepared&&t._view.updatePropsFromXML(t.$viewXML)),t._view},AXEViewController.prototype.generateView=function(){return new AXEViewContainer},AXEViewController.prototype._loadPercent=0,AXEViewController.prototype.loadPercent=function(){var e=this;return e._loadPercent},AXEViewController.prototype.inited=!1,AXEViewController.prototype.init=function(){var e=this;if(e.inited!==!1)throw new Error("View controller has init already.");e.inited=!0,e.prepared=!0,e._loadPercent=1,e.onViewControllerPrepared()},AXEViewController.prototype.initWithView=function(e){var t=this;if(t.inited!==!1)throw new Error("View controller has init already.");t.view(e),t.init()},AXEViewController.prototype.$viewXML=null,AXEViewController.prototype.afterPrepared=function(){var e=this;e.inited=!0,e.prepared=!0,e._loadPercent=1;if(e._view!=null){e._view.updatePropsFromXML(e.$viewXML),e.onViewControllerPrepared();if(e._view.onStage){var t=e._view.stage();e._view.resize(t.width(),t.height()),e._view.onWindowOrientationChanged(t.orientation)}}else e.onViewControllerPrepared();this.triggerEvent(new AXEEvent(AXEEvent.PREPARED))},AXEViewController.prototype.initWithXML=function(e){var t=this;if(t.inited!==!1)throw new Error("View controller has init already.");t._loadPercent=0,t.inited=!0,t.prepared=!1,t.$viewXML=e,t.loadAssets()},AXEViewController.prototype.initWithURL=function(e){var t=this;if(t.inited!==!1)throw new Error("View controller has init already.");var n=AXEAssetsLoader.asset(e);if(n!=null)t.initWithXML(n);else{t._loadPercent=0,t.inited=!0,t.prepared=!1;var r=new AXEAssetsLoader;r.addListener(AXEErrorEvent.ERROR,t,function(e){throw r.removeListener(),e.error}),r.addListener(AXEEvent.LOAD,t,function(){r.removeListener(),t.$viewXML=AXEAssetsLoader.asset(e),t.loadAssets()}),r.loadAssets(e)}},AXEViewController.prototype.assets=null,AXEViewController.prototype.addAsset=function(e){var t=this;t.assets==null&&(t.assets=[]),t.assets.push(e)},AXEViewController.prototype.loadAssets=function(){var e=this,t=e.$viewXML.children("asset");e.assets==null&&(e.assets=[]),t.each(function(t,n){e.assets.push($(n).text())});if(e.assets.length<=0)e.afterPrepared();else{var n=new AXEAssetsLoader;n.addListener(AXEEvent.LOAD,e,function(){e.afterPrepared(),n.removeListener()}),n.addListener(AXEProgressEvent.PROGRESS,e,function(t){e._loadPercent=t.percent,e.onViewControllerProgress(e._loadPercent),e.triggerEvent(t.clone())}),n.addListener(AXEErrorEvent.ERROR,e,function(e){throw this.removeListener(),e.error}),n.loadAssets(e.assets)}},AXEViewController.prototype.dealloc=function(){var e=this;e._view!=null&&(e._view.dealloc(),e._view=null),e.inited=!1,e.assets!=null&&(AXEAssetsLoader.releaseAssets(e.assets),e.assets=null),AXEEventTarget.prototype.dealloc.call(e)},AXEViewController.prototype.stageController=function(){var e=this,t=e.view().stage(),n=null;return t.className=="AXEStage"&&t.controller!=null&&(n=t.controller),n},AXEViewController.prototype.onViewUpdateFromXML=function(e){},AXEViewController.prototype.onViewControllerPrepared=function(){},AXEViewController.prototype.onViewControllerProgress=function(e){},AXEViewController.prototype.onViewAddToStage=function(){},AXEViewController.prototype.onViewAdded=function(e){},AXEViewController.prototype.onViewRemoved=function(e){},AXEViewController.prototype.onViewRemoveFromStage=function(){},AXEViewController.prototype.onViewStartAnimate=function(){},AXEViewController.prototype.onViewEndAnimate=function(){},AXEViewController.prototype.onViewAfterRender=function(){},AXEViewController.prototype.onViewUpdated=function(e,t){},AXEViewController.prototype.onViewDeactivate=function(){},AXEViewController.prototype.onViewActivate=function(){},AXEViewController.prototype.onViewResize=function(e,t){},AXEViewController.prototype.onWindowOrientationChanged=function(e){}})(),define("view_ctrl",["view_container","assets_loader","event_target","event","progress_event","error_event"],function(){});var AXEStageController=function(){};(function(){AXEStageController.prototype=new AXEViewController,AXEStageController.prototype.constructor=AXEStageController,AXEStageController.prototype.generateView=function(){return new AXEStage}})(),define("stage_ctrl",["view_ctrl"],function(){});var AXEPageEvent=function(e,t){var n=this;n.evtData=t,AXEEvent.prototype.constructor.call(n,e,!0)};(function(){AXEPageEvent.CHANGE_PAGE="change_page",AXEPageEvent.EASE_IN_OVER="ease_in_over",AXEPageEvent.EASE_OUT_OVER="ease_out_over",AXEPageEvent.NAVIGATE_BACK="navigate_back",AXEPageEvent.NAVIGATE_NEXT="navigate_next",AXEPageEvent.prototype=new AXEEvent,AXEPageEvent.prototype.constructor=AXEPageEvent,AXEPageEvent.prototype.clone=function(){var e=this;return new AXEPageEvent(e.type,e.evtData)}})(),define("page_event",["event"],function(){});var AXEPageController=function(){var e=this;e.initPage()};(function(){AXEPageController.pageParams=null,AXEPageController._views=null,AXEPageController.views=function(){return AXEPageController._views==null&&(AXEPageController._views={}),AXEPageController._views},AXEPageController.prototype=new AXEViewController,AXEPageController.prototype.constructor=AXEPageController,AXEPageController.prototype._viewFolder=null,AXEPageController.prototype.viewFolder=function(){var e=this;return e._viewFolder==null&&(e._viewFolder="views/"),e._viewFolder},AXEPageController.prototype.easeInOver=function(){var e=this;e.view().triggerEvent(new AXEPageEvent(AXEPageEvent.EASE_IN_OVER))},AXEPageController.prototype.easeOutOver=function(){var e=this;e.view().triggerEvent(new AXEPageEvent(AXEPageEvent.EASE_OUT_OVER))},AXEPageController.prototype.initPage=function(){},AXEPageController.prototype._pageName=null,AXEPageController.prototype.pageName=function(){var e=this;return e._pageName},AXEPageController.prototype._lockSize=!1,AXEPageController.prototype.lockSize=function(){var e=this;return e._lockSize},AXEPageController.prototype._folder=null,AXEPageController.prototype.folder=function(){var e=this;return e._folder},AXEPageController.prototype.initialize=function(){var e=this;e.pageName()!=null&&e.inited==0&&e.initWithURL(e.viewFolder()+e.pageName()+".xml")},AXEPageController.prototype.easeIn=function(e){var t=this;t.easeInOver()},AXEPageController.prototype.easeOut=function(e){var t=this;t.easeOutOver()},AXEPageController.prototype.display=function(){},AXEPageController.prototype.navigateBack=function(){var e=this;e.view().triggerEvent(new AXEPageEvent(AXEPageEvent.NAVIGATE_BACK))},AXEPageController.prototype.navigateNext=function(){var e=this;e.view().triggerEvent(new AXEPageEvent(AXEPageEvent.NAVIGATE_BACK))},AXEPageController.prototype.jumpTo=function(e){var t=this,n=new AXEPageEvent(AXEPageEvent.CHANGE_PAGE);n.evtData=e,t.view().triggerEvent(n)},AXEPageController.prototype.sendParams=function(e,t,n){var r=this;AXEPageController.pageParams==null&&(AXEPageController.pageParams={});var i=null;AXEPageController.pageParams.hasOwnProperty(e)?i=AXEPageController.pageParams[e]:(i={},AXEPageController.pageParams[e]=i),i[t]=n},AXEPageController.prototype.getParams=function(e){var t=this,n=null;if(AXEPageController.pageParams!=null&&AXEPageController.pageParams.hasOwnProperty(t.pageName())){var r=AXEPageController.pageParams[t.pageName()];r.hasOwnProperty(e)&&(n=r[e],delete r[e])}return n},AXEPageController.prototype.saveView=function(e,t){var n=AXEPageController.views();typeof t=="string"?n[t]=e:n[e.name()]=e},AXEPageController.prototype.viewByName=function(e,t){var n=null,r=AXEPageController.views();return r.hasOwnProperty(e)&&(n=r[e],Boolean(t)&&(n=n.clone())),n},AXEPageController.prototype._neverBack=!1,AXEPageController.prototype.neverBack=function(){var e=this;return e._neverBack}})(),define("page_ctrl",["view_ctrl","page_event"],function(){});var AXEPopupView=function(e){if(arguments.length>0){var t=this;AXEViewController.prototype.constructor.call(t,e)}};(function(){AXEPopupView.prototype=new AXEViewController,AXEPopupView.prototype.constructor=AXEPopupView,AXEPopupView.prototype.popupAnimated=!1,AXEPopupView.prototype.tappedToClose=!1,AXEPopupView.prototype.btnRemovePopup=null,AXEPopupView.prototype.popupManager=null,AXEPopupView.prototype.onViewControllerPrepared=function(){var e=this;e.view().className=="AXEViewContainer"&&(e.btnRemovePopup=e.view().subViewByName("btn-remove-popup"),e.btnRemovePopup!=null&&e.btnRemovePopup.addListener(AXETouchEvent.CLICK,e,function(){e.popupManager!=null&&e.popupManager.removePopup()}))},AXEPopupView.prototype.onPopup=function(){},AXEPopupView.prototype.onRemoved=function(){return!0}})(),define("popup_view",["view_ctrl","touch_event","scale_mode","align_mode"],function(){});var AXEPopupController=function(e){var t=this;arguments.length>0&&e instanceof AXEViewContainer?t.initWithView(e):t.init()};(function(){AXEPopupController.prototype=new AXEViewController,AXEPopupController.prototype.constructor=AXEPopupController,AXEPopupController.prototype.popupContainer=null,AXEPopupController.prototype.bgFade=null,AXEPopupController.prototype.onViewControllerPrepared=function(){var e=this;e.view().visible(!1),e.bgFade=new AXEView,e.view().addSubView(e.bgFade),e.bgFade.addListener(AXETouchEvent.TOUCH_END,e,e.onBGFadeTapped),e.popupContainer=new AXEViewContainer,e.popupContainer.muted(!0),e.view().addSubView(e.popupContainer)},AXEPopupController.prototype.onViewResize=function(e,t){var n=this;n.prepared&&(n.view().width(e),n.view().height(t),n.bgFade.width(e),n.bgFade.height(t),n.popupContainer.width(e),n.popupContainer.height(t))},AXEPopupController.prototype.onBGFadeTapped=function(){var e=this;e.currentPopupView!=null&&e.currentPopupView.tappedToClose&&e.removePopup()},AXEPopupController.prototype.currentPopupView=null,AXEPopupController.prototype.addCurrentPopupView=function(){var e=this;e.currentPopupView.popupManager=e,e.currentPopupView.tappedToClose&&e.currentPopupView.view().enabled(!1),e.popupContainer.empty(),e.popupContainer.addSubView(e.currentPopupView.view()),e.view().alpha(1),e.view().enabled(!0),e.view().visible(!0);var t=e.currentPopupView.view();e.currentPopupView.popupAnimated?(t.alpha(0),t.animate(.3,{alpha:1},AXEEasing.Cubic.easeOut,null,function(){e.currentPopupView.triggerEvent(new AXEEvent(AXEEvent.OPEN)),e.currentPopupView.onPopup()})):(t.alpha(1),e.currentPopupView.triggerEvent(new AXEEvent(AXEEvent.OPEN)),e.currentPopupView.onPopup())},AXEPopupController.prototype.popup=function(e,t,n){var r=this;r.currentPopupView=new AXEPopupView(e),r.currentPopupView.popupAnimated=typeof n=="boolean"?n:!1,r.currentPopupView.tappedToClose=typeof t=="boolean"?t:!1,r.addCurrentPopupView()},AXEPopupController.prototype.popupView=function(e){var t=this;t.currentPopupView!=e&&(t.currentPopupView=e,t.addCurrentPopupView())},AXEPopupController.prototype.removePopup=function(){var e=this;if(e.currentPopupView!=null){var t=e.currentPopupView,n=t.onRemoved();n&&(e.view().enabled(!1),t.popupAnimated?t.view().animate(.3,{alpha:0},AXEEasing.Cubic.easeIn,null,function(){e.view().visible(!1),e.currentPopupView=null,e.popupContainer.empty(),t.triggerEvent(new AXEEvent(AXEEvent.CLOSE))}):(e.view().visible(!1),e.currentPopupView=null,e.popupContainer.empty(),t.triggerEvent(new AXEEvent(AXEEvent.CLOSE))))}}})(),define("popup_ctrl",["view_ctrl","view","view_container","touch_event","popup_view","easing"],function(){});var AXEPopupManager={};(function(){AXEPopupManager._manager=null,AXEPopupManager.manager=function(e){return e!=null&&(AXEPopupManager._manager=new AXEPopupController(e)),AXEPopupManager._manager==null&&(AXEPopupManager._manager=new AXEPopupController),AXEPopupManager._manager}})(),define("popup_manager",["popup_ctrl"],function(){});var AXEProgressBar=function(){};(function(){AXEProgressBar.prototype=new AXEViewContainer,AXEProgressBar.prototype.constructor=AXEProgressBar,AXEProgressBar.prototype.updatePropsFromXML=function(e){var t=this;AXEViewContainer.prototype.updatePropsFromXML.call(t,e),t.hidden=t.visible()===!1,t.onViewPropUpdated()},AXEProgressBar.prototype.update=function(e,t){var n=this;AXEViewContainer.prototype.update.call(n,e,t),n.progessChanged&&(n.progessChanged=!1,n.onProgressChange())},AXEProgressBar.prototype.progessChanged=!0,AXEProgressBar.prototype._progress=0,AXEProgressBar.prototype.progress=function(e){var t=this;return isNaN(e)===!1&&e!=t._progress&&(t._progress=Math.max(0,Math.min(1,e)),t.progessChanged=!0),t._progress},AXEProgressBar.prototype.onViewPropUpdated=function(){},AXEProgressBar.prototype.onProgressChange=function(){},AXEProgressBar.prototype.resetProgressBar=function(){var e=this;e.progress(0)}})(),define("progress_bar",["view_container"],function(){});var AXENaviController=function(e,t,n){var r=this;typeof t=="boolean"&&(r._queueMode=t),typeof n=="boolean"&&(r._newAtBtm=n),AXEViewController.prototype.constructor.call(r,e)};(function(){AXENaviController.prototype=new AXEViewController,AXENaviController.prototype.constructor=AXENaviController,AXENaviController.prototype.pageBox=null,AXENaviController.prototype.pageForAdding=null,AXENaviController.prototype._historyCursor=0,AXENaviController.prototype.historyCursor=function(){var e=this;return e._historyCursor},AXENaviController.prototype._history=null,AXENaviController.prototype.history=function(){var e=this;return e._history==null&&(e._history=[]),e._history},AXENaviController.prototype.onPageRequestBack=function(e){var t=this,n=!1,r=t.historyCursor();while(t.historyCursor()>0){t._historyCursor-=1;var i=t.history()[t._historyCursor];if(i.neverBack()==0){n=!0,t.renderPage(i);break}}n||(t._historyCursor=r),e.stopImmediatePropagation()},AXENaviController.prototype.onPageRequestNext=function(e){var t=this,n=!1,r=t.historyCursor();while(t.historyCursor()<t.history().length-1){t._historyCursor+=1;var i=t.history()[t._historyCursor];if(i.neverBack()==0){n=!0,t.renderPage(i);break}}n||(t._historyCursor=r),e.stopImmediatePropagation()},AXENaviController.prototype.onPageRequestChange=function(e){var t=this,n=String(e.evtData);t.showPageByName(n),e.stopImmediatePropagation()},AXENaviController.prototype.onPageEaseInOver=function(e){var t=this;t.currentPage().display(),t.pageBox.enabled(!0),e.stopImmediatePropagation()},AXENaviController.prototype.onPageEaseOutOver=function(e){var t=this,n=e.target.controller;n.view().remove();if(t.pageForAdding!=null){t._currentPage=null;var r=t.pageForAdding;t.pageForAdding=null,t.renderPage(r)}e.stopImmediatePropagation()},AXENaviController.prototype.onCurrentPageProgress=function(e){var t=this;t.loadingView().progress(e.percent)},AXENaviController.prototype.onCurrentPagePrepared=function(e){var t=this;t.loadingView().visible(!1),t.pageBox.visible(!0),AXELoaderConfig.loadThreadsCount=1;var n=e.target;n.removeListener(AXEEvent.PREPARED,t,t.onCurrentPagePrepared),n.removeListener(AXEProgressEvent.PROGRESS,t,t.onCurrentPageProgress),t.renderPage(n)},AXENaviController.prototype.onViewControllerPrepared=function(){var e=this;e.pageBox=e.view().subViewByName("page-box"),e.pageBox.addListener(AXEPageEvent.CHANGE_PAGE,e,e.onPageRequestChange),e.pageBox.addListener(AXEPageEvent.EASE_IN_OVER,e,e.onPageEaseInOver),e.pageBox.addListener(AXEPageEvent.EASE_OUT_OVER,e,e.onPageEaseOutOver),e.pageBox.addListener(AXEPageEvent.NAVIGATE_BACK,e,e.onPageRequestBack),e.pageBox.addListener(AXEPageEvent.NAVIGATE_NEXT,e,e.onPageRequestNext),e.loadingView(e.view().subViewByName("loading"))},AXENaviController.prototype.onViewUpdated=function(e,t){var n=this;AXEViewController.prototype.onViewUpdated.call(n,e,t);if(n.currentPage()!=null){var r=n.view().stage();r.className=="AXEStage"&&r.lockSize()!=n.currentPage().lockSize()&&r.lockSize(n.currentPage().lockSize())}},AXENaviController.prototype._pages=null,AXENaviController.prototype.pages=function(e){var t=this;return Boolean(e)&&e!=t._pages&&(t._pages=e),t._pages==null&&(t._pages=[]),t._pages},AXENaviController.prototype.preLoadPages=function(){var e=this,t=e.pages(),n=null;AXEArrayUtil.each(t,function(e,t){if(t.inited&&t.prepared==0)return n=t,!1});if(n!=null)n.addListener(AXEEvent.PREPARED,e,e.onPagePreLoad);else for(var r=0;r<t.length;r++)if(t[r].inited==0){t[r].addListener(AXEEvent.PREPARED,e,e.onPagePreLoad),t[r].initialize();break}},AXENaviController.prototype.onPagePreLoad=function(e){var t=this,n=e.currentTarget;n.removeListener(AXEEvent.PREPARED,t,t.onPagePreLoad),t.preLoadPages()},AXENaviController.prototype._currentPage=null,AXENaviController.prototype.currentPage=function(){var e=this;return e._currentPage},AXENaviController.prototype.lastPage=null,AXENaviController.prototype.showPage=function(e){var t=this,n=t.history();n=n.slice(0,t.historyCursor()+1),n.push(e),t._history=n,t._historyCursor=n.length-1,t.renderPage(e)},AXENaviController.prototype.renderPage=function(e){var t=this;if(t._currentPage==null||t._currentPage!=e)t.pageBox.enabled(!1),t.queueMode()&&t._currentPage!=null?(t.pageForAdding=e,t.lastPage=t._currentPage,t._currentPage.easeOut(e)):e.prepared?(t.loadingView().visible(!1),t._currentPage!=null&&(t.lastPage=t._currentPage,t._currentPage.easeOut(e)),t._currentPage=e,t.pageBox.visible(!0),t.newAtBtm()?t.pageBox.insertSubViewAt(t._currentPage.view(),0):t.pageBox.addSubView(t._currentPage.view(),0),t._currentPage.easeIn(t.lastPage),t.triggerEvent(new AXEEvent(AXEEvent.CHANGE))):(t.pageBox.visible(!1),t.loadingView().visible(!0),t.loadingView().resetProgressBar(),t.triggerEvent(new AXEEvent(AXEEvent.LOAD)),AXELoaderConfig.loadThreadsCount=10,e.addListener(AXEEvent.PREPARED,t,t.onCurrentPagePrepared),e.addListener(AXEProgressEvent.PROGRESS,t,t.onCurrentPageProgress),e.initialize())},AXENaviController.prototype.showPageByName=function(e){var t=this,n=null,r=t.pages();for(var i=0;i<r.length;i++)if(e==r[i].pageName()){n=r[i];break}if(n==null)throw new Error("The specified page: "+e+" does not exist.");t.showPage(n)},AXENaviController.prototype._loadingView=null,AXENaviController.prototype.loadingView=function(e){var t=this;return Boolean(e)&&(t._loadingView=e,t._loadingView.visible(!1)),t._loadingView==null&&(t._loadingView=new AXEProgressBar,t._loadingView.visible(!1)),t._loadingView},AXENaviController.prototype._newAtBtm=!1,AXENaviController.prototype.newAtBtm=function(){var e=this;return e._newAtBtm},AXENaviController.prototype._queueMode=!1,AXENaviController.prototype.queueMode=function(){var e=this;return e._queueMode}})(),define("navi_ctrl",["view_ctrl","page_event","page_ctrl","popup_manager","progress_bar"],function(){});var AXESoundManager={};(function(){AXESoundManager.sounds={},AXESoundManager.playingSounds={},AXESoundManager._trigger=null,AXESoundManager.trigger=function(){return AXESoundManager._trigger==null&&(AXESoundManager._trigger=new AXEEventTarget),AXESoundManager._trigger},AXESoundManager.sound=function(e){return AXESoundManager.sounds[e]},AXESoundManager.addSound=function(e,t){if(AXESoundManager.sounds[e]==null){var n=new AXEAudioController(e);typeof t=="boolean"?n.loop(t):n.loop(!1),n.addListener(AXEEvent.END,self,function(){AXESoundManager.pauseSound(e)}),AXESoundManager.sounds[e]=n}},AXESoundManager.playSound=function(e,t){if(AXESoundManager.playingSounds.hasOwnProperty(e)===!1){var n=AXESoundManager.sounds[e];n!=null&&(AXESoundManager.mute()===!1?(n.play(t),AXESoundManager.playingSounds[e]=n):n.loop()&&(AXESoundManager.playingSounds[e]=n))}},AXESoundManager.pauseSound=function(e){var t=AXESoundManager.sounds[e];t!=null&&(t.pause(),delete AXESoundManager.playingSounds[e])},AXESoundManager._mute=!1,AXESoundManager.mute=function(e){if(typeof e=="boolean"&&AXESoundManager._mute!=e){AXESoundManager._mute=e;for(var t in AXESoundManager.playingSounds)if(AXESoundManager.playingSounds.hasOwnProperty(t)){var n=AXESoundManager.playingSounds[t];AXESoundManager._mute?(n.pause(),n.loop()===!1&&delete AXESoundManager.playingSounds[t]):n.loop()?n.play():n.play(0)}AXESoundManager.trigger().triggerEvent(new AXEEvent(AXEEvent.CHANGE))}return AXESoundManager._mute}})(),define("sound_manager",["audio_ctrl","assets_loader","event_target","event","loader_config"],function(){});var PandoraPage=function(){var e=this;AXEPageController.prototype.constructor.call(e)};(function(){PandoraPage.prototype=new AXEPageController,PandoraPage.prototype.constructor=PandoraPage})(),define("pandora_page",["page_ctrl","sound_manager"],function(){});var LoadingPage=function(){var e=this;PandoraPage.prototype.constructor.call(e)};(function(){LoadingPage.prototype=new PandoraPage,LoadingPage.prototype.constructor=LoadingPage,LoadingPage.prototype.initPage=function(){var e=this;e._pageName="loading"},LoadingPage.prototype.loadingLine=null,LoadingPage.prototype.onViewControllerPrepared=function(){var e=this;PandoraPage.prototype.onViewControllerPrepared.call(e),e.loadingLine=e.view().subViewByName("loading_line"),_czc.push(["_trackPageview","/loading_page"])},LoadingPage.prototype.onResourceProgress=function(e){var t=this,n=e.currentTarget._loadPercent;t.loadingLine.width(t.view().width()*n)},LoadingPage.prototype.onResourceLoad=function(e){var t=this,n=e.currentTarget;n.removeListener(AXEProgressEvent.PROGRESS,t,t.onResourceProgress),n.removeListener(AXEEvent.PREPARED,t,t.onResourceLoad),AXEEnv.os.ios&&AXEEnv.browser.wechat?t.jumpTo("video"):t.jumpTo("android")}})(),define("loading_page",["pandora_page"],function(){});var VideoPage=function(){var e=this;PandoraPage.prototype.constructor.call(e)};(function(){VideoPage.SKIP_RANGE=[30,151.5],VideoPage.prototype=new PandoraPage,VideoPage.prototype.constructor=VideoPage,VideoPage.prototype.btnSkip=null,VideoPage.prototype.$videoBox=null,VideoPage.prototype.$video=null,VideoPage.prototype.videoBar=null,VideoPage.prototype.poster=null,VideoPage.prototype.barBox=null,VideoPage.prototype.videoPlaying=!1,VideoPage.prototype.videoInited=function(){return AXEEnv.os.ios&&AXEEnv.browser.wechat}(),VideoPage.prototype.onVideoPlayToEnd=function(){var e=this;window.setTimeout(function(){e.$video[0].pause(),e.$videoBox.detach()},500),e.jumpTo("ending")},VideoPage.prototype.initPage=function(){var e=this;e._pageName="video"},VideoPage.prototype.barFlag=!1,VideoPage.prototype.onViewControllerPrepared=function(){var e=this;PandoraPage.prototype.onViewControllerPrepared.call(e),e.poster=e.view().subViewByName("poster"),e.barBox=e.view().subViewByName("bar-box"),e.videoBar=e.barBox.subViewByName("bar"),e.btnSkip=e.view().subViewByName("btn-skip");var t=e.btnSkip.$html();t.on("click",function(){if(e.barFlag&&e.videoPlaying){_czc.push(["_trackEvent","video","click","skip_btn"]);var t=e.$video[0].seekable.end(0),n=Math.min(VideoPage.SKIP_RANGE[1],t);e.$video[0].currentTime=n}}),e.$videoBox=$("div.video-box"),e.$video=e.$videoBox.children("video"),e.$videoBox.detach(),e.$videoBox.show(),e.$video.on("abort canplay canplaythrough emptied ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend  timeupdate volumechange waiting",function(e){console.log("video:"+e.type)}),e.$videoBox.on("touchstart",function(){e.videoInited=!0,e.$video[0].play(),e.barBox.alpha()==1?e.barEaseOut():e.barEaseIn()}),e.$video.on("ended",function(){e.videoPlaying=!1,e.onVideoPlayToEnd()}),e.$video.on("playing",function(){e.videoPlaying=!0}),e.$video.on("timeupdate",function(){e.videoPlaying&&parseFloat(e.$videoBox.css("opacity"))<1&&(e.$videoBox.css("opacity",1),e.poster.visible(!1))})},VideoPage.prototype.barEaseOut=function(){var e=this;if(!e.barFlag)return;e.btnSkip.animate(.3,{alpha:0},AXEEasing.Cubic.easeInOut,null,function(){e.btnSkip.visible(!1)}),e.barBox.animate(.3,{alpha:0},AXEEasing.Cubic.easeInOut,null,function(){})},VideoPage.prototype.barEaseIn=function(){var e=this;if(!e.barFlag)return;e.btnSkip.visible(!0),e.btnSkip.alpha(0),e.btnSkip.animate(.3,{alpha:1},AXEEasing.Cubic.easeInOut,null,function(){}),e.barBox.animate(.3,{alpha:1},AXEEasing.Cubic.easeInOut,null,function(){})},VideoPage.prototype.onViewAddToStage=function(){var e=this;PandoraPage.prototype.onViewAddToStage.call(e),e.prepared&&(_czc.push(["_trackPageview","/video_page","/loading_page"]),e.videoPlaying=!1,e.barFlag=!1,e.easeFlag=!0,e.btnSkip.visible(!1),AXEEnv.os.ios&&AXEEnv.browser.wechat?e.btnSkip.y(1):e.btnSkip.y(100),e.videoBar.width(0),e.barBox.alpha(0),e.poster.visible(!0),$("body").append(e.$videoBox),e.$videoBox.css("opacity",.01),e.$video[0].pause(),e.$video[0].currentTime=0,e.$video[0].play())},VideoPage.prototype.easeFlag=!0,VideoPage.prototype.onViewUpdated=function(e,t){var n=this;if(n.prepared&&n.videoPlaying){var r=n.$video[0].currentTime/n.$video[0].duration;n.videoBar.widthPercent(r),n.barFlag=n.$video[0].currentTime>=VideoPage.SKIP_RANGE[0]&&n.$video[0].currentTime<VideoPage.SKIP_RANGE[1],n.barFlag?n.barFlag&&n.easeFlag&&(n.barEaseIn(),n.easeFlag=!1):n.btnSkip.visible(!1)}}})(),define("video_page",["pandora_page"],function(){});var AndroidPage=function(){var e=this;PandoraPage.prototype.constructor.call(e)};(function(){AndroidPage.prototype=new PandoraPage,AndroidPage.prototype.constructor=AndroidPage,AndroidPage.prototype.initPage=function(){var e=this;e._pageName="android"},AndroidPage.prototype.onViewControllerPrepared=function(){var e=this;PandoraPage.prototype.onViewControllerPrepared.call(e),e.view().addListener(AXETouchEvent.CLICK,e,e.goVideoPage)},AndroidPage.prototype.goVideoPage=function(){var e=this;_czc.push(["_trackEvent","android","click","android_btn"]),e.jumpTo("video")},AndroidPage.prototype.onViewAddToStage=function(){_czc.push(["_trackPageview","/android_page","/loading_page"])}})(),define("android_page",["pandora_page"],function(){});var AXEClipboard=function(){};(function(){AXEClipboard.support=function(e){var t=!1;return document["queryCommandSupported"]!=undefined&&(t=document.queryCommandSupported(e)),t},AXEClipboard.copyText=function(e){var t=document.createElement("textarea");t.style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return t.style.top=n+"px",t.setAttribute("readonly",""),t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),document.body.removeChild(t),!1}})(),define("clipboard",function(){});var EndingPage=function(){var e=this;PandoraPage.prototype.constructor.call(e)};(function(){EndingPage.prototype=new PandoraPage,EndingPage.prototype.constructor=EndingPage,EndingPage.prototype.initPage=function(){var e=this;e._pageName="ending"},EndingPage.prototype.onBtnCopyClick=function(){var e=this;_czc.push(["_trackEvent","ending","click","copy_btn"]),AXEClipboard.support("copy")?(AXEClipboard.copyText("PANDORA潘多拉官方旗舰店，使用￥陈柏霖的圣诞告白￥抢先预览"),alert("淘口令复制成功，请前往手机淘宝APP挑选你的挚爱吧")):alert("您的浏览器不支持一键复制，请长按上方文字复制。")},EndingPage.prototype.endingMotion=null,EndingPage.prototype.btnCopy=null,EndingPage.prototype.sharePopup=null,EndingPage.prototype.shareBtn=null,EndingPage.prototype.repeatBtn=null,EndingPage.prototype.endingBg=null,EndingPage.prototype.endingText=null,EndingPage.prototype.endingPro=null,EndingPage.prototype.onViewControllerPrepared=function(){var e=this;PandoraPage.prototype.onViewControllerPrepared.call(e),e.poster=e.view().subViewByName("poster"),e.endingMotion=e.view().subViewByName("ending_motion"),e.btnCopy=e.endingMotion.layerContentByName("link_btn"),e.btnCopy.addListener(AXETouchEvent.CLICK,e,e.onBtnCopyClick),e.shareBtn=e.endingMotion.layerContentByName("share_btn"),e.shareBtn.addListener(AXETouchEvent.CLICK,e,e.showSharePopup),e.repeatBtn=e.endingMotion.layerContentByName("repeat_btn"),e.repeatBtn.addListener(AXETouchEvent.CLICK,e,e.goVideoPage),e.sharePopup=e.view().subViewByName("share_popup"),e.sharePopup.remove(),e.endingBg=e.view().subViewByName("ending_bg"),e.endingText=e.view().subViewByName("text"),e.endingPro=e.view().subViewByName("pro")},EndingPage.prototype.goVideoPage=function(){var e=this;_czc.push(["_trackEvent","ending","click","again_btn"]),e.jumpTo("video")},EndingPage.prototype.showSharePopup=function(){var e=this;_czc.push(["_trackEvent","ending","click","share_btn"]);var t=AXEWechat.wechat(),n=window.navigator.userAgent.toLowerCase();/(com.meitu)/gi.test(n)?(WebviewJsBridge.onSharePageInfo({title:"刚刚，陈柏霖跟我告白了。",image:AXEURLUtil.relativePath("images/share2.jpg"),description:"嘘，别让太多人知道。",link:AXEURLUtil.cleanURL(),success:function(){}}),WebviewJsBridge.callSharePageInfo()):AXEPopupManager.manager().popup(e.sharePopup,!0)},EndingPage.prototype.onViewAddToStage=function(){var e=this;e.prepared&&(_czc.push(["_trackPageview","/ending_page","/video_page"]),e.poster.showHTML(!0),e.endingMotion.pause(0),e.endingBg.pause(0),e.endingPro.pause(0),e.endingText.pause(0),window.setTimeout(function(){e.poster.showHTML(!1),e.endingMotion.play(0),e.endingBg.play(0),e.endingPro.play(0),e.endingText.play(0)},600))}})(),define("ending_page",["pandora_page","sound_manager","clipboard"],function(){});var PandoraStage=function(){};(function(){PandoraStage.prototype=new AXEStageController,PandoraStage.prototype.constructor=PandoraStage,PandoraStage.prototype.navi=null,PandoraStage.prototype.$videoBox=null,PandoraStage.prototype.loadingPage=null,PandoraStage.prototype.resLoader=null,PandoraStage.prototype.onViewControllerPrepared=function(){var e=this;e.$videoBox=$("div.video-box"),e.loadingPage=new LoadingPage,e.navi=new AXENaviController(e.view().subViewByName("navi"),!0),e.navi.pages([e.loadingPage,new AndroidPage,new VideoPage,new EndingPage]);var t=AXEPopupManager.manager().view();e.view().addSubView(t)},PandoraStage.prototype.onViewResize=function(e,t){var n=this;AXEStageController.prototype.onViewResize.call(n,e,t);if(n.prepared){var r=n.view().renderEngine();r!=null&&r.layoutHTMLElement(n.$videoBox,n.view(),!0)}},PandoraStage.prototype.onViewAddToStage=function(){var e=this;e.navi.showPageByName("loading"),e.resLoader=new AXEViewController,e.resLoader.initWithURL("views/res.xml"),e.resLoader.addListener(AXEProgressEvent.PROGRESS,e.loadingPage,e.loadingPage.onResourceProgress),e.resLoader.addListener(AXEEvent.PREPARED,e.loadingPage,e.loadingPage.onResourceLoad)}})(),define("pandora_stage",["stage_ctrl","wechat","sns_event","env","stage_ctrl","navi_ctrl","popup_manager","loading_page","video_page","android_page","ending_page"],function(){}),require.config({baseUrl:"./js",paths:typeof window.AXELibrary!="undefined"?AXELibrary.modules():{},shim:typeof window.AXELibrary!="undefined"?AXELibrary.shims():{},urlArgs:"v="+$('meta[name="axe:version"]').attr("content")}),require(["env","axe","wechat","sns_event","url_util","pandora_stage","view_factory"],function(){if(AXEEnv.browser.wechat){var e=AXEWechat.wechat();e.addListener(AXESNSEvent.SNS_ERROR,e,function(){e.removeListener(AXESNSEvent.SNS_ERROR),e.removeListener(AXESNSEvent.WEICHAT_READY)}),e.addListener(AXESNSEvent.WEICHAT_READY,e,function(){e.removeListener(AXESNSEvent.SNS_ERROR),e.removeListener(AXESNSEvent.WEICHAT_READY),e.addListener(AXESNSEvent.SUCCESS_SHARING,e,function(e){});var t=parseInt(3*Math.random());t==0?(e.timelineShareTitle="圣诞夜，陈柏霖有些“小事”想对你说",e.timelineShareImageURL=AXEURLUtil.relativePath("images/share3.jpg"),e.shareLink=AXEURLUtil.cleanURL(),e.updateSharing()):t==1?(e.timelineShareTitle="在吗？陈柏霖正在你家门口",e.timelineShareImageURL=AXEURLUtil.relativePath("images/share1.jpg"),e.shareLink=AXEURLUtil.cleanURL(),e.updateSharing()):(e.timelineShareTitle="刚刚，陈柏霖跟我告白了。",e.timelineShareImageURL=AXEURLUtil.relativePath("images/share2.jpg"),e.shareLink=AXEURLUtil.cleanURL(),e.updateSharing()),e.friendShareTitle="刚刚，陈柏霖跟我告白了。",e.friendShareDesc="嘘，别让太多人知道。",e.friendShareImageURL=AXEURLUtil.relativePath("images/share2.jpg"),e.shareLink=AXEURLUtil.cleanURL(),e.updateSharing(),e.addListener(AXESNSEvent.SUCCESS_SHARING,e,function(e){e.channel==AXEWechat.FRIENDS?_czc.push(["_trackEvent","share","share","share_to_friends"]):e.channel==AXEWechat.MOMENTS&&_czc.push(["_trackEvent","share","share","share_to_Moment"])});if(AXEEnv.os.ios&&AXEEnv.browser.wechat){var n=$("div.video-box video");n[0].play(),n[0].pause()}new AXE(PandoraStage,"views/stage.xml")}),e.initialize("//service.teown.com/app/wechat/jsticket.php")}else new AXE(PandoraStage,"views/stage.xml")}),define("main",function(){});